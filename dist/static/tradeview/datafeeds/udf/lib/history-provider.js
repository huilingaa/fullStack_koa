import{getErrorMessage}from"./helpers";var HistoryProvider=function(){function e(e,r){this._datafeedUrl=e,this._requester=r}return e.prototype.getBars=function(e,r,o,t){var s=this,i={symbol:e.ticker||"",resolution:r,from:o,to:t};return new Promise((function(e,r){s._requester.sendRequest(s._datafeedUrl,"history",i).then((function(o){if("ok"===o.s||"no_data"===o.s){var t=[],s={noData:!1};if("no_data"===o.s)s.noData=!0,s.nextTime=o.nextTime;else for(var i=void 0!==o.v,n=void 0!==o.o,a=0;a<o.t.length;++a){var u={time:1e3*o.t[a],close:Number(o.c[a]),open:Number(o.c[a]),high:Number(o.c[a]),low:Number(o.c[a])};n&&(u.open=Number(o.o[a]),u.high=Number(o.h[a]),u.low=Number(o.l[a])),i&&(u.volume=Number(o.v[a])),t.push(u)}e({bars:t,meta:s})}else r(o.errmsg)})).catch((function(e){var o=getErrorMessage(e);console.warn("HistoryProvider: getBars() failed, error="+o),r(o)}))}))},e}();export{HistoryProvider};