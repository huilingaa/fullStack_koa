(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{s7sJ:function(t,e,s){"use strict";s.r(e);var a=s("lSNA"),o=s.n(a),i=s("L2JU"),l=s("vKDJ");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}var n={name:"VoteApply",data:function(){return{applyList:[],myVoted:[],loading:!0,submitFormVisible:!1,submitForming:!1,viewFormVisible:!1,selectedApply:{},submitFormData:{assetCode:"",assetName:"",assetNameEn:"",assetSiteUrl:null,assetDescription:null},minPolls:0,pollRatio:.1,showType:"voting"}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){o()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(i.d)(["token"])),watch:{showType:function(t,e){this.load()}},mounted:function(){this.load()},methods:{getStatusDesc:function(t){switch(t){case"listed":return this.$t("asset_vote.apply_status_listed");case"aborted":return this.$t("asset_vote.apply_status_aborted")}},load:function(){var t=this;t.loading=!0,t.applyList=[],l.a.getAssetApplyList(this.showType).then((function(e){t.applyList=e})).finally((function(){t.loading=!1})),t.token&&l.a.getMyVoted().then((function(e){t.myVoted=e}))},calculateWidth:function(t){var e=2*t;return(e=Math.min(200,e))+"px"},vote:function(t){var e=this;e.loading=!0,l.a.voteAssetApply(t).then((function(t){e.$message({type:"success",message:"Success"}),e.load()})).finally((function(){e.loading=!1}))},showApplyDetail:function(t){this.selectedApply=this.applyList.filter((function(e){return e.id===t}))[0],this.viewFormVisible=!0},submitForm:function(){var t=this;this.$refs.applyForm.validate((function(e){e&&(t.submitForming=!0,l.a.submitAssetApply(t.submitFormData).then((function(e){t.$refs.applyForm.resetFields(),t.$message({type:"success",message:"Success"}),t.submitFormVisible=!1,t.load()})).finally((function(){t.submitForming=!1})))}))}}},c=s("KHd+"),_=Object(c.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"1280px",margin:"10px auto"}},[s("div",{staticStyle:{padding:"10px 0"}},[t.token?s("el-button",{staticStyle:{width:"180px"},attrs:{type:"primary"},on:{click:function(e){t.submitFormVisible=!0}}},[t._v("\n      "+t._s(t.$t("asset_vote.create_new_apply"))+"\n    ")]):s("div",[s("span",{domProps:{innerHTML:t._s(t.$t("asset_vote.login_tip"))}}),t._v(" "),s("router-link",{attrs:{to:"/login"}},[t._v("\n        "+t._s(t.$t("trade.login"))+"\n      ")]),t._v(" "),s("span",{staticStyle:{color:"#cccccc"}},[t._v(" "+t._s(t.$t("trade.or"))+" ")]),t._v(" "),s("router-link",{attrs:{to:"/register"}},[t._v("\n        "+t._s(t.$t("trade.register"))+"\n      ")])],1)],1),t._v(" "),s("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"400px"},attrs:{type:"card"},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}},[s("el-tab-pane",{attrs:{name:"voting"}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.$t("asset_vote.status_voting")))]),t._v(" "),s("el-table",{attrs:{data:t.applyList,size:"small"}},[s("el-table-column",{attrs:{width:"50",type:"index"}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetCode",width:"160",label:t.$t("asset_vote.asset_code")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"click"}},[s("span",{attrs:{slot:"reference"},slot:"reference"},[s("a",{attrs:{href:"javascript:"}},[t._v(" "+t._s(e.row.assetCode)+" ")])]),t._v(" "),s("div",{staticStyle:{"font-weight":"600","line-height":"26px"}},[t._v("\n                "+t._s(t.$t("asset_vote.form_asset_desc"))+"\n              ")]),t._v(" "),s("span",{staticStyle:{color:"#999","line-height":"20px"}},[t._v(t._s(e.row.assetDescription))]),s("br"),t._v(" "),s("p",[t._v(t._s(t.$t("asset_vote.submit_by"))+":   "),s("span",{staticStyle:{color:"#999"}},[t._v(t._s(e.row.submitBy))])])])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"assetName",width:"160",label:t.$t("asset_vote.form_asset_name")}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetNameEn",width:"160",label:t.$t("asset_vote.form_asset_name_en")}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetSiteUrl",label:t.$t("asset_vote.form_asset_site")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{attrs:{href:e.row.assetSiteUrl,target:"_blank"}},[t._v(t._s(e.row.assetSiteUrl))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"voteCount",width:"300",label:t.$t("asset_vote.vote_count")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{width:"200px",padding:"0","background-color":"#ebeef5"}},[s("div",{staticStyle:{"background-color":"#3d7cf5",height:"20px"},style:{width:t.calculateWidth(e.row.voteCount)}})]),t._v(" "),s("div",{staticStyle:{position:"absolute",left:"220px",top:"15px"}},[t._v("\n              "+t._s(e.row.voteCount)+"\n            ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"id",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.loading?t._e():s("div",[-1===t.myVoted.indexOf(e.row.id)?s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.vote(e.row.id)}}},[t._v("\n                "+t._s(t.$t("asset_vote.action_vote"))+"\n              ")]):s("el-button",{attrs:{type:"info",disabled:!0},on:{click:function(s){return t.vote(e.row.id)}}},[s("el-icon",{staticClass:"el-icon-check"}),t._v("\n                "+t._s(t.$t("asset_vote.action_voted"))+"\n              ")],1)],1)]}}])})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{name:"ended"}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.$t("asset_vote.status_ended")))]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.applyList,size:"small"}},[s("el-table-column",{attrs:{width:"50",type:"index"}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetCode",width:"160",label:t.$t("asset_vote.asset_code")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"click"}},[s("span",{attrs:{slot:"reference"},slot:"reference"},[s("a",{attrs:{href:"javascript:"}},[t._v(" "+t._s(e.row.assetCode)+" ")])]),t._v(" "),s("div",{staticStyle:{"font-size":"18px"}},[t._v("\n                "+t._s(t.$t("asset_vote.form_asset_desc"))+"\n              ")]),t._v(" "),s("p",{staticStyle:{color:"#999"}},[t._v("\n                "+t._s(e.row.assetDescription)+"\n              ")]),t._v("\n              "+t._s(t.$t("asset_vote.submit_by"))+": "),s("span",{staticStyle:{color:"#999"}},[t._v(t._s(e.row.submitBy))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"assetName",width:"160",label:t.$t("asset_vote.form_asset_name")}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetNameEn",width:"160",label:t.$t("asset_vote.form_asset_name_en")}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetSiteUrl",label:t.$t("asset_vote.form_asset_site")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{attrs:{href:e.row.assetSiteUrl,target:"_blank"}},[t._v(t._s(e.row.assetSiteUrl))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"voteCount",width:"260",label:t.$t("asset_vote.vote_count")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.voteCount)+"\n          ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"remark",label:t.$t("asset_vote.result")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.getStatusDesc(e.row.status))+" "+t._s(e.row.remark)+"\n          ")]}}])})],1)],1)],1),t._v(" "),s("div",[s("div",{staticStyle:{"font-size":"14px","padding-left":"20px","margin-top":"20px"}},[t._v("\n      "+t._s(t.$t("asset_vote.rule_title"))+"：\n    ")]),t._v(" "),s("ol",{staticStyle:{"line-height":"24px","font-size":"12px"}},[s("li",[t._v(t._s(t.$t("asset_vote.tip1")))]),t._v(" "),s("li",[t._v(t._s(t.$t("asset_vote.tip2")))]),t._v(" "),s("li",[t._v(t._s(t.$t("asset_vote.tip3")))]),t._v(" "),s("li",[t._v(t._s(t.$t("asset_vote.tip4")))]),t._v(" "),s("li",[t._v(t._s(t.$t("asset_vote.tip5")))]),t._v(" "),s("li",[t._v(t._s(t.$t("asset_vote.tip6")))])])]),t._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.submitForming,expression:"submitForming"}],attrs:{title:t.$t("asset_vote.form_asset_title"),visible:t.submitFormVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(e){t.submitFormVisible=e}}},[s("el-form",{ref:"applyForm",attrs:{"hide-required-asterisk":!0,model:t.submitFormData,"status-icon":!1,"label-position":"right","label-width":"100px","show-message":!1}},[s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_code"),prop:"assetCode",rules:[{required:!0,trigger:"blur"}]}},[s("el-input",{staticStyle:{width:"150px"},attrs:{type:"text"},model:{value:t.submitFormData.assetCode,callback:function(e){t.$set(t.submitFormData,"assetCode",e)},expression:"submitFormData.assetCode"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_name"),prop:"assetName",rules:[{required:!0,trigger:"blur"}]}},[s("el-input",{staticStyle:{width:"150px"},attrs:{type:"text"},model:{value:t.submitFormData.assetName,callback:function(e){t.$set(t.submitFormData,"assetName",e)},expression:"submitFormData.assetName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_name_en"),prop:"assetNameEn",rules:[{required:!0,trigger:"blur"}]}},[s("el-input",{staticStyle:{width:"150px"},attrs:{type:"text"},model:{value:t.submitFormData.assetNameEn,callback:function(e){t.$set(t.submitFormData,"assetNameEn",e)},expression:"submitFormData.assetNameEn"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_site"),prop:"assetSiteUrl",rules:[{required:!0,trigger:"blur"}]}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"text"},model:{value:t.submitFormData.assetSiteUrl,callback:function(e){t.$set(t.submitFormData,"assetSiteUrl",e)},expression:"submitFormData.assetSiteUrl"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_desc"),prop:"assetDescription",rules:[{required:!0,trigger:"blur"}]}},[s("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.submitFormData.assetDescription,callback:function(e){t.$set(t.submitFormData,"assetDescription",e)},expression:"submitFormData.assetDescription"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("\n        "+t._s(t.$t("common.confirm"))+"\n      ")]),t._v(" "),s("el-button",{on:{click:function(e){t.submitFormVisible=!1}}},[t._v("\n        "+t._s(t.$t("common.cancel"))+"\n      ")])],1)],1),t._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.submitForming,expression:"submitForming"}],attrs:{title:t.$t("asset_vote.form_asset_title_view"),visible:t.viewFormVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(e){t.viewFormVisible=e}}},[s("el-form",{attrs:{"hide-required-asterisk":!0,model:t.selectedApply,"status-icon":!1,"label-position":"right","label-width":"100px"}},[s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_code")}},[s("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.selectedApply.assetCode))])]),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_name")}},[s("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.selectedApply.assetName)+" ("+t._s(t.selectedApply.assetNameEn)+")")])]),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_site")}},[s("a",{attrs:{href:t.selectedApply.assetSiteUrl,target:"_blank"}},[t._v(t._s(t.selectedApply.assetSiteUrl))])]),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.form_asset_desc")}},[s("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.selectedApply.assetDescription))])]),t._v(" "),s("el-form-item",{attrs:{label:t.$t("asset_vote.submit_by")}},[s("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.selectedApply.submitBy))])])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.loading?t._e():s("div",[-1===t.myVoted.indexOf(t.selectedApply.id)?s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.vote(t.selectedApply.id)}}},[t._v("\n          "+t._s(t.$t("asset_vote.action_vote"))+"\n        ")]):s("el-button",{attrs:{type:"info",disabled:!0}},[s("el-icon",{staticClass:"el-icon-check"}),t._v("\n          "+t._s(t.$t("asset_vote.action_voted"))+"\n        ")],1),t._v(" "),s("el-button",{on:{click:function(e){t.viewFormVisible=!1}}},[t._v("\n          "+t._s(t.$t("common.cancel"))+"\n        ")])],1)])],1)],1)}),[],!1,null,"1eb5a7e4",null);e.default=_.exports}}]);