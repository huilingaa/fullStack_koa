(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{Rc4f:function(e,t,n){"use strict";var s=n("lSNA"),i=n.n(s),r=n("L2JU");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={name:"Captcha",props:{scene:{type:String,default:"nc_login"},customWidth:{type:[String,Number],default:360},purpose:{type:[String,Number],default:"nc_login_pc"},id:{type:String,default:"captcha"}},data:function(){return{appkey:"FFFF0N000000000085FE",nc:null,visible:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.d)(["lang"])),watch:{visible:function(e){var t=this;e&&this.$nextTick((function(){t.init()}))}},mounted:function(){},methods:{init:function(){var e=this;if(this.nc)this.nc.reload();else{var t=[this.appkey,(new Date).getTime(),Math.random()].join(":"),n="zh"===this.lang?"cn":"ko"===this.lang?"ko_KR":this.lang,s={renderTo:"#".concat(this.id),appkey:this.appkey,scene:this.scene,token:t,customWidth:this.customWidth,trans:{purpose:"nc_login_pc"},language:n,isEnabled:!0,timeout:3e3,times:5,callback:function(t){e.visible=!1,e.$emit("on-success",t)}};this.nc=new noCaptcha(s),this.nc.upLang("cn",{_startTEXT:"请按住滑块，拖动到最右边",_yesTEXT:"验证通过",_error300:"哎呀，出错了，点击<a href='javascript:__nc.reset()'>刷新</a>再来一次",_errorNetwork:"网络不给力，请<a href='javascript:__nc.reset()'>点击刷新</a>"})}},reload:function(){this.nc.reload()},hide:function(){this.visible=!1},show:function(){this.visible=!0}}},c=n("KHd+"),l=Object(c.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"captcha-dialog",attrs:{title:e.$t("common.sliding_verification"),visible:e.visible,width:"400px"},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"nc-container",attrs:{id:e.id}})])}),[],!1,null,"226af3d4",null);t.a=l.exports},a6UJ:function(e,t,n){"use strict";n.r(t);var s=n("vKDJ"),i={name:"ResetLoginPasswd",components:{Captcha:n("Rc4f").a},data:function(){return{captchaObj:null,sent:!1,resetForm:{username:"",verifyCode:"",nc_sessionId:"",nc_sig:"",nc_token:"",nc_scene:"nc_other",isNcVerify:!0},sendCountDown:0}},computed:{rules:function(){return{username:[{required:!0,message:this.$t("login.please_input_the_email_phone_address"),trigger:"blur"}],verifyCode:[{required:!0,message:this.$t("login.enter_verification_code"),trigger:"blur"}]}},sendBtnText:function(){return 0===this.sendCountDown?this.$t("common.send_code"):this.sendCountDown+"S"}},mounted:function(){},methods:{resetPasswd:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.sendResetPasswdEmailOrSms()}))},handleSuccessCaptcha:function(e){this.resetForm.nc_sessionId=e.csessionid,this.resetForm.nc_sig=e.sig,this.resetForm.nc_token=e.token,this.sendResetPasswdEmailOrSms()},sendResetPasswdEmailOrSms:function(){var e=this;s.a.sendResetPasswdEmailOrSms(this.resetForm).then((function(){e.sendCountDown=60,e.countDown()})).catch((function(t){e.sendCountDown=0}))},sendValidCode:function(){this.resetForm.username?C.Utils.isEmail(this.resetForm.username)||/[0-9]+/.test(this.resetForm.username)?this.$refs.captcha.show():this.$message.warning(this.$t("login.please_input_the_correct_email_mobile")):this.$message.warning(this.$t("login.please_input_the_email_phone_address"))},countDown:function(){this.sendCountDown=this.sendCountDown-1,this.sendCountDown>0?setTimeout(this.countDown,1e3):this.sendCountDown=0},resetNext:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;s.a.resetPasswdCheck(t.resetForm.verifyCode,t.resetForm.username).then((function(e){t.$router.push("/validateToken/b/"+e)}))}))}}},r=n("KHd+"),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-card",{staticClass:"reset"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("login.retrieve_password"))+"\n      ")])]),e._v(" "),e.sent?e._e():n("div",{staticStyle:{width:"300px",margin:"10px auto"}},[n("div",[n("el-form",{ref:"resetForm",attrs:{"hide-required-asterisk":!0,"status-icon":!1,model:e.resetForm,rules:e.rules}},[n("el-form-item",{attrs:{prop:"username",label:e.$t("login.emailOrPhone")}},[n("el-input",{ref:"username",attrs:{"auto-complete":"false",placeholder:e.$t("login.emailOrPhone")},model:{value:e.resetForm.username,callback:function(t){e.$set(e.resetForm,"username",t)},expression:"resetForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"verifyCode",label:e.$t("login.code")}},[n("el-input",{ref:"verifyCode",attrs:{type:"text","auto-complete":"false",placeholder:e.$t("login.code")},model:{value:e.resetForm.verifyCode,callback:function(t){e.$set(e.resetForm,"verifyCode",t)},expression:"resetForm.verifyCode"}},[n("el-button",{staticClass:"send-btn",attrs:{slot:"append",type:"plan",disabled:e.sendCountDown>0},on:{click:e.sendValidCode},slot:"append"},[e._v("\n                "+e._s(e.sendBtnText)+"\n              ")])],1)],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:function(t){return e.resetNext("resetForm")}}},[e._v("\n              "+e._s(e.$t("login.reset_next"))+"\n            ")])],1)],1)],1)])]),e._v(" "),n("captcha",{ref:"captcha",on:{"on-success":e.handleSuccessCaptcha}})],1)}),[],!1,null,"619cc7b9",null);t.default=o.exports}}]);