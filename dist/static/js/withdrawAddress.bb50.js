(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{OpSI:function(e,t,r){"use strict";r.r(t);var a=r("cDf5"),s=r.n(a),i=r("lSNA"),d=r.n(i),o=r("vKDJ"),n=r("L2JU");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"WithdrawAddress",data:function(){return{assetCodes:[],withdrawForm:{assetCode:"",addressName:"",addressTag:"",address:"",chainId:""},urlNameData:[],verificationForm:{assetCode:"",addressName:"",addressTag:"",address:"",chainId:"",verificationCode:""},withdrawAddressRecord:[],verificationFormVisible:!1,verificationType:"",sendCountDown:0,verificationBtnDisabled:!1,asset:[],verificationAsset:[],loading:!1,rowId:0}},computed:c(c({},Object(n.d)(["userInfo"])),{},{sendBtnText:function(){return 0===this.sendCountDown?this.$t("common.send_code"):this.sendCountDown+"S"},withdrawFormRules:function(){return{assetCode:[{required:!0,message:this.$t("user.withdrawaddress.please_select_currency"),trigger:"change"}]}},verificationFormRules:function(){return{assetCode:[{required:!0,message:this.$t("user.withdrawaddress.please_select_currency"),trigger:"change"}],address:[{required:!0,message:this.$t("user.withdrawaddress.please_enter_withdraw_address"),trigger:"blur"}],verificationCode:[{required:!0,message:this.$t("user.withdrawaddress.please_enter_email_code"),trigger:"blur"}],chainId:[{required:!0,message:this.$t("user.withdrawaddress.please_enter_email_code"),trigger:"blur"}],addressTag:[{required:!0,message:this.$t("user.withdrawaddress.please_enter")+this.verificationAsset.tagDisplayName,trigger:"blur"}],addressName:[{required:!0,message:this.$t("user.withdrawaddress.please_enter_remark"),trigger:"blur"}]}}}),watch:{"withdrawForm.assetCode":function(){void 0!==this.withdrawForm.assetCode&&""!==this.withdrawForm.assetCode||(this.asset=[])},"verificationForm.assetCode":function(){var e=this;void 0!==this.verificationForm.assetCode&&""!==this.verificationForm.assetCode&&o.a.getWithdrawConfig({assetCode:this.verificationForm.assetCode}).then((function(t){e.verificationAsset=t}))}},created:function(){var e=this;o.a.getAssets().then((function(t){e.assetCodes=t})),this.$store.dispatch("getUserInfo")},mounted:function(){this.searchWithdrawAddress()},methods:{handleSwitchSelect:function(e){var t=this;Number.isNaN(Number(e))&&"string"===s()(e).toLowerCase()&&(this.withdrawForm.chainId=""),s()(e).toLowerCase(),o.a.getWithdrawConfig({assetCode:this.withdrawForm.assetCode,chainId:this.withdrawForm.chainId||null}).then((function(e){t.asset=e})),o.a.geturlName({assetCode:this.withdrawForm.assetCode,chainId:this.withdrawForm.chainId||null}).then((function(e){t.withdrawForm.chainId||(t.withdrawForm.chainId=e[0].chainId),t.urlNameData=e}))},searchWithdrawAddress:function(){var e=this;this.loading=!0,o.a.getWithdrawAddress().then((function(t){e.withdrawAddressRecord=t})).finally((function(){e.loading=!1}))},createAddress:function(e){var t=this;this.userInfo.email?this.$refs[e].validate((function(e){if(!e)return!1;0!==t.withdrawForm.chainId.length?0!==t.withdrawForm.address.length?0!==t.withdrawForm.addressName.length?!t.asset.addressWithTag||t.asset.tagOptional||0!==t.withdrawForm.addressTag.length?(t.verificationType="create",t.verificationFormVisible=!0,t.verificationForm={}):t.$message({type:"error",message:t.$t("user.withdrawaddress.please_enter")+t.asset.tagDisplayName}):t.$message({type:"error",message:t.$t("user.withdrawaddress.please_enter_remark")}):t.$message({type:"error",message:t.$t("user.withdrawaddress.please_enter_withdraw_address")}):t.$message({type:"error",message:t.$t("user.withdrawaddress.please_enter_chainId")})})):this.$confirm(this.$t("my_assets.bind_email_msg"),this.$t("my_assets.prompt"),{confirmButtonText:this.$t("my_assets.bind_email"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){t.$router.push("/userCenter/emailVerified")}))},deleteWithdrawAddress:function(e){this.verificationType="delete",this.verificationFormVisible=!0,this.rowId=e.id},sendVerificationCode:function(){var e=this;e.sendCountDown=60,e.countDown(),o.a.sendEmailCode().then((function(e){})).catch((function(t){e.sendEmailCountDown=0}))},countDown:function(){this.sendCountDown>0&&(this.sendCountDown=this.sendCountDown-1,setTimeout(this.countDown,1e3))},confirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=t;if(t.verificationBtnDisabled=!0,"create"===t.verificationType){var a={addressName:t.withdrawForm.addressName,assetCode:t.withdrawForm.assetCode,address:t.withdrawForm.address,addressTag:t.withdrawForm.addressTag,chainId:t.withdrawForm.chainId,verificationCode:t.verificationForm.verificationCode};o.a.createWithdrawAddress(a).then((function(e){r.$message({type:"success",message:r.$t("user.withdrawaddress.add_successfully")}),r.changeDialogStatusAndSearch()})).catch((function(e){})).finally((function(){r.verificationBtnDisabled=!1}))}else"delete"===t.verificationType&&o.a.deleteWithdrawAddress(t.rowId,t.verificationForm.verificationCode).then((function(e){r.$message({type:"success",message:r.$t("user.withdrawaddress.delete_successfully")}),r.changeDialogStatusAndSearch()})).finally((function(){r.verificationBtnDisabled=!1}))}))},changeDialogStatusAndSearch:function(){this.verificationType="",this.sendCountDown=0,this.verificationFormVisible=!1,this.$refs.verificationForm.resetFields(),this.$refs.withdrawForm.resetFields(),this.withdrawForm.address="",this.withdrawForm.addressName="",this.withdrawForm.addressTag="",this.searchWithdrawAddress()}}},w=r("KHd+"),m=Object(w.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"uc-content"},[r("div",{staticClass:"uc-content-header",attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$t("user.withdraw_address"))+"\n    ")]),e._v(" "),r("div",{staticStyle:{margin:"auto",padding:"0 20px"}},[r("el-form",{ref:"withdrawForm",staticStyle:{width:"100%"},attrs:{"hide-required-asterisk":!0,"status-icon":!1,model:e.withdrawForm,rules:e.withdrawFormRules}},[r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{staticStyle:{width:"122px","margin-right":"14px"},attrs:{label:e.$t("user.withdrawaddress.currency"),prop:"assetCode"}},[r("el-select",{attrs:{prop:"assetCode",filterable:""},on:{change:e.handleSwitchSelect},model:{value:e.withdrawForm.assetCode,callback:function(t){e.$set(e.withdrawForm,"assetCode",t)},expression:"withdrawForm.assetCode"}},e._l(e.assetCodes,(function(e){return r("el-option",{key:e.assetCode,attrs:{label:e.assetCode,value:e.assetCode}})})),1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"122px","margin-right":"14px"},attrs:{label:e.$t("user.withdrawaddress.urlName"),prop:"chainId"}},[r("el-select",{attrs:{prop:"urlName"},on:{change:e.handleSwitchSelect},model:{value:e.withdrawForm.chainId,callback:function(t){e.$set(e.withdrawForm,"chainId",t)},expression:"withdrawForm.chainId"}},e._l(e.urlNameData,(function(e){return r("el-option",{key:e.chainId,attrs:{label:e.chainName,value:e.chainId}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.withdrawaddress.address")}},[r("el-input",{staticStyle:{width:"366px","margin-right":"14px"},attrs:{type:"text"},model:{value:e.withdrawForm.address,callback:function(t){e.$set(e.withdrawForm,"address",t)},expression:"withdrawForm.address"}})],1),e._v(" "),e.asset.addressWithTag?r("el-form-item",{attrs:{label:e.asset.tagDisplayName||e.$t("my_assets.remark_tag")}},[r("el-input",{staticStyle:{width:"220px","margin-right":"14px"},attrs:{type:"text"},model:{value:e.withdrawForm.addressTag,callback:function(t){e.$set(e.withdrawForm,"addressTag",t)},expression:"withdrawForm.addressTag"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.withdrawaddress.remark")}},[r("el-input",{staticStyle:{width:"260px"},attrs:{type:"text"},model:{value:e.withdrawForm.addressName,callback:function(t){e.$set(e.withdrawForm,"addressName",t)},expression:"withdrawForm.addressName"}})],1)],1),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createAddress("withdrawForm")}}},[e._v("\n            "+e._s(e.$t("user.withdrawaddress.add"))+"\n          ")])],1)],1),e._v(" "),r("el-divider",{attrs:{"content-position":"left"}},[e._v("\n        "+e._s(e.$t("user.withdrawaddress.my_withdraw_address"))+"\n      ")]),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"1100px",margin:"10px auto"},attrs:{data:e.withdrawAddressRecord}},[r("el-table-column",{attrs:{prop:"assetCode",label:e.$t("user.withdrawaddress.currency"),width:"100px",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"address","min-width":"200px",label:e.$t("user.withdrawaddress.address")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("\n              "+e._s(t.row.address)+"\n              "),t.row.addressTag?r("span",[e._v("("+e._s(t.row.tagDisplayName)),t.row.tagDisplayName?r("span",[e._v(": ")]):e._e(),e._v(e._s(t.row.addressTag)+")")]):e._e()])]}}])}),e._v(" "),r("el-table-column",{attrs:{"header-align":"left",align:"left",prop:"addressName",label:e.$t("user.withdrawaddress.remark")}}),e._v(" "),r("el-table-column",{attrs:{"header-align":"right",align:"right",prop:"action",label:e.$t("trade.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.deleteWithdrawAddress(t.row)}}},[e._v("\n              "+e._s(e.$t("user.withdrawaddress.delete"))+"\n            ")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.verificationFormVisible,title:e.$t("user.withdrawaddress.security_verification"),width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.verificationFormVisible=t}}},[r("el-form",{ref:"verificationForm",staticStyle:{width:"400px"},attrs:{"hide-required-asterisk":!0,model:e.verificationForm,rules:e.verificationFormRules,"status-icon":!1}},["update"==e.verificationType?r("div",[r("div",{staticStyle:{display:"flex"}},[r("el-form-item",{staticStyle:{width:"122px","margin-right":"14px"},attrs:{label:e.$t("user.withdrawaddress.currency"),prop:"assetCode"}},[r("el-select",{attrs:{prop:"assetCode"},model:{value:e.withdrawForm.assetCode,callback:function(t){e.$set(e.withdrawForm,"assetCode",t)},expression:"withdrawForm.assetCode"}},e._l(e.assetCodes,(function(e){return r("el-option",{key:e.assetCode,attrs:{label:e.assetCode,value:e.assetCode}})})),1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"122px","margin-right":"14px"},attrs:{label:e.$t("user.withdrawaddress.urlName"),prop:"chainId"}},[r("el-select",{attrs:{prop:"urlName"},model:{value:e.withdrawForm.chainId,callback:function(t){e.$set(e.withdrawForm,"chainId",t)},expression:"withdrawForm.chainId"}},e._l(e.urlNameData,(function(e){return r("el-option",{key:e.chainId,attrs:{label:e.chainName,value:e.chainId}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.withdrawaddress.address")}},[r("el-input",{staticStyle:{width:"366px","margin-right":"14px"},attrs:{type:"text"},model:{value:e.withdrawForm.address,callback:function(t){e.$set(e.withdrawForm,"address",t)},expression:"withdrawForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.withdrawaddress.remark")}},[r("el-input",{staticStyle:{width:"260px","margin-right":"14px"},attrs:{type:"text"},model:{value:e.withdrawForm.addressName,callback:function(t){e.$set(e.withdrawForm,"addressName",t)},expression:"withdrawForm.addressName"}})],1),e._v(" "),e.asset.addressWithTag?r("el-form-item",{attrs:{label:e.asset.tagDisplayName||"-"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{type:"text"},model:{value:e.withdrawForm.addressTag,callback:function(t){e.$set(e.withdrawForm,"addressTag",t)},expression:"withdrawForm.addressTag"}})],1):e._e()],1)]):e._e(),e._v(" "),r("el-form-item",{staticClass:"btnDisabled",attrs:{label:e.$t("common.email_code"),prop:"verificationCode"}},[r("el-input",{attrs:{type:"text"},model:{value:e.verificationForm.verificationCode,callback:function(t){e.$set(e.verificationForm,"verificationCode",t)},expression:"verificationForm.verificationCode"}},[r("el-button",{attrs:{slot:"append",disabled:e.sendCountDown>0},on:{click:e.sendVerificationCode},slot:"append"},[e._v("\n              "+e._s(e.sendBtnText)+"\n            ")])],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:e.verificationBtnDisabled},on:{click:function(t){return e.confirm("verificationForm")}}},[e._v("\n          "+e._s(e.$t("common.confirm"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"2c04c5e0",null);t.default=m.exports}}]);