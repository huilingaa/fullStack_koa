(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"h+rf":function(e,o,s){"use strict";s.r(o);var n=s("lSNA"),t=s.n(n),r=s("vKDJ"),i=s("L2JU");function a(e,o){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?a(Object(s),!0).forEach((function(o){t()(e,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(s,o))}))}return e}var l={name:"ModifyLoginPassword",data:function(){return{isBtnDisabled:!1,loginPwdForm:{oldPassword:"",newPassword:"",confirmPassword:"",phoneCode:"",emailCode:""},sendEmailCountDown:0,sendSmsCountDown:0}},computed:d(d({},Object(i.d)(["userInfo"])),{},{sendEmailBtnText:function(){return 0===this.sendEmailCountDown?this.$t("common.send_code"):this.sendEmailCountDown+"S"},sendSMSBtnText:function(){return 0===this.sendSmsCountDown?this.$t("common.send_code"):this.sendSmsCountDown+"S"},loginPwdFormRules:function(){var e=this;return{oldPassword:[{required:!0,message:this.$t("user.loginpassword.please_enter_old_password"),trigger:"blur"}],newPassword:[{required:!0,message:this.$t("user.loginpassword.please_enter_new_password"),trigger:"blur"}],emailCode:[{required:!0,message:this.$t("user.loginpassword.please_enter_email_code"),trigger:"blur"}],phoneCode:[{required:!0,message:this.$t("user.googleauthentication.please_enter_sms_code"),trigger:"blur"}],confirmPassword:[{required:!0,message:this.$t("user.loginpassword.please_enter_confirm_new_password"),trigger:"blur"},{validator:function(o,s,n){s!==e.loginPwdForm.newPassword?n(new Error(e.$t("user.loginpassword.inconsistent_password"))):n()},trigger:"blur"}]}}}),methods:{savePassword:function(e){var o=this;this.$refs[e].validate((function(e){if(!e)return!1;o.isBtnDisabled=!0,r.a.modifyPassword({currentPassword:o.loginPwdForm.oldPassword,newPassword:o.loginPwdForm.newPassword,phoneVerificationCode:o.loginPwdForm.phoneCode,emailVerificationCode:o.loginPwdForm.emailCode}).then((function(){o.$message({type:"success",message:o.$t("user.loginpassword.modify_successfully")}),o.$router.back()})).finally((function(){o.isBtnDisabled=!1}))}))},sendEmail:function(){var e=this;r.a.sendEmailCode().then((function(){e.sendEmailCountDown=60,e.countEmailDown()})).catch((function(o){e.sendEmailCountDown=0}))},countEmailDown:function(){this.sendEmailCountDown>0&&(this.sendEmailCountDown=this.sendEmailCountDown-1,setTimeout(this.countEmailDown,1e3))},sendSMS:function(){var e=this;r.a.sendSms4ModifyLoginPass().then((function(){e.sendSmsCountDown=60,e.countSmsDown()})).catch((function(o){e.sendSmsCountDown=0}))},countSmsDown:function(){this.sendSmsCountDown>0&&(this.sendSmsCountDown=this.sendSmsCountDown-1,setTimeout(this.countSmsDown,1e3))}}},u=s("KHd+"),m=Object(u.a)(l,(function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",[s("el-card",{staticClass:"uc-content"},[s("div",{staticClass:"uc-content-header",attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$t("common.login_password"))+"\n    ")]),e._v(" "),s("div",{staticStyle:{margin:"20px auto",width:"500px"}},[s("el-form",{ref:"loginPwdForm",attrs:{"hide-required-asterisk":!0,rules:e.loginPwdFormRules,model:e.loginPwdForm}},[s("el-form-item",{attrs:{label:e.$t("user.loginpassword.old_password"),prop:"oldPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.loginPwdForm.oldPassword,callback:function(o){e.$set(e.loginPwdForm,"oldPassword",o)},expression:"loginPwdForm.oldPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("user.loginpassword.new_password"),prop:"newPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.loginPwdForm.newPassword,callback:function(o){e.$set(e.loginPwdForm,"newPassword",o)},expression:"loginPwdForm.newPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("user.loginpassword.confirm_new_password"),prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.loginPwdForm.confirmPassword,callback:function(o){e.$set(e.loginPwdForm,"confirmPassword",o)},expression:"loginPwdForm.confirmPassword"}})],1),e._v(" "),e.userInfo.smsAuthActive?s("el-form-item",{staticClass:"btnDisabled",attrs:{label:e.$t("user.smsauthentication.sms_code"),prop:"phoneCode"}},[s("el-input",{attrs:{type:"text"},model:{value:e.loginPwdForm.phoneCode,callback:function(o){e.$set(e.loginPwdForm,"phoneCode",o)},expression:"loginPwdForm.phoneCode"}},[s("el-button",{staticClass:"send-btn",attrs:{slot:"append",type:"plan",disabled:e.sendSmsCountDown>0},on:{click:e.sendSMS},slot:"append"},[e._v("\n              "+e._s(e.sendSMSBtnText)+"\n            ")])],1)],1):e._e(),e._v(" "),e.userInfo.email?s("el-form-item",{staticClass:"btnDisabled",attrs:{label:e.$t("common.email_code"),prop:"emailCode"}},[s("el-input",{attrs:{type:"text"},model:{value:e.loginPwdForm.emailCode,callback:function(o){e.$set(e.loginPwdForm,"emailCode",o)},expression:"loginPwdForm.emailCode"}},[s("el-button",{staticClass:"send-btn",attrs:{slot:"append",type:"plan",disabled:e.sendEmailCountDown>0},on:{click:e.sendEmail},slot:"append"},[e._v("\n              "+e._s(e.sendEmailBtnText)+"\n            ")])],1)],1):e._e(),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",disabled:e.isBtnDisabled},on:{click:function(o){return e.savePassword("loginPwdForm")}}},[e._v("\n            "+e._s(e.$t("user.loginpassword.save"))+"\n          ")])],1)],1)],1)])],1)}),[],!1,null,"2cbbcebd",null);o.default=m.exports}}]);