(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{O4KQ:function(e,t,s){"use strict";s.r(t);var r=s("vKDJ"),o={name:"ValidateToken",components:{},data:function(){return{type:null,token:"",resetForm:{newPassword:"",confirmPassword:""}}},computed:{resetFormRule:function(){var e=this;return{newPassword:[{required:!0,message:this.$t("login.please_enter_your_password"),trigger:"blur"},{validator:function(t,s,r){/^(?=.*\D)(?!.*\s).{8,20}$/.test(s)?r():r(new Error(e.$t("login.password_regexp")))},trigger:"blur"}],confirmPassword:[{required:!0,message:this.$t("login.enter_the_new_password_again"),trigger:"blur"},{validator:function(t,s,r){s!==e.resetForm.newPassword?r(new Error(e.$t("login.inconsistent_password"))):r()},trigger:"blur"}]}}},mounted:function(){var e=this.$route.params;"a"===e.type?(this.validateActivationToken(e.token),this.type="a"):"b"===e.type&&(this.type="b",this.token=e.token)},methods:{validateActivationToken:function(e){var t=this;r.a.activate(e).then((function(e){t.$message({type:"success",message:t.$t("login.register_activate_succ")}),t.$router.replace("/login")})).catch((function(e){t.$message({type:"error",message:t.$t("login.register_activate_fail")})}))},validateResetPasswdToken:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var s=t;r.a.resetPasswd(s.token,s.resetForm.newPassword).then((function(e){s.$message({type:"success",message:s.$t("login.reset_password_succeeded")}),s.$router.replace("/login")})).catch((function(e){s.$message({type:"error",message:s.$t("login.reset_password_fail")})}))}))}}},a=s("KHd+"),n=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return"b"===e.type?s("el-main",[s("el-card",{staticClass:"validate"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("login.set_new_password"))+"\n      ")])]),e._v(" "),s("div",{staticStyle:{width:"300px",margin:"auto"}},[s("el-form",{ref:"resetForm",attrs:{model:e.resetForm,rules:e.resetFormRule,"hide-required-asterisk":!0,"status-icon":""}},[s("el-form-item",{attrs:{label:e.$t("login.new_password"),prop:"newPassword"}},[s("el-input",{ref:"newPassword",attrs:{type:"password"},model:{value:e.resetForm.newPassword,callback:function(t){e.$set(e.resetForm,"newPassword",t)},expression:"resetForm.newPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("login.comfirm_password"),prop:"confirmPassword"}},[s("el-input",{ref:"confirmPassword",attrs:{type:"password"},model:{value:e.resetForm.confirmPassword,callback:function(t){e.$set(e.resetForm,"confirmPassword",t)},expression:"resetForm.confirmPassword"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:function(t){return e.validateResetPasswdToken("resetForm")}}},[e._v("\n            "+e._s(e.$t("login.submit"))+"\n          ")])],1)],1)],1)])],1):e._e()}),[],!1,null,"65a6c5d2",null);t.default=n.exports}}]);