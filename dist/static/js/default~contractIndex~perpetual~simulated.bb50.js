(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1Vc5":function(t,e,s){"use strict";var i=s("o0o1"),n=s.n(i),r=s("yXPU"),a=s.n(r),o=s("lSNA"),c=s.n(o),l=s("vKDJ"),u=s("L2JU"),p=s("s1fJ");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={name:"CurrentPosition",props:{codeType:{type:[String,Number],default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},isShow:{type:Boolean,default:!0}},data:function(){return{list:[],loading:!1,dialogAssetVisible:!1,dialogAmountVisible:!1,dialogCloseVisible:!1,dialogCloseAssureVisible:!1,dialogOpenAssureVisible:!1,assetType:"add",amountType:"price",assetForm:{amount:"",symbol:"",assureAsset:"",assureQuantity:"",openAssureQuantity:""},assetRules:{amount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.margin_amount"),trigger:"blur"}]},amountForm:{stopProfitPrice:"",stopLossPrice:"",assureAsset:""},defaultStopProfitPrice:"",defaultStopLossPrice:"",strongBalance:"--",priceDecimal:"",quantityDecimal:"",symbolLastPrices:{},timer:null}},computed:m(m({},Object(u.d)(["lang","token","contractAccounts","detailedProductList","authKey","marginAssetListMap"])),{},{assetActive:function(){return this.assetForm.amount},addAssureQuantity:function(){var t=this;return Math.min((this.detailedProductList.find((function(e){return e.symbol===t.assetForm.symbol&&e.marginAsset===t.assetForm.assureAsset}))||{}).maxMargin-this.assetForm.assureQuantity,this.assetForm.availableBalance)},decreaseAssureQuantity:function(){return this.assetForm.assureQuantity-this.assetForm.openAssureQuantity}}),watch:{amountType:function(){this.amountForm.stopProfitPrice=parseFloat(this.amountForm.stopProfitPrice)||"",this.amountForm.stopLossPrice=parseFloat(this.amountForm.stopLossPrice)||""},isShow:function(){this.token&&this.getValidOrdersByUserId()},symbol:function(){this.token&&this.getValidOrdersByUserId()},"assetForm.amount":function(t){if(!t)return"--";"add"===this.assetType?"long"===this.assetForm.buySide?this.strongBalance=this.assetForm.openPrice*(1-.8*(parseFloat(this.assetForm.assureQuantity)+parseFloat(t))/(this.assetForm.openAssureQuantity*this.assetForm.multiple)):this.strongBalance=this.assetForm.openPrice*(1+.8*(parseFloat(this.assetForm.assureQuantity)+parseFloat(t))/(this.assetForm.openAssureQuantity*this.assetForm.multiple)):"long"===this.assetForm.buySide?this.strongBalance=this.assetForm.openPrice*(1-.8*(this.assetForm.assureQuantity-t)/(this.assetForm.openAssureQuantity*this.assetForm.multiple)):this.strongBalance=this.assetForm.openPrice*(1+.8*(this.assetForm.assureQuantity-t)/(this.assetForm.openAssureQuantity*this.assetForm.multiple))},dialogAmountVisible:function(t){t||(this.amountType="price")}},mounted:function(){var t=this;this.token&&(C.Utils.busUser.reconnect(),this.getValidOrdersByUserId()),this.$nextTick((function(){t.getData()})),p.a.$on("contract_price",(function(e){e.forEach((function(e){t.symbolLastPrices[e.symbol]=e.price}))})),p.a.$on("refreshCurrentPosition",(function(){t.getValidOrdersByUserId()}))},destroyed:function(){this.isDestroyed=!0,this.authKey&&(C.Utils.busUser.unsubscribe(["auth",this.authKey],this.processWsMessage),C.Utils.busUser.close())},methods:{getData:function(){var t=this;this.token?this.authKey?C.Utils.busUser.subscribe(["auth",this.authKey],this.processWsMessage):l.a.getWsListenerKey().then((function(e){t.$store.commit("setAuthKey",e),C.Utils.busUser.subscribe(["auth",e],t.processWsMessage)})):this.$refs.table.$el.getElementsByClassName("el-table__empty-text")[0].innerHTML='\n            <a href="/login" style="color:#4A86F8;font-size:14px">'.concat(this.$t("common.login"),'</a><span style="margin: 0 8px">').concat(this.$t("common.or"),'</span><a href="/register"style="color:#4A86F8;font-size:14px;margin-right: 8px" >').concat(this.$t("common.register"),"</a>").concat(this.$t("common.start_trade"),"\n          ")},getValidOrdersByUserId:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(t.timer),e.next=3,l.a.getValidOrdersByUserId({pageNum:1,pageSize:50,codeType:t.codeType,contractType:t.contractType,symbol:t.isShow?t.symbol:""});case 3:if(s=e.sent,t.list=s.list,!t.isDestroyed){e.next=7;break}return e.abrupt("return");case 7:t.setTimeout();case 8:case"end":return e.stop()}}),e)})))()},setTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;this.timer=setTimeout((function(){t.list.forEach((function(e){t.symbolLastPrices[e.symbol]&&("long"===e.buySide?(e.profitQuantity=(t.symbolLastPrices[e.symbol]-e.openPrice)*e.buyQuantity,e.profitRatio=(t.symbolLastPrices[e.symbol]-e.openPrice)/e.openPrice*e.multiple):(e.profitQuantity=(e.openPrice-t.symbolLastPrices[e.symbol])*e.buyQuantity,e.profitRatio=(e.openPrice-t.symbolLastPrices[e.symbol])/e.openPrice*e.multiple))})),t.setTimeout()}),1e3)})),switchAsset:function(t){this.assetType!==t&&(this.assetType=t,this.assetForm.amount="",this.strongBalance="--")},handleAsset:function(t){var e=this;for(var s in t)this.assetForm[s]=t[s];this.assetType="add",this.assetForm.availableBalance=this.getBalance(),this.assetForm.amount="",this.dialogAssetVisible=!0,this.strongBalance="--",this.quantityDecimal=this.detailedProductList.find((function(t){return t.symbol===e.assetForm.symbol&&t.marginAsset===e.assetForm.assureAsset})).quantityDecimal},handleAmount:function(t){var e=this;for(var s in t)this.amountForm[s]=t[s];this.amountType="price",this.dialogAmountVisible=!0,this.defaultStopProfitPrice=this.amountForm.stopProfitPrice=parseFloat(t.stopProfitPrice)||"",this.defaultStopLossPrice=this.amountForm.stopLossPrice=parseFloat(t.stopLossPrice)||"";var i=this.detailedProductList.find((function(t){return t.symbol===e.amountForm.symbol&&t.marginAsset===e.amountForm.assureAsset}));this.priceDecimal=i.priceDecimal,this.quantityDecimal=i.quantityDecimal},handleAdjustMargin:function(){var t=this;0!==parseFloat(this.assetForm.amount)&&this.$refs.assetForm.validate((function(e){e&&l.a.adjustMargin({orderId:t.assetForm.orderId,amount:"add"===t.assetType?t.assetForm.amount:-t.assetForm.amount}).then((function(){t.$message.success("success"),t.dialogAssetVisible=!1,t.getValidOrdersByUserId(),p.a.$emit("available-balance")}))}))},getBalance:function(){var t=this;return(this.contractAccounts.find((function(e){return e.assetCode===t.assetForm.assureAsset}))||{}).availableBalance},handleAllAmount:function(){"add"===this.assetType?this.assetForm.amount=C.Utils.trunc(this.addAssureQuantity||0,this.quantityDecimal):this.assetForm.amount=C.Utils.trunc(this.decreaseAssureQuantity||0,this.quantityDecimal)},configStopProfitAndLoss:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.configStopProfitAndLoss({orderId:t.amountForm.orderId,stopProfitPrice:t.amountForm.stopProfitPrice,stopLossPrice:t.amountForm.stopLossPrice});case 2:t.$message.success("success"),t.dialogAmountVisible=!1,t.getValidOrdersByUserId(),setTimeout((function(){p.a.$emit("available-balance")}),2e3);case 6:case"end":return e.stop()}}),e)})))()},handleClose:function(t){this.orderId=t.orderId,this.dialogCloseVisible=!0},handleSubmitClose:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.handClose({orderId:t.orderId});case 2:p.a.$emit("available-balance"),t.$message.success("success"),t.getValidOrdersByUserId(),t.dialogCloseVisible=!1;case 6:case"end":return e.stop()}}),e)})))()},handInputAmount:function(t){var e=this.marginAssetListMap[this.assetForm.assureAsset||"USDT"];this.assetForm.amount=C.Utils.setNumberDigit(t,e)},handleInputStopProfitPrice:function(t){"price"===this.amountType?this.amountForm.stopProfitPrice=C.Utils.setNumberDigit(t,this.priceDecimal):this.amountForm.stopProfitPrice=C.Utils.setNumberDigit(t,this.quantityDecimal)},handleInputStopLossPrice:function(t){"price"===this.amountType?this.amountForm.stopLossPrice=C.Utils.setNumberDigit(t,this.priceDecimal):this.amountForm.stopLossPrice=C.Utils.setNumberDigit(t,this.quantityDecimal)},processWsMessage:function(t){"leverate_order_event"===t.topic&&this.getValidOrdersByUserId()},renderHeader:function(t){return t("el-tooltip",{props:{effect:"light",placement:"top",content:this.$t("contract.margin_auto_addition_tip"),popperClass:"tooltip-curr-popper"}},[t("span",{style:{paddingBottom:"2px","border-bottom":"1px dashed #4A577F"},class:{autoAssureAsset:!0}},this.$t("contract.margin_auto_addition"))])},handleAutoAppend:function(t){this.autoAppendItem=t,this.isSubmitFailed=!1,t.isAutoAppend?this.dialogOpenAssureVisible=!0:this.dialogCloseAssureVisible=!0},handleCloseAutoAppend:function(t){this[t]=!1,this.isSubmitFailed||(this.autoAppendItem.isAutoAppend=!this.autoAppendItem.isAutoAppend)},handleSubmitAutoAppend:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isSubmitFailed=!1,e.prev=1,e.next=4,l.a.setAutoAppend({isAutoAppend:t.autoAppendItem.isAutoAppend,orderId:t.autoAppendItem.orderId});case 4:t.$message.success("success"),t.dialogCloseAssureVisible=!1,t.dialogOpenAssureVisible=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.isSubmitFailed=!0,t.autoAppendItem.isAutoAppend=!t.autoAppendItem.isAutoAppend;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}},f=s("KHd+"),g=Object(f.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"current-position-container"},[s("el-table",{ref:"table",staticClass:"table-container",class:{"no-login-container":t.token},staticStyle:{width:"100%"},attrs:{size:"small",data:t.list,height:"344px"}},[s("el-table-column",{attrs:{label:t.$t("trade.pair"),"min-width":"100px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("slash")(e.row.symbol))),e.row.couponCode?s("i",{staticClass:"icon-coupon"},[s("span",[t._v("券")])]):t._e()]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureAsset",label:t.$t("contract.margin_type"),"min-width":"80px",align:"left"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.direction"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.buySide,"long")},[t._v(t._s(e.row.sideName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.leverage"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.multiple)+"x\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"openPrice",label:t.$t("contract.open_price"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"marginCallPrice",label:t.$t("contract.mandatory_liquidation_price1"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.income"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.profitQuantity)},[t._v(t._s(t._f("plus")(t._f("round")(e.row.profitQuantity,2,!0))))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.income_rate"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.profitRatio)},[t._v(t._s(t._f("plus")(t._f("round")(100*e.row.profitRatio,2,!0)))+"%")])]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{label:t.$t("contract.open_position_margin"),"min-width":"90px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.openAssureQuantity)+"\n      ")]}}],null,!1,1619656369)}):t._e(),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{label:t.$t("contract.current_position_margin"),"min-width":"90px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.assureQuantity)+"\n      ")]}}],null,!1,3723936645)}):t._e(),t._v(" "),2==t.contractType?s("el-table-column",{attrs:{label:t.$t("my_assets.margin"),"min-width":"90px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.assureQuantity)+"\n      ")]}}],null,!1,3723936645)}):t._e(),t._v(" "),2==t.contractType?s("el-table-column",{attrs:{label:t.$t("contract.open_interest"),"min-width":"90px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.buyQuantity)+"\n      ")]}}],null,!1,1745400648)}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:t.$t("contract.profit_price"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("lineZero")(e.row.stopProfitPrice))+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("contract.loss_price"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("lineZero")(e.row.stopLossPrice))+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"nightCount",label:t.$t("contract.duration"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"nightFeeQuantity",label:t.$t("contract.overnight_charge"),"min-width":"85px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("trunc")(e.row.nightFeeQuantity,2))+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":"130px",align:"left","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{class:e.row.isAutoAppend?"autoAppend-active-switch":"autoAppend-switch",attrs:{"active-color":"#2956AD","inactive-color":"#192B4C"},on:{change:function(s){return t.handleAutoAppend(e.row)}},model:{value:e.row.isAutoAppend,callback:function(s){t.$set(e.row,"isAutoAppend",s)},expression:"scope.row.isAutoAppend"}}),s("span",{staticStyle:{"margin-left":"8px","font-size":"12px"},style:{color:e.row.isAutoAppend?"#DEE2F0":"#4A577F"}},[t._v(t._s(e.row.isAutoAppend?t.$t("common.enable"):t.$t("common.disable")))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.operation"),"min-width":"210px",align:"left",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-btn",on:{click:function(s){return t.handleAsset(e.row)}}},[t._v(t._s(t.$t("contract.increase_reduce_margin")))]),t._v(" "),s("span",{staticClass:"text-btn",on:{click:function(s){return t.handleAmount(e.row)}}},[t._v(t._s(t.$t("contract.profit_loss")))]),t._v(" "),s("span",{staticClass:"text-btn",on:{click:function(s){return t.handleClose(e.row)}}},[t._v(t._s(t.$t("contract.liquidation")))])]}}])})],1),t._v(" "),s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogAssetVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(e){t.dialogAssetVisible=e}}},[s("div",{staticClass:"title-dialog",attrs:{slot:"title"},slot:"title"},[s("span",{class:{active:"add"==t.assetType},on:{click:function(e){return t.switchAsset("add")}}},[t._v(t._s(t.$t("contract.increase_margin")))]),t._v(" "),s("span",{class:{active:"decrease"==t.assetType},on:{click:function(e){return t.switchAsset("decrease")}}},[t._v(t._s(t.$t("contract.reduce_margin")))])]),t._v(" "),s("div",{staticClass:"content-container"},[s("el-form",{ref:"assetForm",attrs:{"status-icon":!1,"hide-required-asterisk":!1,model:t.assetForm,rules:t.assetRules}},[s("el-form-item",{attrs:{prop:"amount"}},[s("el-input",{staticClass:"input-dialog",attrs:{placeholder:t.$t("contract.please_enter")+t.$t("contract.margin_amount")},on:{input:t.handInputAmount},model:{value:t.assetForm.amount,callback:function(e){t.$set(t.assetForm,"amount",e)},expression:"assetForm.amount"}},[s("div",{staticStyle:{height:"46px","line-height":"46px"},attrs:{slot:"suffix"},slot:"suffix"},[s("span",{staticStyle:{"margin-right":"10px",color:"#B0B7CC"}},[t._v(t._s(t.assetForm.assureAsset))]),t._v(" "),s("span",{staticStyle:{color:"#E9EAEF"}},[t._v("|")]),t._v(" "),s("span",{staticStyle:{margin:"0 10px",color:"#4A86F8",cursor:"pointer","user-select":"none"},on:{click:function(e){return e.stopPropagation(),t.handleAllAmount(e)}}},[t._v(t._s(t.$t("index.markets_all")))])])])],1)],1),t._v(" "),s("div",{staticClass:"text"},[s("span",[t._v(t._s(t.$t("index.markets_all"))+"：")]),s("span",[t._v(t._s(t._f("round")(t.assetForm.assureQuantity,t.quantityDecimal))+" "+t._s(t.assetForm.assureAsset))])]),t._v(" "),s("div",{staticClass:"text"},[s("span",[t._v(t._s("add"==t.assetType?t.$t("contract.max_increase"):t.$t("contract.max_reduce"))+"：")]),s("span",[t._v(t._s(t._f("trunc")("add"==t.assetType?t.addAssureQuantity:t.decreaseAssureQuantity,t.quantityDecimal))+" "+t._s(t.assetForm.assureAsset))])]),t._v(" "),s("div",{staticClass:"text"},[s("span",[t._v(t._s("add"==t.assetType?t.$t("contract.after_increase"):t.$t("contract.after_reduction"))+"：")]),s("span",{staticStyle:{color:"#e08105"}},[t._v(t._s(t._f("round")(t.strongBalance,t.quantityDecimal))+" "+t._s(t.assetForm.assureAsset))])]),t._v(" "),s("div",{staticClass:"p-btn"},[s("span",{staticClass:"p-btn-left",on:{click:function(e){t.dialogAssetVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right",class:{active:t.assetActive},on:{click:t.handleAdjustMargin}},[t._v(t._s("add"==t.assetType?t.$t("contract.confirm_increase"):t.$t("contract.confirm_reduce")))])])],1)]),t._v(" "),s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogAmountVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(e){t.dialogAmountVisible=e}}},[s("div",{staticClass:"title-dialog",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"active"},[t._v(t._s(t.$t("contract.price_based")))])]),t._v(" "),s("div",{staticClass:"content-container"},[s("el-form",{attrs:{"status-icon":!1,"hide-required-asterisk":!1,model:t.amountForm,"label-position":"top"}},[s("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{prop:"stopProfitPrice"}},[s("div",{staticStyle:{"font-size":"16px",color:"#9EA4B8","line-height":"1",display:"flex","justify-content":"space-between"}},[s("span",[t._v(t._s(t.$t("contract.profit_price"))+"：")]),t._v(" "),t.defaultStopProfitPrice?s("span",{staticStyle:{"font-size":"14px","font-weight":"400",color:"#E08105"}},[t._v(t._s(t.$t("contract.before_modification"))+"："+t._s(t.defaultStopProfitPrice))]):t._e()]),t._v(" "),s("el-input",{staticClass:"input-dialog",on:{input:t.handleInputStopProfitPrice},model:{value:t.amountForm.stopProfitPrice,callback:function(e){t.$set(t.amountForm,"stopProfitPrice",e)},expression:"amountForm.stopProfitPrice"}},[s("div",{staticStyle:{height:"46px","line-height":"46px","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("\n              USDT\n            ")])])],1),t._v(" "),s("el-form-item",{attrs:{prop:"stopLossPrice"}},[s("div",{staticStyle:{"font-size":"16px",color:"#9EA4B8","line-height":"1",display:"flex","justify-content":"space-between"}},[s("span",[t._v(t._s(t.$t("contract.loss_price"))+"：")]),t._v(" "),t.defaultStopLossPrice?s("span",{staticStyle:{"font-size":"14px","font-weight":"400",color:"#E08105"}},[t._v(t._s(t.$t("contract.before_modification"))+"："+t._s(t.defaultStopLossPrice))]):t._e()]),t._v(" "),s("el-input",{staticClass:"input-dialog",on:{input:t.handleInputStopLossPrice},model:{value:t.amountForm.stopLossPrice,callback:function(e){t.$set(t.amountForm,"stopLossPrice",e)},expression:"amountForm.stopLossPrice"}},[s("div",{staticStyle:{height:"46px","line-height":"46px","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("\n              USDT\n            ")])])],1)],1),t._v(" "),s("div",{staticClass:"p-btn",staticStyle:{"margin-top":"40px"}},[s("span",{staticClass:"p-btn-left",on:{click:function(e){t.dialogAmountVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right active",on:{click:t.configStopProfitAndLoss}},[t._v(t._s(t.$t("common.confirm_1")))])])],1)]),t._v(" "),s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogCloseVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"400px"},on:{"update:visible":function(e){t.dialogCloseVisible=e}}},[s("div",{staticClass:"content-container"},[s("div",{staticStyle:{color:"#1d243e","font-size":"20px","font-weight":"500","margin-top":"30px","text-align":"center"}},[t._v("\n        "+t._s(t.$t("contract.liquidate"))+"\n      ")]),t._v(" "),s("div",{staticStyle:{color:"#1D243E","font-size":"16px","font-weight":"400","margin-top":"20px","text-align":"center"}},[t._v("\n        "+t._s(t.$t("contract.confirm_liquidation"))+"\n      ")]),t._v(" "),s("div",{staticClass:"p-btn min-p-btn",staticStyle:{"margin-top":"40px"}},[s("span",{staticClass:"p-btn-left",on:{click:function(e){t.dialogCloseVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right active",on:{click:t.handleSubmitClose}},[t._v(t._s(t.$t("common.confirm")))])])])]),t._v(" "),s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogCloseAssureVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"400px"},on:{"update:visible":function(e){t.dialogCloseAssureVisible=e}}},[s("div",{staticClass:"content-container"},[s("div",{staticStyle:{width:"330px",color:"#1D243E","font-size":"16px","font-weight":"400","margin-top":"30px","text-align":"center"}},[t._v("\n        "+t._s(t.$t("contract.disable_margin_auto"))+"\n      ")]),t._v(" "),s("div",{staticClass:"p-btn min-p-btn",staticStyle:{"margin-top":"40px"}},[s("span",{staticClass:"p-btn-left",on:{click:function(e){return t.handleCloseAutoAppend("dialogCloseAssureVisible")}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right active",on:{click:t.handleSubmitAutoAppend}},[t._v(t._s(t.$t("common.confirm")))])])])]),t._v(" "),s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogOpenAssureVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"400px"},on:{"update:visible":function(e){t.dialogOpenAssureVisible=e}}},[s("div",{staticClass:"content-container"},[s("div",{staticStyle:{width:"330px",color:"#1d243e","font-size":"20px","font-weight":"500","margin-top":"30px","text-align":"center"}},[t._v("\n        "+t._s(t.$t("contract.enable_margin_auto"))+"\n      ")]),t._v(" "),s("div",{staticStyle:{width:"330px",color:"#1D243E","font-size":"16px","font-weight":"400","margin-top":"20px","line-height":"1.3"}},[t._v("\n        "+t._s(t.$t("contract.enable_margin_auto_tip1"))+"\n      ")]),t._v(" "),s("div",{staticStyle:{width:"330px","font-size":"14px","font-weight":"400",color:"rgba(250,59,59,1)","margin-top":"15px","line-height":"1.3"}},[t._v("\n        "+t._s(t.$t("contract.enable_margin_auto_tip2"))+"\n      ")]),t._v(" "),s("div",{staticClass:"p-btn min-p-btn",staticStyle:{"margin-top":"40px"}},[s("span",{staticClass:"p-btn-left",on:{click:function(e){return t.handleCloseAutoAppend("dialogOpenAssureVisible")}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right active",on:{click:t.handleSubmitAutoAppend}},[t._v(t._s(t.$t("common.confirm")))])])])])],1)}),[],!1,null,"5afb0594",null).exports;function _(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var y={name:"CurrentOrders",props:{codeType:{type:[String,Number],default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},isShow:{type:Boolean,default:!0}},data:function(){return{list:[],authKey:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(u.d)(["lang","token"])),watch:{isShow:function(){this.token&&this.render()},symbol:function(){this.token&&this.render()}},mounted:function(){var t=this;this.token&&(this.render(),C.Utils.busUser.reconnect()),this.$nextTick((function(){t.getData()})),p.a.$on("refreshCurrentOrders",(function(){t.render()}))},destroyed:function(){this.authKey&&(C.Utils.busUser.unsubscribe(["auth",this.authKey],this.processWsMessage),C.Utils.busUser.close())},methods:{getData:function(){var t=this;this.token?this.authKey?C.Utils.busUser.subscribe(["auth",this.authKey],this.processWsMessage):l.a.getWsListenerKey().then((function(e){t.$store.commit("setAuthKey",e),C.Utils.busUser.subscribe(["auth",e],t.processWsMessage)})):this.$refs.table.$el.getElementsByClassName("el-table__empty-text")[0].innerHTML='\n            <a href="/login" style="color:#4A86F8;font-size:14px">'.concat(this.$t("common.login"),'</a><span style="margin: 0 8px">').concat(this.$t("common.or"),'</span><a href="/register"style="color:#4A86F8;font-size:14px;margin-right: 8px" >').concat(this.$t("common.register"),"</a>").concat(this.$t("common.start_trade"),"\n          ")},render:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getValidEntrustOrdersByUserId({pageNum:1,pageSize:50,codeType:t.codeType,contractType:t.contractType,symbol:t.isShow?t.symbol:""});case 2:s=e.sent,t.list=s.list;case 4:case"end":return e.stop()}}),e)})))()},processWsMessage:function(t){"leverate_order_event"===t.topic&&this.render()},handleOpr:function(t){var e=this;return a()(n.a.mark((function s(){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=t.orderId,s.next=3,l.a.cancelEntrust({orderId:i});case 3:p.a.$emit("available-balance"),e.$message.success("success"),e.render();case 6:case"end":return s.stop()}}),s)})))()}}},v=Object(f.a)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{ref:"table",staticClass:"current-orders-container",class:{"no-login-container":t.token},staticStyle:{width:"100%"},attrs:{data:t.list,size:"small",height:"344px"}},[s("el-table-column",{attrs:{prop:"entrustTime",label:t.$t("contract.order_time"),"min-width":"110px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.pair"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("slash")(e.row.symbol))+"\n    ")]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureAsset",label:t.$t("contract.margin_type"),"min-width":"80px",align:"left"}}):t._e(),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"orderTypeName",label:t.$t("order.type"),"min-width":"60px",align:"left"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"buySide",label:t.$t("order.direction"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.buySide,"long")},[t._v(t._s(e.row.sideName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.leverage"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.multiple)+"x\n    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"restrictPrice",label:t.$t("contract.order_price"),"min-width":"70px",align:"left"}}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureQuantity",label:t.$t("contract.order_margin"),"min-width":"80px",align:"left"}}):s("el-table-column",{attrs:{prop:"buyQuantity",label:t.$t("order.entrustment"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("contract.mandatory_liquidation_price1"),"min-width":"60px",align:"left",prop:"marginCallPrice"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.operation"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-btn",on:{click:function(s){return t.handleOpr(e.row)}}},[t._v(t._s(t.$t("common.cancel_1")))])]}}])})],1)}),[],!1,null,"74eb5abb",null).exports;function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var k={name:"OrderHistory",props:{codeType:{type:[String,Number],default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},isShow:{type:Boolean,default:!0}},data:function(){return{list:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(u.d)(["lang","token"])),watch:{isShow:function(){this.token&&this.render()},symbol:function(){this.token&&this.render()}},mounted:function(){var t=this;this.token&&this.render(),this.$nextTick((function(){t.token||(t.$refs.table.$el.getElementsByClassName("el-table__empty-text")[0].innerHTML='\n          <a href="/login" style="color:#4A86F8;font-size:14px">'.concat(t.$t("common.login"),'</a><span style="margin: 0 8px">').concat(t.$t("common.or"),'</span><a href="/register"style="color:#4A86F8;font-size:14px;margin-right: 8px" >').concat(t.$t("common.register"),"</a>").concat(t.$t("common.start_trade"),"\n        "))}))},methods:{render:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getHistoryEntrustOrdersByUserId({pageNum:1,pageSize:1e3,codeType:t.codeType,contractType:t.contractType,symbol:t.isShow?t.symbol:""});case 2:s=e.sent,t.list=s.list;case 4:case"end":return e.stop()}}),e)})))()}}},S=Object(f.a)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{ref:"table",staticClass:"order-history-container",class:{"no-login-container":t.token},staticStyle:{width:"100%"},attrs:{data:t.list,size:"small",height:"344px"}},[s("el-table-column",{attrs:{prop:"entrustTime",label:t.$t("contract.order_time"),"min-width":"110px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.pair"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("slash")(e.row.symbol))+"\n    ")]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureAsset",label:t.$t("contract.margin_type"),"min-width":"80px",align:"left"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"orderTypeName",label:t.$t("order.type"),"min-width":"60px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"buySide",label:t.$t("order.direction"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.buySide,"long")},[t._v(t._s(e.row.sideName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.leverage"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.multiple)+"x\n    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"restrictPrice",label:t.$t("contract.order_price"),"min-width":"70px",align:"left"}}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureQuantity",label:t.$t("contract.order_margin"),"min-width":"80px",align:"left"}}):s("el-table-column",{attrs:{prop:"buyQuantity",label:t.$t("order.entrustment"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("contract.trading_price"),"min-width":"60px",align:"left",prop:"openPrice"}}),t._v(" "),s("el-table-column",{attrs:{prop:"marginCallPrice",label:t.$t("contract.mandatory_liquidation_price1"),"min-width":"60px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"orderStatusName",label:t.$t("common.status"),"min-width":"70px",align:"left"}})],1)}),[],!1,null,"a6396f16",null).exports;function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var x={name:"LiquidateRecords",props:{codeType:{type:[String,Number],default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},isShow:{type:Boolean,default:!0}},data:function(){return{list:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(u.d)(["lang","token"])),watch:{isShow:function(){this.token&&this.render()},symbol:function(){this.token&&this.render()}},mounted:function(){var t=this;this.token&&this.render(),this.$nextTick((function(){t.token||(t.$refs.table.$el.getElementsByClassName("el-table__empty-text")[0].innerHTML='\n          <a href="/login" style="color:#4A86F8;font-size:14px">'.concat(t.$t("common.login"),'</a><span style="margin: 0 8px">').concat(t.$t("common.or"),'</span><a href="/register"style="color:#4A86F8;font-size:14px;margin-right: 8px" >').concat(t.$t("common.register"),"</a>").concat(t.$t("common.start_trade"),"\n        "))}))},methods:{render:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getHistoryOrdersByUserId({pageNum:1,pageSize:30,codeType:t.codeType,contractType:t.contractType,symbol:t.isShow?t.symbol:""});case 2:(s=e.sent).list.forEach((function(t){t.fee=C.Utils.round(parseFloat(t.openFeeQuantity)+parseFloat(t.closeFeeQuantity),9)})),t.list=s.list;case 5:case"end":return e.stop()}}),e)})))()}}},A=Object(f.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{ref:"table",staticClass:"liquidate-records-container",class:{"no-login-container":t.token},staticStyle:{width:"100%"},attrs:{data:t.list,size:"small",height:"344px"}},[s("el-table-column",{attrs:{prop:"closeTimeFormat",label:t.$t("contract.trade_time"),"min-width":"110px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.pair"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("slash")(e.row.symbol))),e.row.couponCode?s("i",{staticClass:"icon-coupon"},[s("span",[t._v("券")])]):t._e()]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureAsset",label:t.$t("contract.margin_type"),"min-width":"80px",align:"left"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"buySide",label:t.$t("order.direction"),"min-width":"90px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.buySide,"long")},[t._v(t._s(e.row.sideName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.leverage"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.multiple)+"x\n    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"openPrice",label:t.$t("contract.open_price"),"min-width":"70px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"profitQuantity",label:t.$t("order.income"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.realProfitQuantity)},[t._v(t._s(t._f("plus")(t._f("round")(e.row.realProfitQuantity))))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.income_rate"),"min-width":"60px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.profitRatio)},[t._v(t._s(t._f("plus")(t._f("round")(100*e.row.profitRatio)))+"%")])]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assureQuantity",label:t.$t("my_assets.margin"),"min-width":"60px",align:"left"}}):s("el-table-column",{attrs:{prop:"buyQuantity",label:t.$t("contract.open_interest"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"closePrice",label:t.$t("contract.liquidation_price1"),"min-width":"70px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"fee",label:t.$t("common.trading_fee"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"nightCount",label:t.$t("contract.duration"),"min-width":"80px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"nightFeeQuantity",label:t.$t("contract.overnight_charge"),"min-width":"60px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{prop:"closeTypeReason",label:t.$t("contract.liquidation_type"),"min-width":"80px",align:"left"}})],1)}),[],!1,null,"02cefd93",null).exports;function P(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var O={name:"TransactionDetail",props:{codeType:{type:[String,Number],default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},isShow:{type:Boolean,default:!0}},data:function(){return{list:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?P(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(u.d)(["lang","token"])),watch:{isShow:function(){this.token&&this.render()},symbol:function(){this.token&&this.render()}},mounted:function(){var t=this;this.token&&this.render(),this.$nextTick((function(){t.token||(t.$refs.table.$el.getElementsByClassName("el-table__empty-text")[0].innerHTML='\n          <a href="/login" style="color:#4A86F8;font-size:14px">'.concat(t.$t("common.login"),'</a><span style="margin: 0 8px">').concat(t.$t("common.or"),'</span><a href="/register"style="color:#4A86F8;font-size:14px;margin-right: 8px" >').concat(t.$t("common.register"),"</a>").concat(t.$t("common.start_trade"),"\n        "))}))},methods:{render:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getAccountUserTxListByModel({pageNum:1,pageSize:30,lang:t.lang,codeType:t.codeType,contractType:t.contractType,symbol:t.isShow?t.symbol:""});case 2:(s=e.sent).list.forEach((function(t){t.fee=parseFloat(t.openFeeQuantity)+parseFloat(t.closeFeeQuantity)+parseFloat(t.nightFeeQuantity)})),t.list=s.list;case 5:case"end":return e.stop()}}),e)})))()}}},T={name:"List",components:{currentPosition:g,currentOrders:v,orderHistory:S,liquidateRecords:A,transactionDetail:Object(f.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{ref:"table",staticClass:"transaction-detail-container",class:{"no-login-container":t.token},staticStyle:{width:"100%"},attrs:{data:t.list,size:"small",height:"344px"}},[s("el-table-column",{attrs:{prop:"transactionTime",label:t.$t("my_assets.history_date"),"min-width":"110px",align:"left"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("trade.pair"),"min-width":"80px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("slash")(e.row.symbol))),e.row.couponCode?s("i",{staticClass:"icon-coupon"},[s("span",[t._v("券")])]):t._e()]}}])}),t._v(" "),2!=t.contractType?s("el-table-column",{attrs:{prop:"assetCode",label:t.$t("contract.margin_type"),"min-width":"80px",align:"left"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:t.$t("contract.transaction_type"),"min-width":"60px",align:"left",prop:"txTypeName"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("order.number"),"min-width":"70px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{style:t._f("color")(e.row.amount)},[t._v(t._s(e.row.amount))])]}}])})],1)}),[],!1,null,"5fd513e8",null).exports},props:{codeType:{type:Number,default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""}},data:function(){return{orderType:"currentPosition",isShow:!0}},methods:{setOrderType:function(t){this.orderType=t,this.isShow=!0}}},F=Object(f.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-container"},[s("header",[s("div",[s("span",{class:{active:"currentPosition"==t.orderType},on:{click:function(e){return t.setOrderType("currentPosition")}}},[t._v(t._s(t.$t("contract.current_position")))]),t._v(" "),s("span",{class:{active:"currentOrders"==t.orderType},on:{click:function(e){return t.setOrderType("currentOrders")}}},[t._v(t._s(t.$t("contract.current_orders")))]),t._v(" "),s("span",{class:{active:"orderHistory"==t.orderType},on:{click:function(e){return t.setOrderType("orderHistory")}}},[t._v(t._s(t.$t("contract.order_history")))]),t._v(" "),s("span",{class:{active:"liquidateRecords"==t.orderType},on:{click:function(e){return t.setOrderType("liquidateRecords")}}},[t._v(t._s(t.$t("contract.liquidate_records")))]),t._v(" "),s("span",{class:{active:"transactionDetail"==t.orderType},on:{click:function(e){return t.setOrderType("transactionDetail")}}},[t._v(t._s(t.$t("contract.transaction_detail")))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"currentPosition"==t.orderType||"currentOrders"==t.orderType,expression:"orderType == 'currentPosition' || orderType == 'currentOrders'"}],staticStyle:{"margin-right":"39px"}},[s("span",{staticStyle:{"margin-right":"12px","font-size":"14px"}},[t._v(t._s(t.$t("trade.hide_other_transaction_pairs")))]),t._v(" "),s("el-switch",{attrs:{"active-color":"#3D7DF7","inactive-color":"#283358"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}})],1)]),t._v(" "),s("div",{staticStyle:{overflow:"auto",position:"absolute",right:"0px",left:"10px"}},[s(t.orderType,{tag:"component",staticClass:"table-list",attrs:{"code-type":t.codeType,"contract-type":t.contractType,"is-show":t.isShow,symbol:t.symbol||t.$route.params.symbol}})],1)])}),[],!1,null,"21537c84",null);e.a=F.exports},"56dg":function(t,e,s){"use strict";var i=s("cDf5"),n=s.n(i),r=s("0JYD"),a=(location.protocol.startsWith("https")?"wss://":"ws://")+location.host+"/ws/kline-ws/kline",o=null,c={},l={};c.subscribe=function(t,e){o||((o=new r.a(a)).addEventListener("open",(function(){for(var t in l)if(l.hasOwnProperty(t)){var e=t.split("#");o.send(JSON.stringify({cmd:"sub",args:e}))}})),o.addEventListener("message",(function(t){try{var e=function(){var e=JSON.parse(t.data);if("pong"===e.type)return o.send(JSON.stringify({ping:Date.now()})),{v:void 0};for(var s in l)l.hasOwnProperty(s)&&l[s].forEach((function(t){t(e)}))}();if("object"===n()(e))return e.v}catch(t){}})));var s=t.join("#");l.hasOwnProperty(s)||(l[s]=[]);var i=l[s];i.indexOf(e)>-1||(i.push(e),o.readyState===o.OPEN&&("period"===t[0]?o.send(JSON.stringify({cmd:"period",args:t.slice(1)})):o.send(JSON.stringify({cmd:"sub",args:t}))))},c.unsubscribe=function(t,e){var s=t.join("#");l.hasOwnProperty(s)||(l[s]=[]);var i=l[s];if(i.indexOf(e)>-1){var n=i.indexOf(e);if(i.splice(n,1),0===i.length){for(var r in l)r.indexOf("period#"+s)>-1&&delete l[r];o.send(JSON.stringify({cmd:"unsub",args:t}))}l[s]=i}},c.unauth=function(t){var e=t.join("#");l.hasOwnProperty(e)&&delete l[e]},e.a=c},"8s5M":function(t,e){t.exports="data:image/png;base64,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"},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},GO2d:function(t,e,s){"use strict";var i=s("o0o1"),n=s.n(i),r=s("yXPU"),a=s.n(r),o=s("RIqP"),c=s.n(o),l=s("lSNA"),u=s.n(l),p=s("56dg"),d=s("vKDJ"),m=s("L2JU"),h=s("s1fJ");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var g={name:"VAside",props:{codeType:{type:[String,Number],default:1},contractType:{type:[String,Number],default:1}},data:function(){return{symbolList:[],currentSymbol:"",latestPrice:"",dialogProtocolVisible:!1,checkedProtocol:!1,priceDecimalMap:{},dialogVisible:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){u()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(m.d)(["lang","token","userInfo","briefProductList","detailedProductList"])),watch:{briefProductList:{handler:function(t){var e=this;if(t.length>0){var s=c()(t);s.forEach((function(t){t.price=0,t.changePercent=0})),this.symbolList=s,this.detailedProductList.map((function(t){e.priceDecimalMap[t.symbol]||(e.priceDecimalMap[t.symbol]=t.priceDecimal)})),this.$emit("setCurrentSymbol",s[0].symbol),p.a.subscribe(["all_price"],this.render)}},deep:!0},userInfo:{handler:function(t){this.token&&!t.isOpen?this.dialogProtocolVisible=!0:this.dialogProtocolVisible=!1},deep:!0},$route:{handler:function(t){this.currentSymbol=t.params.symbol},deep:!0}},mounted:function(){this.currentSymbol=this.$route.params.symbol,this.token&&!this.userInfo.isOpen&&(this.dialogProtocolVisible=!0)},beforeDestroy:function(){p.a.unsubscribe(["all_price"],this.render)},methods:{render:function(t){if(t){if(t.prices){for(var e=0;e<t.prices.length;e++)for(var s=0;s<this.symbolList.length;s++)t.prices[e].symbol===this.symbolList[s].symbol&&(this.$set(this.symbolList[s],"price",C.Utils.round(t.prices[e].price,this.priceDecimalMap[t.prices[e].symbol],!0)),this.$set(this.symbolList[s],"changePercent",t.prices[e].changePercent));this.latestPrice=this.symbolList[0].price||""}else if("price"===t.type){for(var i=0;i<this.symbolList.length;i++)if(this.symbolList[i].symbol===t.symbol){this.$set(this.symbolList,i,{symbol:this.symbolList[i].symbol,price:C.Utils.round(t.price,this.priceDecimalMap[t.symbol],!0),changePercent:t.changePercent});break}this.currentSymbol===t.symbol&&(this.latestPrice=t.price)}if(h.a.$emit("contract_price",this.symbolList),this.currentSymbol===t.symbol){var n=C.Utils.round(this.latestPrice,this.priceDecimalMap[this.currentSymbol],!0);document.title=n+" | "+this.currentSymbol.replace("_","/")+" - "+C.Utils.getContractName(this.codeType)(this.$t("seo.title.contract"),this.$t("seo.title.perpetual"),this.$t("seo.title.simulated"))}}else this.latestPrice=""},changeSymbol:function(t){this.$emit("on-click",t)},handleNoTrade:function(){this.$router.push("/index")},handleTrade:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkedProtocol){e.next=3;break}return t.$message({message:t.$t("contract.tick_relevant_agreement"),type:"warning"}),e.abrupt("return");case 3:return e.next=5,d.a.openContract();case 5:t.dialogProtocolVisible=!1,t.dialogVisible=!0,t.$store.commit("_setUserInfo",{isOpen:!0});case 8:case"end":return e.stop()}}),e)})))()},handleSimulated:function(){this.dialogVisible=!1,this.$router.push("/simulated"),h.a.$emit("available-balance")},handleAsset:function(){this.dialogVisible=!1,this.$router.push("/userCenter/assets?accountType=contract")},getContractName:function(t,e,s){return C.Utils.getContractName(this.codeType,this.contractType)(t,e,s)}}},_=s("KHd+"),y=Object(_.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("aside",{staticClass:"v-aside-container"},[i("header",{staticClass:"title"},[t._v("\n    "+t._s(t.getContractName(t.$t("header.index_futures"),t.$t("header.perpetual_futures"),t.$t("header.simulated_trading")))+"\n  ")]),t._v(" "),i("ul",{staticClass:"ul-content"},t._l(t.symbolList,(function(e){return i("li",{key:e.symbol,on:{click:function(s){return t.changeSymbol(e)}}},[i("div",{staticClass:"symbol"},[t._v("\n        "+t._s(t._f("slash")(e.symbol))+" "+t._s(t.getContractName(t.$t("contract.index"),t.$t("contract.perpetual"),t.$t("contract.simulated")))+"\n      ")]),t._v(" "),i("div",{staticClass:"price-con"},[i("span",{staticClass:"name"},[i("span",{staticStyle:{"margin-left":"-3px"}},[t._v(t._s(t.$t("contract.last"))+"：")]),i("span",{style:t._f("color")(e.changePercent)},[t._v(t._s(e.price))])]),t._v(" "),i("span",{staticClass:"name"},[i("span",[t._v(t._s(t.$t("contract.change"))+"：")]),i("span",{style:t._f("color")(e.changePercent)},[t._v(t._s(t._f("plus")(t._f("round")(100*e.changePercent,2,!0)))+"%")])])])])})),0),t._v(" "),i("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogProtocolVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"420px"},on:{"update:visible":function(e){t.dialogProtocolVisible=e}}},[i("div",{staticClass:"protocol-container"},[i("img",{staticClass:"p-icon",attrs:{src:s("8s5M"),alt:""}}),t._v(" "),i("header",{staticClass:"p-title"},[t._v("\n        "+t._s(t.$t("contract.contract_risk_tip"))+"\n      ")]),t._v(" "),i("div",{staticClass:"p-body"},[t._v("\n        "+t._s(t.$t("contract.contract_risk_desc"))+"\n      ")]),t._v(" "),i("label",{staticClass:"p-checkbox"},[i("el-checkbox",{staticStyle:{"margin-right":"8px"},model:{value:t.checkedProtocol,callback:function(e){t.checkedProtocol=e},expression:"checkedProtocol"}}),t._v(t._s(t.$t("contract.read_and_noticed"))),i("a",{attrs:{href:"https://support.gx.com/hc/zh-cn/articles/360040458353",target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v("《"+t._s(t.$t("contract.contract_risk_tip"))+"》")])],1),t._v(" "),i("div",{staticClass:"p-btn"},[i("span",{staticClass:"p-btn-left",on:{click:t.handleNoTrade}},[t._v(t._s(t.$t("contract.trade_later")))]),t._v(" "),i("span",{staticClass:"p-btn-right",class:{active:t.checkedProtocol},on:{click:t.handleTrade}},[t._v(t._s(t.$t("contract.trade_now")))])])])]),t._v(" "),i("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogVisible,"show-close":!1,"close-on-press-escape":!1,width:"420px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"protocol-container"},[i("img",{staticStyle:{width:"190px",height:"130px","margin-top":"20px"},attrs:{src:s("B5lR"),alt:""}}),t._v(" "),i("div",{staticClass:"p-title",staticStyle:{"margin-bottom":"10px"}},[t._v("\n        "+t._s(t.$t("contract.gained"))+"\n      ")]),t._v(" "),i("div",{staticStyle:{color:"#ff4d4d","font-size":"32px"}},[t._v("\n        1000"+t._s(t.$t("contract.piece"))+"EXT\n      ")]),t._v(" "),i("div",{staticStyle:{"font-size":"14px","margin-top":"10px"}},[t._v("\n        EXT："+t._s(t.$t("contract.only_trading_simulation"))+"\n      ")]),t._v(" "),i("div",{staticClass:"p-btn",staticStyle:{"margin-top":"30px"}},[i("span",{staticClass:"p-btn-left",on:{click:t.handleAsset}},[t._v(t._s(t.$t("contract.asset_balance")))]),t._v(" "),i("span",{staticClass:"p-btn-right active",on:{click:t.handleSimulated}},[t._v(t._s(t.$t("contract.simulated_trading_now")))])])])])],1)}),[],!1,null,"23b54bb6",null);e.a=y.exports},Ijbi:function(t,e,s){var i=s("WkPL");t.exports=function(t){if(Array.isArray(t))return i(t)}},Kky9:function(t,e,s){!function(t){"use strict";function e(t,s){var i=n({},t);for(var r in s)"object"!=typeof t[r]||null===t[r]||Array.isArray(t[r])?void 0!==s[r]&&(i[r]=s[r]):i[r]=e(t[r],s[r]);return i}function s(){return"1.12 (internal id 630b704a @ 2018-06-06 02:16:11.305509)"}function i(t){window.addEventListener("DOMContentLoaded",t,!1)}var n=Object.assign||function(t){for(var e,s=arguments,i=1,n=arguments.length;i<n;i++)for(var r in e=s[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},a={width:800,height:500,symbol:"AA",interval:"D",timezone:"UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},o=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=e(a,t),t.preset){var s=r[t.preset];s?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(s.disabled_features):this._options.disabled_features=s.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(s.enabled_features):this._options.enabled_features=s.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,s){this._innerAPI()&&this._innerAPI().changeSymbol(t,e+"",s)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var t=this._getIFrameElement();t.contentWindow.destroyChart(),t.parentNode&&t.parentNode.removeChild(t)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,s,i){this._innerAPI().saveChartToServer(t,e,s,i)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=e(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype._getIFrameElement=function(){var t=document.getElementById(this._id);if(null===t)throw new Error("There is no such iframe");return t},t.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},t.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),s=document.getElementById(this._options.container_id);if(null===s)throw new Error("There is no such element - #"+this._options.container_id);s.innerHTML=e;var i=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(i.style.width="100%",this._options.fullscreen||(i.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var n=function(){i.removeEventListener("load",n,!1),i.contentWindow.widgetReady((function(){t._ready=!0;for(var e=0,s=t._readyHandlers;e<s.length;e++)s[e].call(t);i.contentWindow.initializationFinished()}))};i.addEventListener("load",n,!1)},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||"")+"static/tv-chart.630b704a2b9d0eaf1593.html#localserver=1&symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.indicators_file_name?"&indicatorsFile="+encodeURIComponent(this._options.indicators_file_name):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=s,t.version=s,t.onready=i,t.widget=o,Object.defineProperty(t,"__esModule",{value:!0})}(e)},RIqP:function(t,e,s){var i=s("Ijbi"),n=s("EbDI"),r=s("ZhPi"),a=s("Bnag");t.exports=function(t){return i(t)||n(t)||r(t)||a()}},Uouu:function(t,e,s){"use strict";var i=s("o0o1"),n=s.n(i),r=s("yXPU"),a=s.n(r),o=s("lSNA"),c=s.n(o),l=s("p46w"),u=s.n(l),p=s("Kky9"),d=s("56dg"),m=s("sg+6"),h=s("L2JU"),f=s("Q2AE"),g=s("z/s1"),_={name:"CouponList",props:{dialogVisible:{type:Boolean,default:!1},couponList:{type:Array,default:function(){return[]}}},methods:{handleClose:function(){this.$emit("close",!1)},handleUse:function(t){this.$emit("ok",t)},handleUseInstructions:function(){window.open("https://support.gx.com/hc/zh-cn/articles/360050810433")}}},y=s("KHd+"),v=Object(y.a)(_,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coupon-list-container"},[i("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"446px"},on:{close:t.handleClose}},[i("div",{staticClass:"title-dialog",attrs:{slot:"title"},slot:"title"},[i("img",{attrs:{src:s("dH5j"),width:"182",alt:""}})]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("contract.experience_coupon"))+"\n      ")]),i("div",{staticClass:"desc"},[t._v("\n        "+t._s(t.$t("contract.experience_coupon_desc",{length:t.couponList.length}))),i("span",{staticStyle:{color:"#FFC67F",cursor:"pointer"},on:{click:t.handleUseInstructions}},[t._v(t._s(t.$t("contract.use_instructions"))+">>")])])]),t._v(" "),i("ul",{staticClass:"coupon-con"},t._l(t.couponList,(function(e){return i("li",{key:e.id},[i("div",{staticClass:"left-con"},[i("div",{staticClass:"left-up"},[t._v("\n            "+t._s(parseFloat(e.value))),i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.assetCode))])]),t._v(" "),i("div",{staticClass:"left-down"},[t._v("\n            x"+t._s(e.multiple)+t._s(t.$t("contract.coupon"))+"\n          ")])]),t._v(" "),i("div",{staticClass:"right-con"},[i("div",{staticClass:"right-up"},[i("span",[t._v(t._s(e.symbol))]),i("span",[t._v(t._s(t.$t("contract.coupon_number"))+"："+t._s(e.id||"-"))])]),t._v(" "),i("div",{staticClass:"right-down"},[i("span",{staticClass:"date"},[t._v(t._s(t.$t("contract.limited_period"))+"："+t._s(e.expireDate))]),i("span",{staticClass:"use-btn",on:{click:function(s){return t.handleUse(e)}}},[t._v(t._s(t.$t("contract.use_immediately")))])])])])})),0)])],1)}),[],!1,null,"70719d47",null).exports,b=s("s1fJ"),k={name:"RulesUrl",methods:{goAllCurrencyUrl:function(){window.open("https://support.gx.com/hc/zh-cn/articles/360039846754")},goNewGuide:function(){window.open("https://support.gx.com/hc/zh-cn/articles/360039845974")},goQuestion:function(){window.open("https://support.gx.com/hc/zh-cn/sections/360005340973")}}},S=Object(y.a)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rules-url-container"},[s("div",{on:{click:t.goNewGuide}},[s("i",{staticClass:"icon-gg_zhinan"}),t._v(" "),s("span",[t._v(t._s(t.$t("contract.newbie_guide")))])]),t._v(" "),s("div",{on:{click:t.goQuestion}},[s("i",{staticClass:"icon-gg_wt"}),t._v(" "),s("span",[t._v(t._s(t.$t("footer.common_problems")))])])])}),[],!1,null,"7a94cb52",null).exports,w=s("vKDJ"),x={methods:{render:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.token?t.getAccountUserInfo((function(){t.getTradeInitialInfoList()})):t.getTradeInitialInfoList(),t.getMultipleList();case 2:case"end":return e.stop()}}),e)})))()},getTradeInitialInfoList:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.getTradeInitialInfoList({codeType:t.codeType,contractType:t.contractType});case 2:s=e.sent,t.productGroupBySymbolList=s.productGroupBySymbolList,t.detailedProductList=s.detailedProductList,t.$store.commit("setBriefProductList",s.briefProductList),t.$store.commit("setDetailedProductList",s.detailedProductList),s.detailedProductList.forEach((function(e){t.contractAssetDigitMap[e.symbol+e.marginAsset]=e.priceDecimal})),s.marginAssetList.forEach((function(e){t.marginAssetListMap[e.code]=e.amountDecimal})),t.$store.commit("setMarginAssetListMap",t.marginAssetListMap),t.$store.commit("setContractPairAssetDigitMap",t.contractAssetDigitMap),t.getAssureAsset();case 12:case"end":return e.stop()}}),e)})))()},getMultipleList:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.getMultipleList();case 2:s=e.sent,t.multipleList=s;case 4:case"end":return e.stop()}}),e)})))()},getAssureAsset:function(t){var e=this;this.assureAssetList=(this.productGroupBySymbolList.find((function(t){return t.symbol===e.symbol}))||{}).codeList||[],1===this.contractType&&(this.assureAsset=t?this.assureAssetList[0]:this.assureAsset||this.assureAssetList[0]),this.$emit("setAssureAsset",this.assureAsset);var s=this.detailedProductList.find((function(t){return t.symbol===e.symbol&&e.assureAsset===t.marginAsset}))||{};this.quantityDecimal=s.quantityDecimal,this.priceDecimal=s.priceDecimal,this.assureAssetData=this.accounts.find((function(t){return t.assetCode===e.assureAsset}))||{}},getAccountUserInfo:function(t){var e=this;return a()(n.a.mark((function s(){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,w.a.getAccountUserInfo();case 2:i=s.sent,e.accounts=i.accounts,e.$store.commit("setContractAccounts",i.accounts),t&&t();case 6:case"end":return s.stop()}}),s)})))()},handleAssureAsset:function(){var t=this;this.assureAssetData=this.accounts.find((function(e){return e.assetCode===t.assureAsset}))||{};var e=this.detailedProductList.find((function(e){return e.symbol===t.symbol&&t.assureAsset===e.marginAsset}))||{};this.quantityDecimal=e.quantityDecimal,this.priceDecimal=e.priceDecimal,this.$emit("setAssureAsset",this.assureAsset)},getMaxBalance:function(){var t=this;return(this.detailedProductList.find((function(e){return e.marginAsset===t.assureAsset&&e.symbol===t.symbol}))||{}).maxMargin},handleSubmit:function(t,e){var s=this;return a()(n.a.mark((function i(){var r,a,o;return n.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s.token){i.next=3;break}return s.$router.push("/login"),i.abrupt("return");case 3:if(s.checkedProtocol=!1,r=s.symbol.split("_"),a=r[0],o=r[1],2!==e){i.next=19;break}if("long"!==t&&"small"!==s.clientSize){i.next=14;break}if(s.placeOrderFormLong.assureQuantity){i.next=12;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("contract.open_position_amount")),i.abrupt("return");case 12:i.next=17;break;case 14:if(s.placeOrderFormShort.assureQuantity){i.next=17;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("contract.open_position_amount")),i.abrupt("return");case 17:i.next=22;break;case 19:if(s.assureQuantity){i.next=22;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("contract.open_position_amount")),i.abrupt("return");case 22:if("market"!==s.tradeType){i.next=26;break}s.marketPriceOpen(t,a,o,e),i.next=42;break;case 26:if(2!==e){i.next=38;break}if("long"!==t&&"small"!==s.clientSize){i.next=33;break}if(s.placeOrderFormLong.price){i.next=31;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("trade.price")),i.abrupt("return");case 31:i.next=36;break;case 33:if(s.placeOrderFormShort.price){i.next=36;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("trade.price")),i.abrupt("return");case 36:i.next=41;break;case 38:if(s.restrictPrice){i.next=41;break}return s.$message.warning(s.$t("contract.please_enter")+s.$t("trade.price")),i.abrupt("return");case 41:s.limitPriceEntrust(t,a,o,e);case 42:case"end":return i.stop()}}),i)})))()},marketPriceOpen:function(t,e,s,i){var r=this;return a()(n.a.mark((function a(){var o,c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.marketSubmiting){n.next=2;break}return n.abrupt("return");case 2:if(r.marketSubmiting=!0,o=r.assureQuantity,c=r.assureAsset,n.prev=5,!r.isSelectedCoupon){n.next=10;break}return n.next=9,w.a.openCoupon({assureAsset:c,baseAsset:e,contractType:i,buySide:t,couponCode:r.couponCode,quoteAsset:s}).then((function(){r.getUserCoupons(),r.assureQuantity="",r.multiple="",r.couponCode="",r.isSelectedCoupon=!1,r.marketSubmiting=!1,2===i&&(r.placeOrderFormLong.assureQuantity="",r.placeOrderFormLong.price="",r.placeOrderFormShort.assureQuantity="",r.placeOrderFormShort.price=""),r.$message.success("success")}));case 9:return n.abrupt("return");case 10:return n.next=12,w.a.marketPriceOpen({assureAsset:c,assureQuantity:o,baseAsset:e,buyQuantity:r.getBuyQuantity(t,i),buySide:t,multiple:r.multiple,quoteAsset:s,symbol:r.symbol,contractType:i});case 12:!u.a.get("contract-open-positions")&&r.getNightFeeRate(e+"_"+s)>0&&(r.dialogProtocolVisible=!0),r.getAccountUserInfo((function(){r.getAssureAsset()})),r.assureQuantity="",2===i&&("long"===t||"small"===r.clientSize?(r.placeOrderFormLong.assureQuantity="",r.placeOrderFormLong.price=""):(r.placeOrderFormShort.assureQuantity="",r.placeOrderFormShort.price="")),b.a.$emit("refreshCurrentPosition"),r.$message.success("success"),r.marketSubmiting=!1,n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),r.marketSubmiting=!1;case 24:case"end":return n.stop()}}),a,null,[[5,21]])})))()},getNightFeeRate:function(t){var e=this.detailedProductList.filter((function(e){return t===e.symbol}))[0];return parseFloat(e.nightFeeRate)},limitPriceEntrust:function(t,e,s,i){var r=this;return a()(n.a.mark((function a(){var o,c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.assureQuantity,c=r.restrictPrice,2===i&&("long"===t||"small"===r.clientSize?(o=r.placeOrderFormLong.assureQuantity,c=r.placeOrderFormLong.price):(o=r.placeOrderFormShort.assureQuantity,c=r.placeOrderFormShort.price)),!r.limitSumiting){n.next=5;break}return n.abrupt("return");case 5:return r.limitSumiting=!0,n.prev=6,n.next=9,w.a.limitPriceEntrust({assureAsset:r.assureAsset,assureQuantity:o,baseAsset:e,buyQuantity:r.getBuyQuantity(t,i),buySide:t,multiple:r.multiple,restrictPrice:c,quoteAsset:s,symbol:r.symbol,contractType:i});case 9:u.a.get("contract-open-positions")||(r.dialogProtocolVisible=!0),r.getAccountUserInfo((function(){r.getAssureAsset()})),r.restrictPrice="",r.assureQuantity="",2===i&&("long"===t||"small"===r.clientSize?(r.placeOrderFormLong.assureQuantity="",r.placeOrderFormLong.price=""):(r.placeOrderFormShort.assureQuantity="",r.placeOrderFormShort.price="")),r.limitSumiting=!1,b.a.$emit("refreshCurrentOrders"),r.$message.success("success"),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(6),r.limitSumiting=!1;case 22:case"end":return n.stop()}}),a,null,[[6,19]])})))()},getBuyQuantity:function(t,e){var s=this,i=this.assureQuantity;if(2===e)return i="long"===t||"small"===this.clientSize?this.placeOrderFormLong.assureQuantity:this.placeOrderFormShort.assureQuantity;var n=this.detailedProductList.find((function(t){return t.symbol===s.symbol&&t.marginAsset===s.assureAsset}))||{},r=n.openFeeRate,a=this.openPrice;return parseFloat(i/(a*(1/this.multiple-r))).toFixed(n.quantityDecimal)},handleKnow:function(){this.dialogProtocolVisible=!1,this.checkedProtocol&&u.a.set("contract-open-positions",!0)},handleTransfer:function(){this.dialogTransferVisible=!0},handleTransferClose:function(t){var e=this;this.dialogTransferVisible=!1,t&&this.getAccountUserInfo((function(){e.getTradeInitialInfoList()}))},handleRestrictPrice:function(t){this.restrictPrice=C.Utils.setNumberDigit(t,this.priceDecimal)},handleAssureQuantity:function(t){var e=Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance);this.assureQuantity=C.Utils.setNumberDigit(t,2),this.assureQuantity>e&&(this.assureQuantity=C.Utils.setNumberDigit(e+"",2)),this.balanceRate=this.assureAssetData.availableBalance>0?C.Utils.round(this.assureQuantity/e*100,0):0},changeSlider:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.token&&!this.isSelectedCoupon&&"-"!==this.assureAssetData.availableBalance&&this.assureAssetData.availableBalance&&(1===s?(this.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*t,this.quantityDecimal),this.balanceRate=C.Utils.round(100*t,0)):"market"===this.tradeType?"buy"===e||"small"===this.clientSize?(this.placeOrderFormLong.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*t*this.multiple/this.openPrice/100,this.quantityDecimal),this.placeOrderFormLong.percent=C.Utils.round(t,0)):(this.placeOrderFormShort.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*t*this.multiple/this.openPrice/100,this.quantityDecimal),this.placeOrderFormShort.percent=C.Utils.round(t,0)):"buy"===e||"small"===this.clientSize?(this.placeOrderFormLong.price&&(this.placeOrderFormLong.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*t*this.multiple/this.placeOrderFormLong.price/100,this.quantityDecimal)),this.placeOrderFormLong.percent=C.Utils.round(t,0)):(this.placeOrderFormShort.price&&(this.placeOrderFormShort.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*t*this.multiple/this.placeOrderFormShort.price/100,this.quantityDecimal)),this.placeOrderFormShort.percent=C.Utils.round(t,0)))}}};function A(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function P(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?A(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var O={name:"MarketTrade",components:{gTransfer:g.a,gCouponList:v,gRulesUrl:S},mixins:[x],props:{codeType:{type:Number,default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},openPrice:{type:[String,Number],default:""},currency:{type:[String,Number],default:""},changePercent:{type:[String,Number],default:""}},data:function(){var t=this,e=function(e,s,i){s<=0?i(new Error(t.$t("contract.please_verify"))):i()};return{assureAsset:"",assureQuantity:"",multiple:"100",multipleList:[],productGroupBySymbolList:[],assureAssetList:[],accounts:[],detailedProductList:[],dialogProtocolVisible:!1,checkedProtocol:!1,dialogTransferVisible:!1,dialogContractVisible:!1,balanceRate:0,assureAssetData:{},contractAssetDigitMap:{},quantityDecimal:"",priceDecimal:"",restrictPrice:"",type:"income",form:{multiple:"",openPrice:"",closePrice:"",amount:"",holdAmount:"",income:""},rules:{multiple:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.leverage1"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],openPrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],closePrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.liquidation_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],amount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_margin"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],holdAmount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.append_margin"),trigger:"blur"}],income:[{required:!0,message:this.$t("contract.please_enter")+this.$t("order.income"),trigger:"blur"}]},saleType:"long",compute:{income:"",incomeRate:"",closePrice:"",marginCallPrice:""},tradeType:"market",marginAssetListMap:{},isSelectedCoupon:!1,useRate:[10,30,50,100],dialogCouponVisible:!1,couponList:[]}},computed:P(P({},Object(h.d)(["token","lang","clientSize"])),{},{styleCls:function(){return this.changePercent<0?{background:"rgba(250, 59, 59, 0.2)",color:"#ff4d4d"}:this.changePercent>0?{background:"rgba(32, 203, 161, 0.2)",color:"#0BB378"}:{background:"rgba(132,142,156, 0.2)",color:"rgb(132,142,156)"}}}),watch:{symbol:function(t){t&&(this.getUserCoupons(),this.getAssureAsset(!0))}},mounted:function(){this.render(),b.a.$on("available-balance",this.getAvailableBalance)},beforeDestroy:function(){b.a.$off("available-balance",this.getAvailableBalance)},methods:{handleContractCalculator:function(){this.dialogContractVisible=!0,this.saleType="long",this.type="income",this.handleReset()},handleReset:function(){this.form={multiple:"",openPrice:"",closePrice:"",amount:"",income:""},this.compute={income:"",incomeRate:"",closePrice:"",marginCallPrice:""}},switchType:function(t){this.type=t},setTradeType:function(t){this.tradeType=t,this.isSelectedCoupon=!1},handleType:function(t){this.saleType!==t?(this.saleType=t,this.handleCompute()):this.saleType=t},handleCompute:function(){var t=this;this.$refs.form.validate((function(e){e&&("long"===t.saleType?t.computeLong():t.computeShort())}))},computeLong:function(){if("income"===this.type)this.compute.income=(this.form.closePrice-this.form.openPrice)*(this.form.amount*this.form.multiple/this.form.openPrice),this.compute.incomeRate=this.compute.income/this.form.amount;else if("close"===this.type)this.compute.closePrice=parseFloat(this.form.openPrice)+this.form.income*this.form.openPrice/this.form.multiple/this.form.amount;else{var t=this.form.amount*this.form.multiple;this.compute.marginCallPrice=this.form.openPrice*(1-.8*(parseFloat(this.form.holdAmount)+parseFloat(this.form.amount))/t)}},computeShort:function(){if("income"===this.type)this.compute.income=(this.form.openPrice-this.form.closePrice)*(this.form.amount*this.form.multiple/this.form.openPrice),this.compute.incomeRate=this.compute.income/this.form.amount;else if("close"===this.type)this.compute.closePrice=this.form.openPrice-this.form.income*this.form.openPrice/this.form.multiple/this.form.amount;else{var t=this.form.amount*this.form.multiple;this.compute.marginCallPrice=this.form.openPrice*(1+.8*(parseFloat(this.form.holdAmount)+parseFloat(this.form.amount))/t)}},getAvailableBalance:function(){var t=this;this.getAccountUserInfo((function(){t.getAssureAsset()}))},handleSelectCoupon:function(){this.token?this.dialogCouponVisible=!0:this.$router.push("/login")},handleCouponClose:function(){this.dialogCouponVisible=!1},getUserCoupons:function(){var t=this;this.token&&w.a.getUserCoupons({symbol:this.symbol}).then((function(e){var s=[];e.forEach((function(t){2===t.status&&s.push(P(P({},t),{},{expireDate:t.expireDate.slice(0,10)}))})),t.couponList=s}))},handleUse:function(t){this.assureQuantity=parseFloat(t.value),this.multiple=t.multiple,this.assureAsset=t.assetCode,this.couponCode=t.id,this.balanceRate="",this.isSelectedCoupon=!0,this.dialogCouponVisible=!1},handleCancelCoupon:function(){this.isSelectedCoupon=!1}}},T=Object(y.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contract-right-container"},[s("div",{staticClass:"market-trade-container"},[s("header",[s("div",[s("span",{class:{active:"market"==t.tradeType},on:{click:function(e){return t.setTradeType("market")}}},[t._v(t._s(t.$t("contract.market_trading")))]),t._v(" "),s("span",{class:{active:"limit"==t.tradeType},staticStyle:{"margin-left":"20px"},on:{click:function(e){return t.setTradeType("limit")}}},[t._v(t._s(t.$t("contract.limit_trading")))])]),t._v(" "),s("i",{staticClass:"icon-contract-calculator",on:{click:t.handleContractCalculator}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"price-change-name"},[s("span",[t._v(t._s(t.$t("contract.market_price"))+t._s(t._f("slash")(t.symbol)))]),t._v(" "),s("span",[t._v(t._s(t.$t("contract.change")))])]),t._v(" "),s("div",{staticClass:"price-change-value",staticStyle:{"margin-top":"5px"}},[s("span",[s("span",{staticClass:"price",style:t._f("color")(t.changePercent)},[t._v(t._s(t._f("round")(t.openPrice,t.contractAssetDigitMap[t.symbol+t.assureAsset],!0)))]),t._v(" ≈ "+t._s(t.currency)+" CNY")]),t._v(" "),s("span",{staticStyle:{display:"inline-block",height:"22px","line-height":"22px",padding:"0 10px"},style:t.styleCls},[t._v(t._s(t._f("plus")(t._f("round")(100*t.changePercent,2,!0)))+"%")])]),t._v(" "),t.couponList.length?s("div",{directives:[{name:"show",rawName:"v-show",value:"limit"!=t.tradeType,expression:"tradeType != 'limit'"}],staticClass:"coupon-con"},[s("div",{staticClass:"coupon-input",on:{click:t.handleSelectCoupon}},[s("div",{staticStyle:{"font-size":"12px",color:"#dee2f0","margin-left":"5px"}},[t._v("\n            "+t._s(t.$t("contract.coupon"))+":\n          ")]),t._v(" "),s("div",[t.isSelectedCoupon?s("span",{staticStyle:{"font-size":"14px",color:"#ffc67f"}},[t._v(t._s(t.assureQuantity)+t._s(t.assureAsset)+t._s(t.multiple)+t._s(t.$t("contract.x_experience_coupon")))]):s("span",{staticStyle:{"font-size":"14px",color:"#dee2f0"}},[t._v(t._s(t.couponList.length)+t._s(t.$t("contract.piece2")))]),t._v(" "),s("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"#707996","margin-right":"11px"}})])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSelectedCoupon,expression:"isSelectedCoupon"}],staticClass:"cancel",on:{click:t.handleCancelCoupon}},[t._v(t._s(t.$t("common.cancel")))])]):t._e(),t._v(" "),s("div",{staticClass:"select-content"},[s("el-select",{attrs:{"popper-class":"contract-trade-popper",size:"medium",disabled:t.isSelectedCoupon},on:{change:t.handleAssureAsset},model:{value:t.assureAsset,callback:function(e){t.assureAsset=e},expression:"assureAsset"}},[s("el-tooltip",{attrs:{slot:"prefix",effect:"light","popper-class":"tooltip-popper",placement:"top",content:t.$t("contract.margin_desc")},slot:"prefix"},[s("span",{staticClass:"input-cls assureAsset-text"},[s("span",[t._v(t._s(t.$t("contract.margin_type")))]),s("span",[t._v("：")])])]),t._v(" "),t._l(t.assureAssetList,(function(t){return s("el-option",{key:t,attrs:{value:t,label:t}})}))],2),t._v(" "),s("el-select",{staticStyle:{"margin-left":"8px"},attrs:{"popper-class":"contract-trade-popper",disabled:t.isSelectedCoupon,size:"medium"},model:{value:t.multiple,callback:function(e){t.multiple=e},expression:"multiple"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.leverage"))+"：")]),t._v(" "),t._l(t.multipleList,(function(t){return s("el-option",{key:t.multiple,attrs:{value:t.multiple,label:t.multiple+"x"}})}))],2)],1),t._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:"limit"==t.tradeType,expression:"tradeType == 'limit'"}],staticClass:"input-content",attrs:{size:"medium","max-length":"25"},on:{input:t.handleRestrictPrice},model:{value:t.restrictPrice,callback:function(e){t.restrictPrice=e},expression:"restrictPrice"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("trade.price"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"10px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.symbol&&t.symbol.split("_")[1]))])]),t._v(" "),s("el-input",{staticClass:"input-content",attrs:{disabled:t.isSelectedCoupon,size:"medium","max-length":"25"},on:{input:t.handleAssureQuantity},model:{value:t.assureQuantity,callback:function(e){t.assureQuantity=e},expression:"assureQuantity"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.open_position_amount"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"10px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.assureAsset))])]),t._v(" "),s("ul",{staticClass:"use-rate"},t._l(t.useRate,(function(e){return s("li",{key:e,class:{active:t.balanceRate==e},on:{click:function(s){return t.changeSlider(e/100)}}},[t._v("\n          "+t._s(e)+"%\n        ")])})),0),t._v(" "),s("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-end","font-size":"14px","margin-bottom":"12px"}},[s("p",{staticStyle:{color:"#707996"}},[t._v("\n          "+t._s(t.$t("trade.usable"))+"："+t._s(t._f("round")(t.assureAssetData.availableBalance,8))+" "+t._s(t.assureAsset)+"\n          "),t.token?s("span",{staticStyle:{cursor:"pointer",color:"#4a86f8","margin-left":"12px","user-select":"none"},on:{click:t.handleTransfer}},[t._v(t._s(t.$t("my_assets.transfer")))]):t._e()])]),t._v(" "),s("div",{staticClass:"footer-btn"},[s("span",{on:{click:function(e){return t.handleSubmit("long",1)}}},[t._v(t._s(t.token?t.$t("contract.long"):t.$t("contract.login")))]),t._v(" "),s("span",{on:{click:function(e){return t.handleSubmit("short",1)}}},[t._v(t._s(t.token?t.$t("contract.short"):t.$t("contract.login")))])])],1),t._v(" "),s("el-dialog",{staticClass:"night-dialog",attrs:{visible:t.dialogProtocolVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"420px"},on:{"update:visible":function(e){t.dialogProtocolVisible=e}}},[s("div",{staticClass:"protocol-container"},[s("div",{staticClass:"p-title"},[t._v("\n          "+t._s(t.$t("contract.overnight_announcement"))+"\n        ")]),t._v(" "),s("div",{staticStyle:{"line-height":"1.5"},domProps:{innerHTML:t._s(t.$t("contract.overnight_announcement_desc"))}}),t._v(" "),s("label",{staticClass:"p-checkbox"},[s("el-checkbox",{staticStyle:{"margin-right":"8px",display:"inline-block","vertical-align":"top"},model:{value:t.checkedProtocol,callback:function(e){t.checkedProtocol=e},expression:"checkedProtocol"}}),t._v(" "),s("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._v(t._s(t.$t("contract.no_remind_again")))])],1),t._v(" "),s("div",{staticClass:"p-btn",on:{click:t.handleKnow}},[t._v("\n          "+t._s(t.$t("contract.i_know"))+"\n        ")])])]),t._v(" "),t.dialogTransferVisible?s("g-transfer",{attrs:{"dialog-visible":t.dialogTransferVisible,"asset-code":t.assureAsset,symbol:t.symbol},on:{close:t.handleTransferClose}}):t._e(),t._v(" "),s("el-dialog",{staticClass:"contract-dialog",attrs:{visible:t.dialogContractVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"680px"},on:{"update:visible":function(e){t.dialogContractVisible=e}}},[s("div",{staticClass:"title-dialog",class:t.lang,attrs:{slot:"title"},slot:"title"},[s("span",{class:{active:"income"==t.type},on:{click:function(e){return t.switchType("income")}}},[t._v(t._s(t.$t("contract.income_calculation")))]),t._v(" "),s("span",{class:{active:"close"==t.type},on:{click:function(e){return t.switchType("close")}}},[t._v(t._s(t.$t("contract.liquidation_price")))]),t._v(" "),s("span",{class:{active:"strong"==t.type},on:{click:function(e){return t.switchType("strong")}}},[t._v(t._s(t.$t("contract.mandatory_liquidation_price")))])]),t._v(" "),s("div",{staticClass:"calculator-content"},[s("div",{staticClass:"calculator-left"},[s("div",{staticClass:"c-header"},[s("span",{staticClass:"c-header-left",class:{active:"long"===t.saleType},on:{click:function(e){return t.handleType("long")}}},[t._v(t._s(t.$t("contract.long")))]),t._v(" "),s("i"),t._v(" "),s("span",{staticClass:"c-header-right",class:{active:"short"===t.saleType},on:{click:function(e){return t.handleType("short")}}},[t._v(t._s(t.$t("contract.short")))])]),t._v(" "),s("div",[s("el-form",{ref:"form",attrs:{"status-icon":!1,"hide-required-asterisk":!1,model:t.form,rules:t.rules}},[s("el-form-item",{key:"multiple",attrs:{prop:"multiple"}},[s("div",{staticClass:"label-name",staticStyle:{"margin-top":"14px"}},[t._v("\n                  "+t._s(t.$t("contract.leverage1"))+"\n                ")]),t._v(" "),s("el-input",{key:"multiple",model:{value:t.form.multiple,callback:function(e){t.$set(t.form,"multiple",e)},expression:"form.multiple"}})],1),t._v(" "),s("el-form-item",{key:"openPrice",attrs:{prop:"openPrice"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.open_position_price"))+"(USDT)\n                ")]),t._v(" "),s("el-input",{key:"openPrice",model:{value:t.form.openPrice,callback:function(e){t.$set(t.form,"openPrice",e)},expression:"form.openPrice"}})],1),t._v(" "),"income"==t.type?s("el-form-item",{key:"closePrice",attrs:{prop:"closePrice"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.liquidation_price"))+"(USDT)\n                ")]),t._v(" "),s("el-input",{key:"closePrice",model:{value:t.form.closePrice,callback:function(e){t.$set(t.form,"closePrice",e)},expression:"form.closePrice"}})],1):t._e(),t._v(" "),s("el-form-item",{key:"amount",attrs:{prop:"amount"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.open_position_margin"))+"\n                ")]),t._v(" "),s("el-input",{key:"amount",model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),"strong"==t.type?s("el-form-item",{key:"holdAmount",attrs:{prop:"holdAmount"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.append_margin"))+"\n                ")]),t._v(" "),s("el-input",{key:"holdAmount",model:{value:t.form.holdAmount,callback:function(e){t.$set(t.form,"holdAmount",e)},expression:"form.holdAmount"}})],1):t._e(),t._v(" "),"close"==t.type?s("el-form-item",{key:"income",attrs:{prop:"income"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("order.income"))+"\n                ")]),t._v(" "),s("el-input",{key:"income",model:{value:t.form.income,callback:function(e){t.$set(t.form,"income",e)},expression:"form.income"}})],1):t._e()],1)],1),t._v(" "),s("div",{staticClass:"c-btn"},[s("span",{staticClass:"c-btn-left",on:{click:t.handleReset}},[t._v(t._s(t.$t("contract.reset")))]),t._v(" "),s("span",{staticClass:"c-btn-right",on:{click:t.handleCompute}},[t._v(t._s(t.$t("contract.calculation")))])])]),t._v(" "),s("div",{staticClass:"calculator-right"},[s("div",{staticStyle:{padding:"22px"}},[s("div",{staticStyle:{"font-size":"14px","font-family":"PingFangSC-Regular,PingFang SC","font-weight":"400",color:"#0A0F1E"}},[t._v("\n              "+t._s(t.$t("contract.calculation_results"))+"：\n            ")]),t._v(" "),s("div",{staticStyle:{"font-size":"14px",color:"#7F849A","padding-top":"14px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"income"===t.type,expression:"type === 'income'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("order.income")))]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.income,4),!0)))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"income"===t.type,expression:"type === 'income'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("order.income_rate")))]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(100*t.compute.incomeRate,4),!0))+t._s(t.compute.incomeRate?"%":""))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"close"===t.type,expression:"type === 'close'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("contract.liquidation_price"))+"(USDT)")]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.closePrice,4),!0)))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"strong"===t.type,expression:"type === 'strong'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("contract.mandatory_liquidation_price"))+"(USDT)")]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.marginCallPrice,4),!0)))])])])])])])])],1),t._v(" "),s("gRulesUrl"),t._v(" "),s("g-coupon-list",{attrs:{"dialog-visible":t.dialogCouponVisible,"coupon-list":t.couponList},on:{close:t.handleCouponClose,ok:t.handleUse}})],1)}),[],!1,null,"af588264",null).exports,F={name:"GSlider",props:{percent:{type:[Number,String],default:""}},data:function(){return{width:0,tmpWidth:0}},watch:{percent:function(){this.width=368*this.percent/100,this.width<=0?this.width=0:this.width>=368&&(this.width=368),this.tmpWidth=this.width}},mounted:function(){this.$refs.slider.addEventListener("mousedown",this.start),this.$refs.slider.addEventListener("touchstart",this.start)},beforeDestroy:function(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.end)},methods:{setWidth:function(t){this.width=t,this.tmpWidth=this.width,this.$emit("change",C.Utils.round(this.width/368,2))},start:function(t){this.dragging=!0,t.preventDefault(),this.startX=t.clientX,"touchstart"===t.type&&(this.startX=t.touches[0].clientX),this.$store.commit("setTradingLayer",!0),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.end),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.end)},move:function(t){"touchmove"===t.type&&(t.clientX=t.touches[0].clientX),this.moveX=t.clientX+this.tmpWidth,this.width=this.moveX-this.startX,this.width<=0?this.width=0:this.width>=368&&(this.width=368)},end:function(){var t=this;this.dragging&&setTimeout((function(){t.dragging=!1,t.tmpWidth=t.width}),0),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.end),this.$store.commit("setTradingLayer",!1),this.$emit("change",C.Utils.round(this.width/368,2))}}},D=Object(y.a)(F,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-container"},[s("span",{staticClass:"disabled-line"}),t._v(" "),s("span",{staticClass:"active-line",style:{width:t.width+"px"}},[s("i",{ref:"slider",staticClass:"icon-buy_hk"},[s("span",{staticClass:"value",style:{left:t.width>10?"-10px":"-5px"}},[t._v(t._s(t._f("round")(t.percent>100?t.percent:t.width/368*100,0))+"%")]),s("span",{staticClass:"icon-arrow"})])]),t._v(" "),s("div",{staticClass:"steps"},[s("span",{staticClass:"active",on:{click:function(e){return t.setWidth(0)}}}),t._v(" "),s("span",{class:{active:t.width>92},on:{click:function(e){return t.setWidth(92)}}}),t._v(" "),s("span",{class:{active:t.width>184},on:{click:function(e){return t.setWidth(184)}}}),t._v(" "),s("span",{class:{active:t.width>276},on:{click:function(e){return t.setWidth(276)}}}),t._v(" "),s("span",{class:{active:t.width>368},on:{click:function(e){return t.setWidth(368)}}})])])}),[],!1,null,"1865fc0c",null).exports,$={name:"RulesUrl",methods:{goAllCurrencyUrl:function(){window.open("https://support.gx.com/hc/zh-cn/articles/360039846754")},goNewGuide:function(){window.open("https://support.gx.com/hc/zh-cn/articles/360039845974")},goQuestion:function(){window.open("https://support.gx.com/hc/zh-cn/sections/360005340973")}}},L=Object(y.a)($,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rules-url-container"},[s("div",{staticClass:"all-currency",on:{click:t.goAllCurrencyUrl}},[s("i",[t._v(t._s(t.$t("contract.raiders")))]),t._v(" "),s("div",{staticClass:"title-cn"},[t._v("\n      全币种合约规则说明\n    ")]),t._v(" "),s("div",{staticClass:"title-en"},[t._v("\n      All currency contract rules\n    ")])]),t._v(" "),s("div",{staticClass:"other-rules"},[s("div",{on:{click:t.goNewGuide}},[s("i",{staticClass:"icon-gg_zhinan"}),t._v(" "),s("span",[t._v(t._s(t.$t("contract.newbie_guide")))])]),t._v(" "),s("div",{on:{click:t.goQuestion}},[s("i",{staticClass:"icon-gg_wt"}),t._v(" "),s("span",[t._v(t._s(t.$t("footer.common_problems")))])])])])}),[],!1,null,"4b883b10",null).exports;function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function U(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var B={name:"MarketTrade",components:{gSlider:D,gTransfer:g.a,gRulesUrl:L},mixins:[x],props:{codeType:{type:Number,default:1},contractType:{type:Number,default:1},symbol:{type:String,default:""},openPrice:{type:[String,Number],default:""},currency:{type:[String,Number],default:""},changePercent:{type:[String,Number],default:""}},data:function(){var t=this,e=function(e,s,i){s<=0?i(new Error(t.$t("contract.please_verify"))):i()};return{assureAsset:"",assureQuantity:"",multiple:"100",multipleList:[],productGroupBySymbolList:[],assureAssetList:[],accounts:[],detailedProductList:[],dialogProtocolVisible:!1,checkedProtocol:!1,dialogTransferVisible:!1,dialogContractVisible:!1,balanceRate:0,assureAssetData:{},contractAssetDigitMap:{},quantityDecimal:"",priceDecimal:"",restrictPrice:"",type:"income",form:{multiple:"",openPrice:"",closePrice:"",amount:"",holdAmount:"",income:""},rules:{multiple:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.leverage1"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],openPrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],closePrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.liquidation_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],amount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_margin"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],holdAmount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.append_margin"),trigger:"blur"}],income:[{required:!0,message:this.$t("contract.please_enter")+this.$t("order.income"),trigger:"blur"}]},saleType:"long",compute:{income:"",incomeRate:"",closePrice:"",marginCallPrice:""},tradeType:"market",marginAssetListMap:{}}},computed:U(U({},Object(h.d)(["token","lang","clientSize"])),{},{styleCls:function(){return this.changePercent<0?{background:"rgba(250, 59, 59, 0.2)",color:"#ff4d4d"}:this.changePercent>0?{background:"rgba(32, 203, 161, 0.2)",color:"#0BB378"}:{background:"rgba(132,142,156, 0.2)",color:"rgb(132,142,156)"}}}),watch:{symbol:function(){this.getAssureAsset(!0)}},mounted:function(){this.render(),b.a.$on("available-balance",this.getAvailableBalance)},beforeDestroy:function(){b.a.$off("available-balance",this.getAvailableBalance)},methods:{handleContractCalculator:function(){this.dialogContractVisible=!0,this.saleType="long",this.type="income",this.handleReset()},handleReset:function(){this.form={multiple:"",openPrice:"",closePrice:"",amount:"",income:""},this.compute={income:"",incomeRate:"",closePrice:"",marginCallPrice:""}},switchType:function(t){this.type=t},handleType:function(t){this.saleType!==t?(this.saleType=t,this.handleCompute()):this.saleType=t},handleCompute:function(){var t=this;this.$refs.form.validate((function(e){e&&("long"===t.saleType?t.computeLong():t.computeShort())}))},computeLong:function(){if("income"===this.type)this.compute.income=(this.form.closePrice-this.form.openPrice)*(this.form.amount*this.form.multiple/this.form.openPrice),this.compute.incomeRate=this.compute.income/this.form.amount;else if("close"===this.type)this.compute.closePrice=parseFloat(this.form.openPrice)+this.form.income*this.form.openPrice/this.form.multiple/this.form.amount;else{var t=this.form.amount*this.form.multiple;this.compute.marginCallPrice=this.form.openPrice*(1-.8*(parseFloat(this.form.holdAmount)+parseFloat(this.form.amount))/t)}},computeShort:function(){if("income"===this.type)this.compute.income=(this.form.openPrice-this.form.closePrice)*(this.form.amount*this.form.multiple/this.form.openPrice),this.compute.incomeRate=this.compute.income/this.form.amount;else if("close"===this.type)this.compute.closePrice=this.form.openPrice-this.form.income*this.form.openPrice/this.form.multiple/this.form.amount;else{var t=this.form.amount*this.form.multiple;this.compute.marginCallPrice=this.form.openPrice*(1+.8*(parseFloat(this.form.holdAmount)+parseFloat(this.form.amount))/t)}},getAvailableBalance:function(){var t=this;this.getAccountUserInfo((function(){t.getAssureAsset()}))}}},E=Object(y.a)(B,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contract-right-container"},[s("div",{staticClass:"market-trade-container",style:{height:"limit"==t.tradeType?"543px":"412px"}},[s("header",[s("div",[s("span",{class:{active:"market"==t.tradeType},on:{click:function(e){t.tradeType="market"}}},[t._v(t._s(t.$t("contract.market_trading")))]),t._v(" "),s("span",{class:{active:"limit"==t.tradeType},staticStyle:{"margin-left":"20px"},on:{click:function(e){t.tradeType="limit"}}},[t._v(t._s(t.$t("contract.limit_trading")))])]),t._v(" "),s("i",{staticClass:"icon-contract-calculator",on:{click:t.handleContractCalculator}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"price-change-name"},[s("span",[t._v(t._s(t.$t("contract.market_price"))+t._s(t._f("slash")(t.symbol)))]),t._v(" "),s("span",[t._v(t._s(t.$t("contract.change")))])]),t._v(" "),s("div",{staticClass:"price-change-value",staticStyle:{"margin-top":"5px"}},[s("span",[s("span",{staticClass:"price",style:t._f("color")(t.changePercent)},[t._v(t._s(t._f("round")(t.openPrice,t.contractAssetDigitMap[t.symbol+t.assureAsset],!0)))]),t._v(" ≈ "+t._s(t.currency)+" CNY")]),t._v(" "),s("span",{staticStyle:{display:"inline-block",height:"22px","line-height":"22px",padding:"0 10px"},style:t.styleCls},[t._v(t._s(t._f("plus")(t._f("round")(100*t.changePercent,2,!0)))+"%")])]),t._v(" "),s("div",{staticClass:"select-content"},[s("el-select",{attrs:{"popper-class":"contract-trade-popper",size:"medium"},on:{change:t.handleAssureAsset},model:{value:t.assureAsset,callback:function(e){t.assureAsset=e},expression:"assureAsset"}},[s("el-tooltip",{attrs:{slot:"prefix",effect:"light","popper-class":"tooltip-popper",placement:"top",content:t.$t("contract.margin_desc")},slot:"prefix"},[s("span",{staticClass:"input-cls assureAsset-text"},[s("span",[t._v(t._s(t.$t("contract.margin_type")))]),s("span",[t._v("：")])])]),t._v(" "),t._l(t.assureAssetList,(function(t){return s("el-option",{key:t,attrs:{value:t,label:t}})}))],2),t._v(" "),s("el-select",{staticStyle:{"margin-left":"8px"},attrs:{"popper-class":"contract-trade-popper",size:"medium"},model:{value:t.multiple,callback:function(e){t.multiple=e},expression:"multiple"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.leverage"))+"：")]),t._v(" "),t._l(t.multipleList,(function(t){return s("el-option",{key:t.multiple,attrs:{value:t.multiple,label:t.multiple+"x"}})}))],2)],1),t._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:"limit"==t.tradeType,expression:"tradeType == 'limit'"}],staticClass:"input-content",attrs:{size:"medium","max-length":"25"},on:{input:t.handleRestrictPrice},model:{value:t.restrictPrice,callback:function(e){t.restrictPrice=e},expression:"restrictPrice"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("trade.price"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"10px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.symbol&&t.symbol.split("_")[1]))])]),t._v(" "),s("el-input",{staticClass:"input-content",attrs:{size:"medium","max-length":"25"},on:{input:t.handleAssureQuantity},model:{value:t.assureQuantity,callback:function(e){t.assureQuantity=e},expression:"assureQuantity"}},[s("span",{staticClass:"input-cls",attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.open_position_amount"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"10px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.assureAsset))])]),t._v(" "),s("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","font-size":"14px","margin-top":"14px"}},[s("p",{staticStyle:{color:"#dee2f0"}},[t._v("\n          "+t._s(t.$t("contract.buy_percent"))+"："+t._s(t.balanceRate)+"%\n        ")]),t._v(" "),t.token?s("p",{staticStyle:{color:"#707996"}},[t._v("\n          "+t._s(t.$t("trade.usable"))+"："+t._s(t._f("round")(t.assureAssetData.availableBalance,8))+" "+t._s(t.assureAsset)+"\n          "),t.token?s("span",{staticStyle:{cursor:"pointer",color:"#4a86f8","margin-left":"12px","user-select":"none"},on:{click:t.handleTransfer}},[t._v(t._s(t.$t("my_assets.transfer")))]):t._e()]):t._e()]),t._v(" "),s("g-slider",{attrs:{percent:t.balanceRate},on:{change:t.changeSlider}}),t._v(" "),s("div",{staticClass:"footer-btn"},[s("span",{on:{click:function(e){return t.handleSubmit("long")}}},[t._v(t._s(t.token?t.$t("contract.long"):t.$t("contract.login")))]),t._v(" "),s("span",{on:{click:function(e){return t.handleSubmit("short")}}},[t._v(t._s(t.token?t.$t("contract.short"):t.$t("contract.login")))])])],1),t._v(" "),s("el-dialog",{staticClass:"night-dialog",attrs:{visible:t.dialogProtocolVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"420px"},on:{"update:visible":function(e){t.dialogProtocolVisible=e}}},[s("div",{staticClass:"protocol-container"},[s("div",{staticClass:"p-title"},[t._v("\n          "+t._s(t.$t("contract.overnight_announcement"))+"\n        ")]),t._v(" "),s("div",{staticStyle:{"line-height":"1.5"},domProps:{innerHTML:t._s(t.$t("contract.overnight_announcement_desc"))}}),t._v(" "),s("label",{staticClass:"p-checkbox"},[s("el-checkbox",{staticStyle:{"margin-right":"8px",display:"inline-block","vertical-align":"top"},model:{value:t.checkedProtocol,callback:function(e){t.checkedProtocol=e},expression:"checkedProtocol"}}),t._v(" "),s("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._v(t._s(t.$t("contract.no_remind_again")))])],1),t._v(" "),s("div",{staticClass:"p-btn",on:{click:t.handleKnow}},[t._v("\n          "+t._s(t.$t("contract.i_know"))+"\n        ")])])]),t._v(" "),t.dialogTransferVisible?s("g-transfer",{attrs:{"dialog-visible":t.dialogTransferVisible,"asset-code":t.assureAsset,symbol:t.symbol},on:{close:t.handleTransferClose}}):t._e(),t._v(" "),s("el-dialog",{staticClass:"contract-dialog",attrs:{visible:t.dialogContractVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"680px"},on:{"update:visible":function(e){t.dialogContractVisible=e}}},[s("div",{staticClass:"title-dialog",class:t.lang,attrs:{slot:"title"},slot:"title"},[s("span",{class:{active:"income"==t.type},on:{click:function(e){return t.switchType("income")}}},[t._v(t._s(t.$t("contract.income_calculation")))]),t._v(" "),s("span",{class:{active:"close"==t.type},on:{click:function(e){return t.switchType("close")}}},[t._v(t._s(t.$t("contract.liquidation_price")))]),t._v(" "),s("span",{class:{active:"strong"==t.type},on:{click:function(e){return t.switchType("strong")}}},[t._v(t._s(t.$t("contract.mandatory_liquidation_price")))])]),t._v(" "),s("div",{staticClass:"calculator-content"},[s("div",{staticClass:"calculator-left"},[s("div",{staticClass:"c-header"},[s("span",{staticClass:"c-header-left",class:{active:"long"===t.saleType},on:{click:function(e){return t.handleType("long")}}},[t._v(t._s(t.$t("contract.long")))]),t._v(" "),s("i"),t._v(" "),s("span",{staticClass:"c-header-right",class:{active:"short"===t.saleType},on:{click:function(e){return t.handleType("short")}}},[t._v(t._s(t.$t("contract.short")))])]),t._v(" "),s("div",[s("el-form",{ref:"form",attrs:{"status-icon":!1,"hide-required-asterisk":!1,model:t.form,rules:t.rules}},[s("el-form-item",{key:"multiple",attrs:{prop:"multiple"}},[s("div",{staticClass:"label-name",staticStyle:{"margin-top":"14px"}},[t._v("\n                  "+t._s(t.$t("contract.leverage1"))+"\n                ")]),t._v(" "),s("el-input",{key:"multiple",model:{value:t.form.multiple,callback:function(e){t.$set(t.form,"multiple",e)},expression:"form.multiple"}})],1),t._v(" "),s("el-form-item",{key:"openPrice",attrs:{prop:"openPrice"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.open_position_price"))+"(USDT)\n                ")]),t._v(" "),s("el-input",{key:"openPrice",model:{value:t.form.openPrice,callback:function(e){t.$set(t.form,"openPrice",e)},expression:"form.openPrice"}})],1),t._v(" "),"income"==t.type?s("el-form-item",{key:"closePrice",attrs:{prop:"closePrice"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.liquidation_price"))+"(USDT)\n                ")]),t._v(" "),s("el-input",{key:"closePrice",model:{value:t.form.closePrice,callback:function(e){t.$set(t.form,"closePrice",e)},expression:"form.closePrice"}})],1):t._e(),t._v(" "),s("el-form-item",{key:"amount",attrs:{prop:"amount"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.open_position_margin"))+"\n                ")]),t._v(" "),s("el-input",{key:"amount",model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),"strong"==t.type?s("el-form-item",{key:"holdAmount",attrs:{prop:"holdAmount"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("contract.append_margin"))+"\n                ")]),t._v(" "),s("el-input",{key:"holdAmount",model:{value:t.form.holdAmount,callback:function(e){t.$set(t.form,"holdAmount",e)},expression:"form.holdAmount"}})],1):t._e(),t._v(" "),"close"==t.type?s("el-form-item",{key:"income",attrs:{prop:"income"}},[s("div",{staticClass:"label-name"},[t._v("\n                  "+t._s(t.$t("order.income"))+"\n                ")]),t._v(" "),s("el-input",{key:"income",model:{value:t.form.income,callback:function(e){t.$set(t.form,"income",e)},expression:"form.income"}})],1):t._e()],1)],1),t._v(" "),s("div",{staticClass:"c-btn"},[s("span",{staticClass:"c-btn-left",on:{click:t.handleReset}},[t._v(t._s(t.$t("contract.reset")))]),t._v(" "),s("span",{staticClass:"c-btn-right",on:{click:t.handleCompute}},[t._v(t._s(t.$t("contract.calculation")))])])]),t._v(" "),s("div",{staticClass:"calculator-right"},[s("div",{staticStyle:{padding:"22px"}},[s("div",{staticStyle:{"font-size":"14px","font-family":"PingFangSC-Regular,PingFang SC","font-weight":"400",color:"#0A0F1E"}},[t._v("\n              "+t._s(t.$t("contract.calculation_results"))+"：\n            ")]),t._v(" "),s("div",{staticStyle:{"font-size":"14px",color:"#7F849A","padding-top":"14px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"income"===t.type,expression:"type === 'income'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("order.income")))]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.income,4),!0)))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"income"===t.type,expression:"type === 'income'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("order.income_rate")))]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(100*t.compute.incomeRate,4),!0))+t._s(t.compute.incomeRate?"%":""))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"close"===t.type,expression:"type === 'close'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("contract.liquidation_price"))+"(USDT)")]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.closePrice,4),!0)))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"strong"===t.type,expression:"type === 'strong'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[s("span",[t._v(t._s(t.$t("contract.mandatory_liquidation_price"))+"(USDT)")]),s("span",[t._v(t._s(t._f("slash")(t._f("round")(t.compute.marginCallPrice,4),!0)))])])])])])])])],1),t._v(" "),s("gRulesUrl",{directives:[{name:"show",rawName:"v-show",value:"limit"!=t.tradeType,expression:"tradeType != 'limit'"}]})],1)}),[],!1,null,"4713f6a2",null).exports;function q(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function I(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?q(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var z={name:"MarketTrade",components:{gTransfer:g.a,gCouponList:v},mixins:[x],props:{codeType:{type:Number,default:1},contractType:{type:Number,default:2},symbol:{type:String,default:""},openPrice:{type:[String,Number],default:""},currency:{type:[String,Number],default:""},changePercent:{type:[String,Number],default:""}},data:function(){var t=this,e=function(e,s,i){s<=0?i(new Error(t.$t("contract.please_verify"))):i()};return{assureAsset:"USDT",placeOrderFormLong:{price:"",assureQuantity:"",percent:0},placeOrderFormShort:{price:"",assureQuantity:"",percent:0},multiple:"100",multipleList:[],productGroupBySymbolList:[],assureAssetList:[],accounts:[],detailedProductList:[],dialogProtocolVisible:!1,checkedProtocol:!1,dialogTransferVisible:!1,dialogContractVisible:!1,balanceRate:0,assureAssetData:{},contractAssetDigitMap:{},quantityDecimal:"",priceDecimal:"",restrictPrice:"",type:"income",form:{multiple:"",openPrice:"",closePrice:"",amount:"",holdAmount:"",income:""},rules:{multiple:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.leverage1"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],openPrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],closePrice:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.liquidation_price"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],amount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.open_position_margin"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],holdAmount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.append_margin"),trigger:"blur"}],income:[{required:!0,message:this.$t("contract.please_enter")+this.$t("order.income"),trigger:"blur"}]},saleType:"long",compute:{income:"",incomeRate:"",closePrice:"",marginCallPrice:""},tradeType:"market",baseAsset:"",marginAssetListMap:{},isSelectedCoupon:!1,useRate:[10,30,50,100],dialogCouponVisible:!1,couponList:[],requiredMargin:0}},computed:I(I({},Object(h.d)(["token","lang","clientSize"])),{},{styleCls:function(){return this.changePercent<0?{background:"rgba(250, 59, 59, 0.2)",color:"#ff4d4d"}:this.changePercent>0?{background:"rgba(32, 203, 161, 0.2)",color:"#0BB378"}:{background:"rgba(132,142,156, 0.2)",color:"rgb(132,142,156)"}}}),watch:{symbol:function(t){t&&(this.getAssureAsset(!0),this.baseAsset=t.split("_")[0],this.setTradeType("market"),this.getUserCoupons())},openPrice:function(t){"market"===this.tradeType&&(this.isSelectedCoupon?this.placeOrderFormLong.assureQuantity=this.placeOrderFormShort.assureQuantity=C.Utils.trunc(this.requiredMargin*this.multiple/t,this.quantityDecimal):(this.placeOrderFormLong.percent&&(this.placeOrderFormLong.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.multiple*this.placeOrderFormLong.percent/t/100,this.quantityDecimal)),this.placeOrderFormShort.percent&&(this.placeOrderFormShort.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.multiple*this.placeOrderFormShort.percent/t/100,this.quantityDecimal))))}},mounted:function(){this.render(),b.a.$on("available-balance",this.getAvailableBalance),b.a.$on("placeOrderForm",this.getPrice)},beforeDestroy:function(){b.a.$off("available-balance",this.getAvailableBalance),b.a.$off("placeOrderForm",this.getPrice)},methods:{getPrice:function(t){this.placeOrderFormLong.price=t,this.placeOrderFormShort.price=t},getAvailableBalance:function(){var t=this;this.getAccountUserInfo((function(){t.getAssureAsset()}))},setTradeType:function(t){this.tradeType=t,this.isSelectedCoupon=!1,this.placeOrderFormLong.price="",this.placeOrderFormLong.assureQuantity="",this.placeOrderFormLong.percent=0,this.placeOrderFormShort.price="",this.placeOrderFormShort.assureQuantity="",this.placeOrderFormShort.percent=0},changAssureQuantity:function(t,e){if("qty"===e?this["placeOrderForm"+t].assureQuantity=C.Utils.setNumberDigit(this["placeOrderForm"+t].assureQuantity,this.quantityDecimal):this["placeOrderForm"+t].price=C.Utils.setNumberDigit(this["placeOrderForm"+t].price,this.priceDecimal),this.token){var s="market"===this.tradeType?this.openPrice:this["placeOrderForm"+t].price||0,i=this["placeOrderForm"+t].assureQuantity||0,n=Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance);this["placeOrderForm"+t].percent=C.Utils.round(i*s/this.multiple/n*100,0)}},handleSelectCoupon:function(){this.token?this.dialogCouponVisible=!0:this.$router.push("/login")},handleCouponClose:function(){this.dialogCouponVisible=!1},getUserCoupons:function(){var t=this;this.token&&w.a.getUserCoupons({symbol:this.symbol}).then((function(e){var s=[];e.forEach((function(t){2===t.status&&s.push(I(I({},t),{},{expireDate:t.expireDate.slice(0,10)}))})),t.couponList=s}))},handleUse:function(t){this.multiple=t.multiple,this.couponCode=t.id,this.placeOrderFormLong.percent=this.placeOrderFormShort.percent="",this.isSelectedCoupon=!0,this.requiredMargin=parseFloat(t.value),this.dialogCouponVisible=!1,"market"===this.tradeType&&(this.placeOrderFormLong.assureQuantity=this.placeOrderFormShort.assureQuantity=C.Utils.trunc(this.requiredMargin*this.multiple/this.openPrice,this.quantityDecimal))},handleCancelCoupon:function(){this.isSelectedCoupon=!1},setMultiple:function(t){if(!this.isSelectedCoupon)if(this.multiple=t.multiple,"market"===this.tradeType){if(!this.placeOrderFormLong.percent)return;if(this.placeOrderFormLong.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.placeOrderFormLong.percent*this.multiple/this.openPrice/100,this.quantityDecimal),!this.placeOrderFormShort.percent)return;this.placeOrderFormShort.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.placeOrderFormShort.percent*this.multiple/this.openPrice/100,this.quantityDecimal)}else{if(!this.placeOrderFormLong.percent)return;if(this.placeOrderFormLong.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.placeOrderFormLong.percent*this.multiple/this.placeOrderFormLong.price/100,this.quantityDecimal),!this.placeOrderFormShort.percent)return;this.placeOrderFormShort.assureQuantity=C.Utils.trunc(Math.min(this.getMaxBalance(),this.assureAssetData.availableBalance)*this.placeOrderFormShort.percent*this.multiple/this.placeOrderFormShort.price/100,this.quantityDecimal)}}}},Q=Object(y.a)(z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"market-trade-container"},[s("div",{staticClass:"tab"},[s("span",{class:{active:"market"==t.tradeType},staticStyle:{margin:"0 24px 0 30px"},on:{click:function(e){return t.setTradeType("market")}}},[t._v(t._s(t.$t("contract.market_trading")))]),t._v(" "),s("span",{class:{active:"limit"==t.tradeType},on:{click:function(e){return t.setTradeType("limit")}}},[t._v(t._s(t.$t("contract.limit_trading")))])]),t._v(" "),s("div",{staticClass:"market-trade-con"},[s("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","border-bottom":"1px solid #28344F","padding-bottom":"13px",height:"36px"}},[s("div",{staticStyle:{"font-size":"12px",color:"#707996"}},[t._v("\n        "+t._s(t.$t("contract.leverage1"))+"："),t._l(t.multipleList,(function(e){return s("span",{key:e.id,staticClass:"multi-num",class:{active:t.multiple==e.multiple},on:{click:function(s){return t.setMultiple(e)}}},[t._v(t._s(e.multiple)+"x")])}))],2),t._v(" "),t.couponList.length?s("div",{directives:[{name:"show",rawName:"v-show",value:"limit"!=t.tradeType,expression:"tradeType != 'limit'"}],staticClass:"coupon-con"},[s("div",{staticClass:"coupon-input",on:{click:t.handleSelectCoupon}},[s("div",{staticStyle:{"font-size":"12px",color:"#dee2f0","margin-left":"5px"}},[t._v("\n            "+t._s(t.$t("contract.coupon"))+":\n          ")]),t._v(" "),s("div",[t.isSelectedCoupon?s("span",{staticStyle:{"font-size":"14px",color:"#ffc67f"}},[t._v(t._s(t.requiredMargin)+t._s(t.assureAsset)+t._s(t.multiple)+t._s(t.$t("contract.x_experience_coupon")))]):s("span",{staticStyle:{"font-size":"14px",color:"#dee2f0"}},[t._v(t._s(t.couponList.length)+t._s(t.$t("contract.piece2")))]),t._v(" "),s("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"#707996","margin-right":"11px"}})])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSelectedCoupon,expression:"isSelectedCoupon"}],staticClass:"cancel",on:{click:t.handleCancelCoupon}},[t._v(t._s(t.$t("common.cancel")))])]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"normal"===t.clientSize,expression:"clientSize === 'normal'"}],staticStyle:{display:"flex","justify-content":"space-between","margin-top":"13px"}},[s("div",{staticStyle:{width:"50%","padding-right":"37px","border-right":"1px dashed #28344F"}},[s("el-input",{staticClass:"input-content",attrs:{readonly:"limit"!=t.tradeType||t.isSelectedCoupon,disabled:"limit"!=t.tradeType,placeholder:"limit"!=t.tradeType?t.$t("contract.current_price"):t.$t("contract.please_buy_price")},on:{input:function(e){return t.changAssureQuantity("Long")}},model:{value:t.placeOrderFormLong.price,callback:function(e){t.$set(t.placeOrderFormLong,"price",e)},expression:"placeOrderFormLong.price"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_price"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("USDT")])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-input",{staticClass:"input-content",staticStyle:{"margin-top":"10px",flex:"1"},attrs:{disabled:t.isSelectedCoupon,placeholder:t.$t("contract.please_buy_qty")},on:{input:function(e){return t.changAssureQuantity("Long","qty")}},model:{value:t.placeOrderFormLong.assureQuantity,callback:function(e){t.$set(t.placeOrderFormLong,"assureQuantity",e)},expression:"placeOrderFormLong.assureQuantity"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_qty"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.baseAsset))])]),t._v(" "),s("ul",{staticClass:"use-rate"},t._l(t.useRate,(function(e){return s("li",{key:e,class:{active:t.placeOrderFormLong.percent==e},on:{click:function(s){return t.changeSlider(e,"buy",2)}}},[t._v("\n              "+t._s(e)+"%\n            ")])})),0)],1),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"17px 0","font-size":"12px",color:"#DEE2F0"}},[s("div",{staticStyle:{"font-size":"14px",color:"#707996"}},[t._v("\n            "+t._s(t.$t("my_assets.usable"))+"："+t._s(t._f("round")(t.assureAssetData.availableBalance,8))+" USDT "),s("span",{staticStyle:{color:"#4A86F8","margin-left":"5px",cursor:"pointer"},on:{click:t.handleTransfer}},[t._v(t._s(t.$t("my_assets.transfer")))])]),t._v(" "),"market"==t.tradeType?s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormLong.assureQuantity,expression:"placeOrderFormLong.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.openPrice*t.placeOrderFormLong.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")]):s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormLong.price&&t.placeOrderFormLong.assureQuantity,expression:"placeOrderFormLong.price && placeOrderFormLong.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.placeOrderFormLong.price*t.placeOrderFormLong.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")])]),t._v(" "),s("span",{staticClass:"btn long",on:{click:function(e){return t.handleSubmit("long",2)}}},[t._v(t._s(t.token?t.$t("contract.long"):t.$t("contract.login")))])],1),t._v(" "),s("div",{staticStyle:{width:"50%","margin-left":"37px"}},[s("el-input",{staticClass:"input-content",attrs:{readonly:"limit"!=t.tradeType,disabled:"limit"!=t.tradeType||t.isSelectedCoupon,placeholder:"limit"!=t.tradeType?t.$t("contract.current_price"):t.$t("contract.please_buy_price")},on:{input:function(e){return t.changAssureQuantity("Short")}},model:{value:t.placeOrderFormShort.price,callback:function(e){t.$set(t.placeOrderFormShort,"price",e)},expression:"placeOrderFormShort.price"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_price"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("USDT")])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-input",{staticClass:"input-content",staticStyle:{"margin-top":"10px",flex:"1"},attrs:{disabled:t.isSelectedCoupon,placeholder:t.$t("contract.please_buy_qty")},on:{input:function(e){return t.changAssureQuantity("Short","qty")}},model:{value:t.placeOrderFormShort.assureQuantity,callback:function(e){t.$set(t.placeOrderFormShort,"assureQuantity",e)},expression:"placeOrderFormShort.assureQuantity"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_qty"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.baseAsset))])]),t._v(" "),s("ul",{staticClass:"use-rate"},t._l(t.useRate,(function(e){return s("li",{key:e,class:{active:t.placeOrderFormShort.percent==e},on:{click:function(s){return t.changeSlider(e,"sell",2)}}},[t._v("\n              "+t._s(e)+"%\n            ")])})),0)],1),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"17px 0","font-size":"12px",color:"#DEE2F0"}},[s("div",{staticStyle:{"font-size":"14px",color:"#707996"}},[t._v("\n            "+t._s(t.$t("my_assets.usable"))+"："+t._s(t._f("round")(t.assureAssetData.availableBalance,8))+" USDT "),s("span",{staticStyle:{color:"#4A86F8","margin-left":"5px",cursor:"pointer"},on:{click:t.handleTransfer}},[t._v(t._s(t.$t("my_assets.transfer")))])]),t._v(" "),"market"==t.tradeType?s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormShort.assureQuantity,expression:"placeOrderFormShort.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.isSelectedCoupon?t.requiredMargin:t.openPrice*t.placeOrderFormShort.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")]):s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormShort.price&&t.placeOrderFormShort.assureQuantity,expression:"placeOrderFormShort.price && placeOrderFormShort.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.placeOrderFormShort.price*t.placeOrderFormShort.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")])]),t._v(" "),s("span",{staticClass:"btn short",on:{click:function(e){return t.handleSubmit("short",2)}}},[t._v(t._s(t.token?t.$t("contract.short"):t.$t("contract.login")))])],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"small"===t.clientSize,expression:"clientSize === 'small'"}],staticStyle:{display:"flex","flex-direction":"column","margin-top":"13px"}},[s("el-input",{staticClass:"input-content",attrs:{readonly:"limit"!=t.tradeType,disabled:"limit"!=t.tradeType||t.isSelectedCoupon,placeholder:"limit"!=t.tradeType?t.$t("contract.current_price"):t.$t("contract.please_buy_price")},on:{input:function(e){return t.changAssureQuantity("Long")}},model:{value:t.placeOrderFormLong.price,callback:function(e){t.$set(t.placeOrderFormLong,"price",e)},expression:"placeOrderFormLong.price"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_price"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("USDT")])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-input",{staticClass:"input-content",staticStyle:{"margin-top":"10px",flex:"1"},attrs:{disabled:t.isSelectedCoupon,placeholder:t.$t("contract.please_buy_qty")},on:{input:function(e){return t.changAssureQuantity("Long","qty")}},model:{value:t.placeOrderFormLong.assureQuantity,callback:function(e){t.$set(t.placeOrderFormLong,"assureQuantity",e)},expression:"placeOrderFormLong.assureQuantity"}},[s("span",{staticClass:"input-cls",staticStyle:{"margin-left":"15px"},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.$t("contract.buy_qty"))+"：")]),t._v(" "),s("span",{staticClass:"input-cls",staticStyle:{"margin-right":"15px","font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.baseAsset))])]),t._v(" "),s("ul",{staticClass:"use-rate"},t._l(t.useRate,(function(e){return s("li",{key:e,class:{active:t.placeOrderFormLong.percent==e},on:{click:function(s){return t.changeSlider(e,"buy",2)}}},[t._v("\n            "+t._s(e)+"%\n          ")])})),0)],1),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"17px 0","font-size":"12px",color:"#DEE2F0"}},[s("div",{staticStyle:{"font-size":"14px",color:"#707996"}},[t._v("\n          "+t._s(t.$t("my_assets.usable"))+"："+t._s(t._f("round")(t.assureAssetData.availableBalance,8))+" USDT "),s("span",{staticStyle:{color:"#4A86F8","margin-left":"5px",cursor:"pointer"},on:{click:t.handleTransfer}},[t._v(t._s(t.$t("my_assets.transfer")))])]),t._v(" "),"market"==t.tradeType?s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormLong.assureQuantity,expression:"placeOrderFormLong.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.isSelectedCoupon?t.requiredMargin:t.openPrice*t.placeOrderFormLong.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")]):s("span",{directives:[{name:"show",rawName:"v-show",value:t.placeOrderFormLong.price&&t.placeOrderFormLong.assureQuantity,expression:"placeOrderFormLong.price && placeOrderFormLong.assureQuantity"}],staticStyle:{color:"#DEE2F0"}},[t._v(t._s(t.$t("contract.must_margin"))+"："+t._s(t._f("round")(t.placeOrderFormLong.price*t.placeOrderFormLong.assureQuantity/t.multiple,t.marginAssetListMap.USDT,!0))+" USDT")])]),t._v(" "),s("div",{staticStyle:{display:"flex","flex-direction":"row"}},[s("span",{staticClass:"btn long",on:{click:function(e){return t.handleSubmit("long",2)}}},[t._v(t._s(t.token?t.$t("contract.long"):t.$t("contract.login")))]),t._v(" "),s("span",{staticClass:"btn short",staticStyle:{"margin-left":"24px"},on:{click:function(e){return t.handleSubmit("short",2)}}},[t._v(t._s(t.token?t.$t("contract.short"):t.$t("contract.login")))])])],1)]),t._v(" "),t.dialogTransferVisible?s("g-transfer",{attrs:{"dialog-visible":t.dialogTransferVisible,"asset-code":t.assureAsset,symbol:t.symbol},on:{close:t.handleTransferClose}}):t._e(),t._v(" "),s("g-coupon-list",{attrs:{"dialog-visible":t.dialogCouponVisible,"coupon-list":t.couponList},on:{close:t.handleCouponClose,ok:t.handleUse}})],1)}),[],!1,null,"4798b1a6",null).exports;function M(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}var N={name:"Handicap",props:{codeType:{type:Number,default:1},symbol:{type:String,default:""},openPrice:{type:[String,Number],default:""},currency:{type:[String,Number],default:""},changePercent:{type:[String,Number],default:""},marketConfig:{type:Object,default:function(){return{}}}},data:function(){return{type:"handicap",currentTicker:{},orderbook:{longs:[],shorts:[]},marketTrades:[],baseAsset:"",quantityDecimal:"",priceDecimal:"",lastTradePrice:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?M(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(h.d)(["detailedProductList"])),watch:{symbol:function(t,e){var s=this;e&&(C.Utils.busFutures.unsubscribe(["orderbook",e],this.processWsMessage),C.Utils.busFutures.unsubscribe(["trade",e],this.processWsMessage),this.render()),t&&(C.Utils.busFutures.subscribe(["orderbook",t],this.processWsMessage),C.Utils.busFutures.subscribe(["trade",t],this.processWsMessage),this.baseAsset=t.split("_")[0]);var i=this.detailedProductList.find((function(t){return t.symbol===s.symbol&&"USDT"===t.marginAsset}))||{};this.quantityDecimal=i.quantityDecimal,this.priceDecimal=i.priceDecimal},detailedProductList:{handler:function(t){var e=this,s=t.find((function(t){return t.symbol===e.symbol&&"USDT"===t.marginAsset}))||{};this.quantityDecimal=s.quantityDecimal,this.priceDecimal=s.priceDecimal},deep:!0}},mounted:function(){this.render()},beforeDestroy:function(){C.Utils.busFutures.unsubscribe(["orderbook",this.symbol],this.processWsMessage),C.Utils.busFutures.unsubscribe(["trade",this.symbol],this.processWsMessage)},methods:{getCurrencyFormat:f.a.getters.getCurrencyFormat,render:function(){var t={data:[]};this.lastTradePrice="",this.orderbook.longs=this.prepareOrderBook(t),this.orderbook.shorts=this.prepareOrderBook(t),this.marketTrades=this.prepareMarketTrades()},processWsMessage:function(t){if("orderbook"===t.topic)"long"===t.side?this.orderbook.longs=this.prepareOrderBook(t):this.orderbook.shorts=this.prepareOrderBook(t);else if("trade"===t.topic)if(t.data.length>1){var e=[];t.data.forEach((function(t){e.unshift(t)})),this.lastTradePrice=e[0][2],this.marketTrades=this.prepareMarketTrades(e)}else if(1===t.data.length){this.lastTradePrice=t.data[0][2],this.marketTrades.unshift(t.data[0])>18&&this.marketTrades.pop()}},prepareOrderBook:function(t){var e=[],s=[];t.data=t.data.slice(0,8);var i=0;t.data.forEach((function(e,n){i+=parseFloat(e[1]),s["short"===t.side?"unshift":"push"]({price:e[0],qty:e[1],w:e[2],width:(2.77*e[2]).toFixed(4),sum:i})}));for(var n=8;n>s.length;n--)e.push({price:"-",qty:"-"});return s="short"===t.side?e.concat(s):s.concat(e)},prepareMarketTrades:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length,s=18;s>e;s--)t.push(["-","-","-","-"]);return t},handlePlaceOrderForm:function(t){"-"!==t&&b.a.$emit("placeOrderForm",C.Utils.round(t,this.priceDecimal,!0))}}};function V(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function R(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?V(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):V(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var G={components:{gIndexMarketTrade:T,gSimulatedMarketTrade:E,gPerpetualMarketTrade:Q,gHandicap:Object(y.a)(N,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"handicap-container"},[s("header",[s("span",{class:{active:"handicap"==t.type},staticStyle:{margin:"0 28px 0 15px"},on:{click:function(e){t.type="handicap"}}},[t._v(t._s(t.$t("trade.market")))]),t._v(" "),s("span",{class:{active:"latest"==t.type},on:{click:function(e){t.type="latest"}}},[t._v(t._s(t.$t("trade.market_trades")))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"handicap"==t.type,expression:"type == 'handicap'"}],staticClass:"order-table el-table trade-table el-table--fit el-table--scrollable-y el-table--enable-row-hover el-table--enable-row-transition el-table--small",staticStyle:{height:"602px"}},[s("div",{staticClass:"el-table__header-wrapper",staticStyle:{"padding-top":"8px"}},[s("table",{staticClass:"el-table__header market_sell",staticStyle:{width:"300px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t._m(0),t._v(" "),s("thead",[s("tr",[s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"left","margin-left":"4px"}},[t._v("\n                "+t._s(t.$t("trade.price"))+"(USDT)\n              ")])]),t._v(" "),s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"right"}},[t._v("\n                "+t._s(t.$t("trade.quantity"))+"("+t._s(t.baseAsset)+")\n              ")])]),t._v(" "),s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"right","margin-right":"5px","padding-right":"15px"}},[t._v("\n                "+t._s(t.$t("trade.sum"))+"("+t._s(t.baseAsset)+")\n              ")])])])])])]),t._v(" "),s("div",{ref:"asksOrderCon",staticClass:"el-table__body-wrapper"},[s("table",{ref:"askTable",staticClass:"el-table__body market_sell",staticStyle:{width:"300px",bottom:"0"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("col",{attrs:{width:"100"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("tbody",t._l(t.orderbook.shorts,(function(e,i){return s("tr",{key:"b"+e.qty+e.price+i,staticClass:"el-table__row",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.handlePlaceOrderForm(e.price)}}},[s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"left"}},[s("span",{staticClass:"c-red",staticStyle:{"margin-left":"4px"}},[t._v(t._s(t._f("round")(e.price,t.priceDecimal,!0)))])])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right"}},[t._v("\n                "+t._s(t._f("round")(e.qty,t.quantityDecimal,!0))+"\n              ")])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right","margin-right":"5px"}},[t._v("\n                "+t._s(t._f("round")(e.sum,t.quantityDecimal,!0))+"\n              ")]),t._v(" "),s("div",{staticStyle:{position:"absolute",right:"0",top:"0",background:"rgba(250,59,59, 0.1)",height:"100%"},style:{width:(e.width||0)+"px"}})])])})),0)])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column",height:"64px","font-size":"18px",margin:"0 12px","border-top":"1px solid #0A0F1E","border-bottom":"1px solid #0A0F1E"}},[s("div",{staticStyle:{display:"flex","justify-content":"space-between","flex-direction":"row","font-size":"12px","font-family":"PingFangSC-Regular,PingFang SC","font-weight":"400",color:"rgba(112,121,150,1)"}},[s("span",[t._v(t._s(t.$t("index.market_last_price")))]),t._v(" "),s("span",[t._v(t._s(t.$t("contract.index_price")))])]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-between","flex-direction":"row","margin-top":"5px"}},[s("span",{staticStyle:{"font-size":"16px","font-family":"PingFangSC-Medium,PingFang SC","font-weight":"500"},style:t._f("color")(t.changePercent)},[t._v(t._s(t._f("round")(t.lastTradePrice||t.openPrice,t.priceDecimal,!0)))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px","font-family":"PingFangSC-Medium,PingFang SC","font-weight":"500",color:"rgba(222,226,240,1)"}},[t._v(t._s(t._f("round")(t.openPrice,t.priceDecimal,!0)))])])]),t._v(" "),s("div",{staticClass:"el-table__body-wrapper"},[s("table",{ref:"bidTable",staticClass:"el-table__body market_buy",staticStyle:{width:"300px",top:"0"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t._m(1),t._v(" "),s("tbody",t._l(t.orderbook.longs,(function(e,i){return s("tr",{key:"a"+e.qty+e.price+i,staticClass:"el-table__row",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.handlePlaceOrderForm(e.price)}}},[s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"left"}},[s("span",{staticClass:"c-green",staticStyle:{"margin-left":"4px"}},[t._v(t._s(t._f("round")(e.price,t.priceDecimal,!0)))])])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right"}},[t._v("\n                "+t._s(t._f("round")(e.qty,t.quantityDecimal,!0))+"\n              ")])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right","margin-right":"5px"}},[t._v("\n                "+t._s(t._f("round")(e.sum,t.quantityDecimal,!0))+"\n              ")]),t._v(" "),s("div",{staticStyle:{position:"absolute",right:"0",top:"0",background:"rgba(11,179,120, 0.1)",height:"100%"},style:{width:(e.width||0)+"px"}})])])})),0)])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"latest"==t.type,expression:"type == 'latest'"}],staticClass:"latest-table order-table el-table trade-table el-table--fit el-table--scrollable-y el-table--enable-row-hover el-table--enable-row-transition el-table--small",staticStyle:{height:"595px"}},[s("div",{staticClass:"el-table__header-wrapper",staticStyle:{"padding-top":"10px"}},[s("table",{staticClass:"el-table__header latest-trades",staticStyle:{width:"300px"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t._m(2),t._v(" "),s("thead",[s("tr",[s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"left","margin-left":"4px"}},[t._v("\n                "+t._s(t.$t("trade.date"))+"\n              ")])]),t._v(" "),s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"right"}},[t._v("\n                "+t._s(t.$t("trade.price"))+"(USDT)\n              ")])]),t._v(" "),s("th",{staticClass:"is-leaf"},[s("div",{staticClass:"cell c-gray2",staticStyle:{"text-align":"right","margin-right":"5px","padding-right":"15px"}},[t._v("\n                "+t._s(t.$t("trade.quantity"))+"("+t._s(t.baseAsset)+")\n              ")])])])])])]),t._v(" "),s("div",{ref:"asksOrderCon",staticClass:"el-table__body-wrapper"},[s("table",{ref:"askTable",staticClass:"el-table__body latest-trades",staticStyle:{width:"300px",bottom:"0"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("col",{attrs:{width:"100"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("tbody",t._l(t.marketTrades,(function(e,i){return s("tr",{key:"b"+e[2]+e[3]+i,staticClass:"el-table__row",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.handlePlaceOrderForm(e[2])}}},[s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"left"}},[s("span",{class:["short"==e[0]?"c-red":"c-green"],staticStyle:{"margin-left":"4px"}},[t._v(t._s(e[1]))])])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right"}},[t._v("\n                "+t._s(t._f("round")(e[2],t.priceDecimal,!0))+"\n              ")])]),t._v(" "),s("td",{staticStyle:{"border-bottom":"1px solid #0D1326"}},[s("div",{staticClass:"cell",staticStyle:{"text-align":"right","margin-right":"5px"}},[t._v("\n                "+t._s(t._f("round")(e[3],t.quantityDecimal,!0))+"\n              ")])])])})),0)])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("colgroup",[s("col",{attrs:{width:"100"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("col",{attrs:{width:"120"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("colgroup",[s("col",{attrs:{width:"100"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("col",{attrs:{width:"120"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("colgroup",[s("col",{attrs:{width:"100"}}),t._v(" "),s("col",{attrs:{width:"120"}}),t._v(" "),s("col",{attrs:{width:"120"}})])}],!1,null,"b9c79cd4",null).exports},props:{marketConfig:{type:Object,default:function(){return{}}},type:{type:String,default:"contract"},codeType:{type:Number,default:1},contractType:{type:Number,default:1}},data:function(){return{widget:null,isFullScreen:!1,buttonCls:"15",assetDetail:{},loadingAssetDetail:!1,showAssetDetail:!1,datafeeds:new m.a(this),klineSubscription:{period:"15m",symbol:null},cacheData:{},lastTime:null,getBarTimer:null,market:{klines:[]},assureAsset:"USDT",klineStartTimeObj:{},isMoreKlineObj:{},cacheDataLenObj:{}}},computed:R({},Object(h.d)(["lang","clientSize","theme","tradingLayer","contractPairAssetDigitMap","authKey"])),watch:{marketConfig:{handler:function(){this.initSubscriptions(),this.klineStartTimeObj={},this.isMoreKlineObj={},this.cacheDataLenObj={}},deep:!0},isFullScreen:function(){this.changeFullscreen()}},mounted:function(){this.render(),window.addEventListener("resize",this.setFullScreen)},beforeDestroy:function(){try{window.removeEventListener("resize",this.setFullScreen),this.getBarTimer&&clearTimeout(this.getBarTimer),d.a.unsubscribe([this.klineSubscription.symbol,this.klineSubscription.period],this.processMessage),d.a.unsubscribe(["period",this.marketConfig.symbol,this.klineSubscription.period,this.klineStartTimeObj[this.marketConfig.symbol+"-"+this.klineSubscription.period]],this.appendMessage),this.widget&&(this.widget.remove(),this.widget=null)}catch(t){}},methods:R(R(R({render:function(){this.initWidget()}},{getCurrencyFormat:f.a.getters.getCurrencyCNYFormat}),Object(h.c)(["setTheme"])),{},{openLineType:function(){this.widget.chart().executeActionById("chartProperties")},openInsertIndicator:function(){this.widget.chart().executeActionById("insertIndicator")},changeTheme:function(t){this.setTheme(t)},processMessage:function(t){t.symbol===this.marketConfig.symbol&&"price"!==t.type&&"period"!==t.type&&(this.onMessage(t.klines),this.market=t)},appendMessage:function(t){t.symbol===this.marketConfig.symbol&&"period"===t.type&&this.onAppendMessage(t.klines)},initWidget:function(){if(!this.widget){var t=u.a.get("kline_interval_"+this.type)||"15";this.buttonCls=t,this.widget=new p.widget({symbol:"-",interval:t,toolbar_bg:"#141929",container_id:"trade-view",datafeed:this.datafeeds,autosize:!0,library_path:"/static/tradeview/charting_library/",timezone:"Asia/Shanghai",locale:this.lang,debug:!1,disabled_features:["header_widget_dom_node","header_symbol_search","header_undo_redo","header_saveload","header_settings","context_menus","display_market_status","border_around_the_chart","remove_library_container_border","legend_context_menu","edit_buttons_in_legend","timeframes_toolbar","save_chart_properties_to_local_storage","header_interval_dialog_button","header_screenshot","chart_crosshair_menu","create_volume_indicator_by_default_once","timezone_menu","use_localstorage_for_settings","volume_force_overlay","adaptive_logo","show_chart_property_page","symbol_search_hot_key","header_chart_type"],studies_overrides:{"volume.show ma":!1,"volume.volume.color.1":"#0bb378","volume.volume.color.0":"#fa3b3b","volume.volume.transparency":1,"volume.options.showStudyArguments":!1,"macd.histogram.plottype":"columns","macd.histogram.color.1":"#0bb378","macd.histogram.color.0":"#fa3b3b"},overrides:{volumePaneSize:"medium","scalesProperties.backgroundColor":"#ffffff","scalesProperties.fontSize":11,"scalesProperties.lineColor":"#4A5780","scalesProperties.textColor":"#4A577F","paneProperties.background":"#0d1326","paneProperties.vertGridProperties.color":"rgba(255,255,255,0.1)","paneProperties.horzGridProperties.color":"rgba(255,255,255,0.1)","paneProperties.topMargin":10,"mainSeriesProperties.candleStyle.upColor":"#0bb378","mainSeriesProperties.candleStyle.downColor":"#fa3b3b","mainSeriesProperties.candleStyle.borderUpColor":"#0bb378","mainSeriesProperties.candleStyle.borderDownColor":"#fa3b3b","mainSeriesProperties.areaStyle.color1":"#3c707b","mainSeriesProperties.areaStyle.color2":"#0f2431","mainSeriesProperties.areaStyle.linecolor":"#4A5780"},enabled_features:["keep_left_toolbar_visible_on_small_screens","hide_last_na_study_output","hide_left_toolbar_by_default"],custom_css_url:"chart.css"}),this.widget.onChartReady(this.refreshTVChart)}},refreshTVChart:function(){var t=this.widget.chart();t.createStudy("Moving Average",!1,!1,[5],null,{"Plot.color":"#F6DC93","Plot.linewidth":2}),t.createStudy("Moving Average",!1,!1,[10],null,{"Plot.color":"#61D1C0","Plot.linewidth":2}),t.createStudy("Moving Average",!1,!1,[30],null,{"Plot.color":"#CB92FE","Plot.linewidth":2})},initSubscriptions:function(){if(this.initWidget(),this.marketConfig&&this.marketConfig.symbol){var t=u.a.get("kline_interval_"+this.type)||15,e=this.marketConfig.symbol.replace("_","/");this.widget.setSymbol(e,t)}},unSubscribe:function(t,e){if(t){d.a.unsubscribe([t,e],this.processMessage);var s="".concat(t,"-").concat(e);this.cacheData[s]&&delete this.cacheData[s]}},convertToLocalPeriod:function(t){return t<60?"".concat(t,"m"):t>=60?"".concat(t/60,"h"):1===t.length?"1"+t.toLowerCase():t.toLowerCase()},convertToTVPeriod:function(t){return t.endsWith("m")?t.substring(0,t.length-1):t.endsWith("h")?60*parseInt(t.substring(0,t.length-1))+"":t.toUpperCase()},onAppendMessage:function(t){var e=this,s="".concat(this.marketConfig.symbol,"-").concat(this.klineSubscription.period);this.isMoreKlineObj[s]=!!t.length,this.cacheDataLenObj[s]=this.cacheData[s].length,t&&t[0].time>=this.klineStartTimeObj[s]||(this.klineStartTimeObj[s]=t[t.length-1].time,t&&t.forEach((function(t){e.cacheData[s].unshift({time:t.time,open:t.open,high:t.high,low:t.low,close:t.close,volume:t.vol||0})})),this.datafeeds.updateData())},onMessage:function(t){var e=this;return a()(n.a.mark((function s(){var i,r,a,o,c;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:i="".concat(e.marketConfig.symbol,"-").concat(e.klineSubscription.period),r=e.cacheData[i],t.length>1&&(a=[],t&&t.forEach((function(t){a.push({time:t.time,open:t.open,high:t.high,low:t.low,close:t.close,volume:t.vol||0})}),e),e.cacheData[i]=a,a.length>0?e.lastTime=a[a.length-1].time:e.lastTime=(new Date).getTime()),t&&t.length>0&&r&&r.length&&(o=t[0],(c={time:o.time,open:o.open,high:o.high,low:o.low,close:o.close,volume:o.vol||0}).time===e.lastTime?r[e.cacheData[i].length-1]=c:c.time>e.lastTime&&(r[e.cacheData[i].length]=c,e.lastTime=o.time)),e.klineStartTimeObj[i]=((e.cacheData[i]||[])[0]||{}).time,e.datafeeds.updateData();case 6:case"end":return s.stop()}}),s)})))()},getBars:function(t,e,s,i,n,r,a){var o=this;if(this.marketConfig.symbol){this.getBarTimer&&clearTimeout(this.getBarTimer);var c=this.convertToLocalPeriod(e),l="".concat(this.marketConfig.symbol,"-").concat(c);if(!1!==a||"BTC_USDT"!==this.marketConfig.symbol&&"ETH_USDT"!==this.marketConfig.symbol||d.a.subscribe(["period",this.marketConfig.symbol,c,this.klineStartTimeObj[l]],this.appendMessage),this.cacheData[l]){var p=[];if(!1!==a||"BTC_USDT"!==this.marketConfig.symbol&&"ETH_USDT"!==this.marketConfig.symbol?this.cacheData[l].forEach((function(t){t.time>=1e3*s&&(!0===a||t.time<=1e3*i)&&p.push(t)})):p=[].concat(this.cacheData[l]),void 0===a&&p.length>2&&(p=p.slice(-2)),this.cacheDataLenObj[l]===this.cacheData[l].length&&!this.isMoreKlineObj[l])return void n([],{noData:!0});n(p)}else c===this.klineSubscription.period&&this.marketConfig.symbol===this.klineSubscription.symbol||(this.unSubscribe(this.klineSubscription.symbol,this.klineSubscription.period),this.klineSubscription={symbol:this.marketConfig.symbol,period:c},d.a.subscribe([this.marketConfig.symbol,c],this.processMessage),u.a.set("kline_interval_"+this.type,e)),this.getBarTimer=setTimeout((function(){o.getBars(t,e,s,i,n,r,a)}),50)}else n([],{noData:!0})},getSymbol:function(){var t=this.marketConfig.symbol.replace("_","/");return{name:t,pricescale:Math.pow(10,this.contractPairAssetDigitMap[this.marketConfig.symbol+this.assureAsset]),ticker:this.marketConfig.symbol,description:t,supported_resolutions:["1","3","5","15","30","60","120","240","360","720","1D","1W","1M"]}},changePeriod:function(t,e,s){if(this.buttonCls=e,"BTC_USDT"===this.marketConfig.symbol||"ETH_USDT"===this.marketConfig.symbol)for(var i in this.widget.chart().executeActionById("chartReset"),this.isMoreKlineObj)i!=="".concat(this.marketConfig.symbol,"-").concat(e)&&(this.isMoreKlineObj[i]=!0);if(3===s)return this.widget.chart().setChartType(3),void this.widget.chart().setResolution("1S"===e?"1":e);this.widget.chart().setChartType(1),this.widget.chart().setResolution(e)},checkFull:function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1},toggleFullScreen:function(){this.isFullScreen=!this.isFullScreen},changeFullscreen:function(){this.isFullScreen?this.requestFullScreen():this.exitFullscreen()},setFullScreen:function(){this.checkFull()||(this.isFullScreen=!1)},requestFullScreen:function(){var t=this.$refs["k-container"];this.$refs["trade-view"].style="height: calc(100% - 30px);",t.className="isFullscreen";var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&document.body.msRequestFullscreen(),document.body.parentNode.style.overflowY="hidden"},exitFullscreen:function(){this.$refs["k-container"].className="";var t=document;t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen?document.msExitFullscreen():t.exitFullscreen&&t.exitFullscreen(),document.body.parentNode.style.overflowY="auto"},setAssureAsset:function(t){this.assureAsset=t},getContractName:function(t,e,s){return C.Utils.getContractName(this.codeType,this.contractType)(t,e,s)}})},H=Object(y.a)(G,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"kline-chart box-card",attrs:{"body-style":"padding: 0;background"}},[s("template",{slot:"header"},[s("div",{staticClass:"ticker-header"},[s("div",{staticClass:"ticker-item",staticStyle:{"margin-right":"37px","font-size":"18px"}},[t._v("\n        "+t._s(t._f("slash")(t.marketConfig.symbol))+" "+t._s(t.getContractName(t.$t("contract.index"),t.$t("contract.perpetual"),t.$t("contract.simulated")))+"\n      ")]),t._v(" "),s("div",{staticClass:"ticker-item",staticStyle:{"min-width":"120px"}},[s("div",{staticStyle:{"font-size":"16px"},style:t._f("color")(t.market.changePercent)},[t._v("\n          "+t._s(t._f("round")(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close,t.contractPairAssetDigitMap[t.marketConfig.symbol+t.assureAsset],!0))+"\n        ")]),t._v(" "),s("div",[t._v("≈ "+t._s(t.getCurrencyFormat(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close))+" CNY")])]),t._v(" "),s("div",{staticClass:"ticker-item",staticStyle:{"min-width":"70px","margin-left":"15px"}},[s("span",{staticClass:"ticker-label"},[t._v(t._s(t.$t("contract.change")))]),t._v(" "),s("div",[s("span",{style:t._f("color")(t.market.changePercent)},[t._v("\n            "+t._s(t._f("plus")(t._f("round")(100*t.market.changePercent,2,!0)))+"%\n          ")])])]),t._v(" "),s("div",{staticClass:"ticker-item",staticStyle:{"min-width":"70px","margin-left":"15px"}},[s("span",{staticClass:"ticker-label"},[t._v(t._s(t.$t("contract.high")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("round")(t.market.dayHigh,t.contractPairAssetDigitMap[t.marketConfig.symbol+t.assureAsset])))])])]),t._v(" "),s("div",{staticClass:"ticker-item",staticStyle:{"min-width":"70px","margin-left":"15px"}},[s("span",{staticClass:"ticker-label"},[t._v(t._s(t.$t("contract.low")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("round")(t.market.dayLow,t.contractPairAssetDigitMap[t.marketConfig.symbol+t.assureAsset])))])])])])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{ref:"k-container",attrs:{id:"k-container"}},[s("div",{staticClass:"mod-head"},[s("div",{staticClass:"period-actions"},[s("button",{class:{cur:"1S"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"1S",3)}}},[t._v("\n            Time\n          ")]),t._v(" "),s("button",{class:{cur:"1"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"1")}}},[t._v("\n            1m\n          ")]),t._v(" "),s("button",{class:{cur:"3"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"3")}}},[t._v("\n            3m\n          ")]),t._v(" "),s("button",{class:{cur:"5"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"5")}}},[t._v("\n            5m\n          ")]),t._v(" "),s("button",{class:{cur:"15"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"15")}}},[t._v("\n            15m\n          ")]),t._v(" "),s("button",{class:{cur:"30"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"30")}}},[t._v("\n            30m\n          ")]),t._v(" "),s("button",{class:{cur:"60"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"60")}}},[t._v("\n            1H\n          ")]),t._v(" "),s("button",{class:{cur:"120"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"120")}}},[t._v("\n            2H\n          ")]),t._v(" "),s("button",{class:{cur:"240"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"240")}}},[t._v("\n            4H\n          ")]),t._v(" "),s("button",{class:{cur:"360"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"360")}}},[t._v("\n            6H\n          ")]),t._v(" "),s("button",{class:{cur:"1D"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"1D")}}},[t._v("\n            1D\n          ")]),t._v(" "),s("button",{class:{cur:"1W"===t.buttonCls},on:{click:function(e){return t.changePeriod(t.marketConfig.symbol,"1W")}}},[t._v("\n            1W\n          ")])]),t._v(" "),s("div",{staticClass:"chart-actions"},[s("button",{staticClass:"trading-icon indicator",on:{click:t.openInsertIndicator}},[s("div",{staticClass:"tips"},[t._v("\n              指标\n            ")])]),t._v(" "),s("button",{staticClass:"trading-icon chattype",on:{click:t.openLineType}},[s("div",{staticClass:"tips"},[t._v("\n              图标类型\n            ")])]),t._v(" "),s("button",{staticClass:"trading-icon fullscreen",on:{click:t.toggleFullScreen}},[s("div",{staticClass:"tips fullscreenhide"},[t._v("\n              全屏\n            ")]),t._v(" "),s("div",{staticClass:"tips fullscreenshow"},[t._v("\n              退出全屏\n            ")])])])]),t._v(" "),s("div",{ref:"trade-view",style:{height:2==t.contractType?"314px":"520px"},attrs:{id:"trade-view"}}),t._v(" "),2!=t.contractType?s("div",{directives:[{name:"show",rawName:"v-show",value:t.tradingLayer,expression:"tradingLayer"}],staticClass:"layer",staticStyle:{position:"absolute",left:"250px",top:"78px",right:"410px",height:"620px",background:"transparent"}}):t._e(),t._v(" "),2==t.contractType?s("g-perpetual-market-trade",{attrs:{symbol:t.marketConfig.symbol,"open-price":t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close,currency:t.getCurrencyFormat(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close)}}):t._e()],1),t._v(" "),s("div",[2==t.contractType?s("g-handicap",{attrs:{"market-config":t.marketConfig,symbol:t.marketConfig.symbol,"open-price":t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close,currency:t.getCurrencyFormat(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close),"change-percent":t.market.changePercent}}):2===t.codeType?s("g-simulated-market-trade",{attrs:{"code-type":t.codeType,symbol:t.marketConfig.symbol,"open-price":t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close,currency:t.getCurrencyFormat(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close),"change-percent":t.market.changePercent},on:{setAssureAsset:t.setAssureAsset}}):s("g-index-market-trade",{attrs:{"code-type":t.codeType,symbol:t.marketConfig.symbol,"open-price":t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close,currency:t.getCurrencyFormat(t.market.klines&&t.market.klines[t.market.klines.length-1]&&t.market.klines[t.market.klines.length-1].close),"change-percent":t.market.changePercent},on:{setAssureAsset:t.setAssureAsset}})],1)])],2)}),[],!1,null,"cb12a830",null);e.a=H.exports},W8MJ:function(t,e){function s(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}},WkPL:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}},ZhPi:function(t,e,s){var i=s("WkPL");t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}},dH5j:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAACoCAMAAAB68uTdAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFFTuq/eFYW2qRSmG79Zege4nfDzSqX3b2X3X2aoX2GT6vZYP7v1XE96C89LYzx2Pg96C+XnryKljDGjuhyYtl9aG9vlTLVG/k+91U+7FsNmLI64i74XOk74ii34RwzIhq+tFG4HKrw13g+8k99706yWPG+a/R7Ia3+sOM+ck7+Kpl5oOpGECv5XSr4Xer9Zy+WWrz+stA8JG6/b/b+cI66YSzZIL7+MY67Yi39Z29W3Pz974764S24HGq+Lt+8KFI+rFt7Z9f+MU48aBf+sw58ZO+JFK19qTIs0bO/LrY+bBpVmvuH021+bmDW3Dw97VB9atf9Z7D86BG9qDG8ZW/+sKLV2byf5r9cIn5W3H0759J+rRvY4H78KJHYXj286BEVXrS9qxg969m859L9rRwEjKr8ZdC9Z9G8JRF9I5M24lh06tXAAAA6onEjX9MmG6LVS2My7lcSFZ4TWfl0MJjenp2on+ZEy6G/cB2uE6UvqVXJz+IzWuAP1qgjHa7wJSH7bNfU2mwUWSTtp2oDyJweYHbZ2+D231Bw7Rh7KBj4qZy4YWPlo9r9JmUzW7fqDmslpbN/a+qz3Pt17ZH1nWlyGC6KUmjzGbM/bNq1IlZ8aJ4r0G82JJx/rXQ85Gw/sZq96pH8J0u76FFzolu+8Bi+LJNu3BP7II3do/8x2Hx2KCH4pxW/eRY9rszb4f6fpj8vVTet0zb764/7qkzwXpa8ag6+MM1+r5Y+6bK8ZBFUHnY+sFb+Lh7+b6F9p1R87Iy85e+/cliT3nZxIFkX3P4+blSEjSxv1jl8aNMXG72/N5R/MZe9qZXJFi5w13r86ZSGD+sK1rFFDepK1zHPWrQEDGl/bZy+tA9+a9n/sxwx4VoUnraYXr6J1bCIUy6JFG++tJC+8OM+cw696pa96xf+K5k87NE+9ZGZH/7+sSP+9pM9p/Fgp3++7JuZoX9GkCxHUiz+rFqFzuuFz2vGECwFDatFTmuGkOxI1W4HUu0IE+2IVG2H021EjOsIlS3HEazOCk0HgAAAG10Uk5T163FlLnklbuWp+TD0tL3v+fZ5P2+Uf1z9+itYnP+cuWGieJWla2ZsszjqkNUtFVyQnwimW4zPtMWhzGqnJrMzdCBwFn0tFO1/bPJI54zFkXOsT+amGZPTU0KTmZOZk00/mYzKk22FiAPCAQBAE8GqL8AABgUSURBVHja7Z0JXBT32cft8abJ2+bom6jxigcaghRRBBFB5TJEqFwSw73C0p3ZHd73bfv2yt0kTRM1NlpvJIhyeCBouQTl8NaQrVgbF2pMguyuKGahKGLThtrn+f9ndmf2AHbZ5S2fT34zO7szC7vfefb3PP9nZ4dlTLarxbniQce4mppllKMNm1MpGHmmYlRhqziWYTJBDDeasFkINJVyFGFzikxBilEVbQBesWKFa1ziQm/LKfSKTLlyFGFzDA33ikwZO5oKIMt7ZIWMGU3YSjnvbplcNZqGGyaTRDszU86OJmyFTAi3YgSxuaSkYbuEQMucb27b2ElJCxYMz5MqMLcMoRXKEcLmEDo1NWqY5gZmOcOqskemknBJ0Qidmp4ePbwSKJcrlC5JG6vYJNJInb5gWPbmlCoXZbv1aC9C6sRE4F5ku5/gfHyy/79k3duqBamJL7wA2InpNu3NLfT2Zv+9sLOj0xMTU9MBPX2uDZss9Jy0MsDv3ww7OyqVxjsx1apN2IVjV4ImOepdZdYQR6CkKJU92GBvhIZwr7JiE+VY7wDEDnDU3WGRKQwzhH3mFiVGqzg7sJPmplN7p86NNq8PPmMTEDphZcJYx94BKGYHR86eLR/8B6MTUxcsiLZnlER7p6cD+Spze/sFAHUCQCckeC90qDCmREYGBwfPDgkbZK+TSCFelMQNHZtbtAqh01etMreJXwBCP/00YCd4OjR6zg4OJuCRYVkDtitRqYnIbRnvAVqppLmJBHpulFm0lZPAH/Pnw+LphEkOjIKqkNglzywB8MjgyOAQbiACSDDKnTT0xjV6rjVoGu75EOun5z8d5EgNlM+OjVzyzDNLCHfWQPlIanAqMYod/XaUVWgof94rhXg7EG4M9pLI2OAlsbGxwSED/Dpk1wswJ6ZDnxFlBzYXbX2s4TyDMNQJCfPnB023uwbKYjHYAA6KzBwoH7EipKNSF6mc8e5moffK+SuD0ClBQXNUdgf7mSUCeIjtX+ai0iHQpAZbdqKOYavmBKFJEoIS5ifYG+6YpUsjn6HgsQOVbsisRDLiAXcU55z3kj7TEyAfgzApF3vaNeSwM2OXxFLw2NgM28FWLUp/gZgE/G3ZPjuIrZoUhKGen7B48eI5dmGHLV0K/ohdGvsMBJsZqBwQYxNzRzvtnbvfdBrqxdPn2DdQhixdujSWgi9NG7CKEW4wyiorzZyj2OzkoKcx1JP97CyATFogD7509kBdYNIiGDTA2DBy2NWTDBZuYLY71GLw2KXJAzcuUYTbagfqMDa3cLIDoZaAzxzsvRGO0unW36c4HG3O01qoOY5TgeBqcPD4QZ+CdBfRzj2YxvooLZABWqlU4WUwbpVcNoRhCgxu/T24s44B8mFWKlm5d4Anyyo5p3yEkGSjvRjjLGogBmZWoVhZ88FjY4EbneKSj1Kdgc1HWQXEngFjGUbufaum5oM4RgHcYBfqHM7cSsPeoWFjG6Oc+dgHtyJWRgB1Tc1j8YyCYSDkRCRFeVTYSTS/apj0Y4YRZo6aeYV3wAqGkcXVmHTrKflTU6fGK0ByBRpGResL2UtWnkl2SEX2Z8SwaZhIvcAwyx+G6MbFwfIWRPoWLOH628lTCwqeSJbLgD5EAeQsDTv8hiJkwoQw2B9WQTY5FvQxDiQf8QUQr/CWKxhZArLWEOhbBBmnh0MKrlwpmPrE1CsFBVfCGIZ56omnEB52M2aCRhMcJpNlRM7OILujcgCex2YUnB1mZpFAseLhmocDAiJu8arhkVHHH3viCqgAmAl9yBOwTGYUiviQ5BANyBAcbND8agKkgCIzixFeiqGDU2wV/C43VGp2zqMzZvkpmAAhypY6njf1ikgEv2BqSFrI1ILKWI3BYCDoBk1wSEbIBM1stAxF5+zBVsqzsrKG9CkcUjMz9u/f/6hMHmCVmFLnFVyxVAFMpyrXIDYvYEf+EJk8fnZkGJDbhY3UyYNy0zxkGc8LgL1/VvxTx21jT7GGDTpVWdljsFRwJBjekMUO+TA+YCuZ+CzkTh6Ym1RoFnJw1v79AH5hctpjt47DZDkfB2wb1Kcqd5gj99CowyJEwdqBrcgi1DAPxM1xwDxnkuccQg3cM9K+fdwISmCFVcBeB4jmM0yAXWLosaHtGUP/dGqMClKZ14DxRurpQHyBUsP1rNnHxbpV80HNLXozL2/dKV5XpHNl5ZrtPT2t1qgNE5LtwObkWSbZ4uZIrOWPEncQIblXnpgZVcNjTykAYlI/TklVWakHaHBGK6pHPG2PjbcDO1uZaaK2ys0Jrp5z7oJY+2dMyaPINR9s3GiBfeUAUS7Ai6h3AHDdtWv19XUanl3Q9tkye7BN3GjvZNYaNUSakc+Zsf+CVNum5OUdR9yNGk0dgt/iPTIFg33ApAIjdgkA1t+8dhOE7AYTtj5ExthTSQRuQi1TWqkgCs9HZzz66Dlz6gvnNq9fD9g1G7H41uUdzzv+33mEel1l5alTuSJuICbUxWv0ej1EG6lxUd+j59U6IQw+e7VvuMlM5nPSkjobYi3HAUYEfY7q8OHNGsP6jRs3klHDMAVivz4Py8nGnB2AWHnqytq1hH3tWlgFcNimI4iGuvp6GnGDETs22V7sbKUsGcGT41kzf2STAUYw9Tk6AfC2bYdBW3JIvSUX2IEp6zUn6mG43/irEyd+XVlcXFly4kQJ8OYWnijcUYkq3qHX6XVElL1Ojxtwota2Dxu5gTpGYSUX4cTJWQIuH+Vt6w2GdVu2bM4xQqNy8uo+OnHiV/X1QA3cJSW/5q8L8cqIrWs1tFJ0rU6sEDsy0ti4YryTpe0UFD0l6+cn95yFyBeoLVDjNm+3MkAbNOs1gP3RCasqpNglQH0NkrFO06PXHdiw4YAR3S5rm/pt4DYrflhBPGeARF7OWbdl3JbNButa33MMoSXgwsqxymKgLtbqtJqbpJBcq3+rrKtrg1oLm+Cii413CJtTmp/6y6lYxaz9JnOAlw3bt+fk5EAbYa0fMuToj3xkrhP8dSEkaXHxDiTkC0n9hq6urrK36rbr176+VqsbUtVmlYO/u4GBkZllcvS5w3/YDAPzdrggNz8i8zNZ5KiPHPvIhgpzc3MrCTaA90A2XjsAwQZt2LBhH9Brh2BtZWZY5lCwFcxkETVgizoIMTyvVvWZY7a4j+XmHjhVXKLVgivUIK32rS6R3s5NG/SMGTYrJSWeG1K042eJsMdtyekZUNozEG6YLGfEzi0ublar9Tg26nXqkrfBIibu/whj2OjUBUk23c0xYSmgeFo2BsJWsYwsbAYC03nbthzseWjrg7O0F2rt0RVBuK3rSDEWcrW6ue4mGWbqJMFG7oce+n5XV6rNY4aZGSkpMKdkKQfFVirk8ZMRGC8Xfve7beskzY+0FWol2EeOWMc+UwzaoW5u1hBqmpCW+q6Nk7PY+IyM55/HcIexg2GjS2TJs0i1Pvf73//+d9s2SzD10IJqJOxFEG4sevx0jOzEEdCxMzsg2iXNIL0G8vHmgTKr2F0PLYqOGv/QAs7cIBkQ6uefJ+HOVA32cSpyh30PuS8Q7C052D2QSWgssBnit+hbtUVndv3FpF1HqM6A0NrnEbv5fLNap7MebBJw8EpXKicxSBjGWuBOYQfDJjZ5agYUERLtcTvX8X1PT11dPd/GafQmafMl2H8RmHVnigj2eQIOV5iQXTdgIlf0ImEX5SYbn5aBzCloE+SGvxoYM8jxBQh3zGJ0Cbyb+cNzO18hdAIyjhvXekTYuvyiQmm0gbmoCO5oBpO8A7waKCStuubXgfNG2b6yrhs3bnRJJ7IP343mjAZJTkujsQbulAziE8Ug2NTe3zv8B6Lndm7BZq1OQMbmwgCtqA7bOtLL5UNSisrHGUINQ7de+05xsRoqNvgK8rFuA+Du++KLLw4Rcik4Lh6M5oceTp6WlvI88QjMKAw4M2bQwznEJhR7HJgbup460uLz/ZBO6EPxpr4ZuM1UlK819XsNpFutP1DGYxNyDLlIiL5KiLaKxjqNeoRyhzGqwQ5dYmMij5lOqA9jCYTn7iE9nAlZ14PFob4Vbqnzi6TcRUX5+aRZ0tKeqUHd2qrTv4V4ZYe+4EXNIgL/zqIk04dTGO4UEXcMO4QjrnwVROxzWAKF0GpJALU6LCjELzfrcEt+0ZHCwmPGCWrgGbVWLBzX17xN6fYZwQ+VSbjHi06jkxPujDRib6Amf8YzOLbJJoexBK5BVho6nd4gTs46vOf8EUkpgbQshDaEkmM7gpP6dQp3VUR+SBzs78+NNhUSTgbcz1PujIywQQd3CTexCbQlO3P5qEmR0TXECmoz7F2FR9TmanjtKiLfuHoV5zJCfgj3QpgelJwzpIyh3JCMacL7ryFgZ5ts8tzOna8QlxrqSVZS5JuQnHrev+qiXbuk2Dp1A5CKp1ygvbrvEOTiVSIg34eb6H7AZVW0ZJRkSVqmALzxs8wxljXP2sFheXzY9xD7uZ2b8aXWUGRyyKBe06rT0jAi9h5SS46QmdSR8w281Pyl4RfA1iVY+qqZINiihKRSAHFGRlqY6U2jOTbnM3ahDXs/h9jjtqwBPr4EXkNkCqyDcdOAN85X5edfv05nWORXEWJ1g0klbyOdqYpYkI+3OK8V0zJNfFjBItpj4yzOpOTIYIk2Aextuc3qZr4E6tQ4VqvR52Q39MDdLC6BWP4AVAtHUfRG8tcJm6n8HTIjlySkcFoYGERp+yMnlY93RJy3j7XPEKCnAuznxm2GXr9Z10qRm4XUJJbpgT1SHyncJakjANqqIR96wG7CSu1rgHYaphsScrKJ6EErJ/Gp5NKjCmbYCwPiIiLiAnxs2QRy8sU1zbwgMyXVpF6LW3Ui7F27CptrG2rVGkEGXe2O0yAkh+UNUeWGrCT3nF4VzQ39nTstGn4rI+JAAX4qy8ESeiqI9s73cwmzzrwAalr5+Euj3VALalDrDTx47S+A7cYhzMbTZuT7yK5YJOSg2Co/b4RetmxZgtnpZkJPBeF+/xWE65HW7B5ts1HYTdFBEobI5lpBDTCgajQ9O94GtjI+G2l8ywTyMlwdH6WyF9sbYx2xbFnEsiBPpVWboEuQrf6mGBn76PPNfDe9e3eVUbtrJWpQ1546bcTmPW0ix/hbS8iBsTmfgIi4ZRHLYY5zD5qjtNJTLQbs9/G9VR2PrMOmn1zQNjoE32OO3YplhAff+9ppwr1PlI2nT39IyIlrHowayt/MiLF9AsAgccsjli1fjvGew1rYJP6br4FLCoBSC2WaIBM1a1tpPdHCyh4Ycajy8/dgiPlkRPK9JCE/hElcR9DmH+JG0FAS0gw7AWyNyDi7u7tPXmheBb/1xhsQ7VfOiwU10JicN/W4wVgCofzt3bu31lhHenS1v/jQKCn5VeT+8PR3FiXZi835BaA/lmG8I9yXL/My53529RvA/f6LJUZkeB/OH1+nJZDEX6glUP4a9iK3ulWoIzlvA+/VMoSk5KY6UobrHw4pIc3rto93HFrEHWaIt1eQtH5Hf//o6jde/vHO93dQZjh0IEIGp+upa5pN0a7dS1UL6Ij9OrIdolXEjPzQaVz91pCCbT7c+Hi7L1sO/nZ3Xx7n5TVZkpWqiZ8cXf3qb37zPnHJHn29pAfsAVvv4V8E7Kbw3W9RPkXm0Rt0+tcw2IeE8eU0T04SdB/e/L+Ph/ZHg+Y9ycJJ7uDvCK/ly728FkuD/ezJo0c//uVvgPvFPXv2nK/nm0BaAvfgJpiIdoOqcIG0MERuh3Qk5JUEs0w0MvLk4Bty6+OTE1WOYGezk4KWLXeHeHt5SU8Vjlr9ydGjW38J3D9+sQRUTw7m1a9dW2Kh2lqKX/sOKKeOKGdNyTvv/K8Q3kOC9pWdNiUpBPvkyfGOnb3DzgkCi0R4eU2XJiRYBLX6DVw4qKMnyWOcPPmJSEcl+mR1lEPYcCr8YvcId6/F0r/xGH+Sf9zV5HlBR42LIevo4Dr5ycQkh7CzlZ6Lvby8pH/mtmg1H5nVqz9xtcY7ho0nlZtZJHvixyOn/1I5iK3ym2zWAk7888jJYWwwitmvTvzzn0ZKw8E218Q/fzpS+pMzsT/9fMTkROwffv7ZiMmJ2D/67P5fR0r/6UTs+90jJmdid98eKd1xJnbfpRGTM7HP9l8eIZ193HnYP3jgR70XR0LdYx54gHMWNhw+fvZPfxwJffpD554t/+ynfwP90aULuLgG2+X6GpvH/uc//+by6Z+uwB4B/XF0Yn/6NTbF/sdIyOkm+XxEsD//Gpti//3v/8DJRTP/4K7ARn3lsiWRq7BdBk5n52N/xevvrlnS2XXYLtXX2Dz2l19+5dIJ5y8/czb2Z1+6Vl+Ry2jD/iu9cj72iByScjb2D0Yn9rNwFNDVxwHhGZwf7fvwqC6VK7Ah2q5lvvfXe/fv33NBtO/dv3fvvosm4caXzsaGh8YHd5HuCxeXYLtSvaj7D4wm7N47d+5tffXVN99885v4tcbOxO7u7u3uvdfbfa/3XrdTZ4jz1t++99Km8opG1CMe/oHzZEpnYfcC8z1cdPfSa+fM8Ghb39vU2FhRVV5eDufFwrKqsbQ6NMZp2L0Yb7rs7nXa3HvxpeoKBBapvKI9PMZhbHkMK8GGp+gVri72dl8UNpDbDq723tm6yQp2dcc8B7GV08Jb/N34Y/s/6L7D6yJceoWVO910g6OrqK0/a2pvrCAmIaqqqGhs72hyEJsNbC9tbzr4jUwTdi+ZCHSvsHJHtGL/Klz1bf3ZwYNNHS3VpSQjwdftbZ2dTQ5iKwNLq6pKOw8efHIaS7D7+s6i+vpu33GuEBvUhOo0yTHsaaVV18tLm/ABp2FPsvXVN3+LevPVrRf7zvYZP0bkp9vkctvq2kD33r5z9vGfUGKeuaOzA9TmmLfdHqm6fr2qmmB/g3Gb6V/eKKj8pfd+u9UEPkyd3frzNp6X4FK1tLQ5gs14APX1ihZ86Q56eAAr6no5KasVjaWbfn6x77bldLtvwMnKprNvbmosJdGluADc0tLe3t7iQb7mkIlx8502EzTN1y2eGQybC2zEMtTYSV6+dvP6dL2qtOXn4HJ43gF0e6B1YQWLdlVjdTvhbUdgVHV4aBqbLZ8X6vGI8UUufcQjdJ58QGy3RxAUPEJMBw9sUVZb3uvvc4Ye/0kLFD8QVBCi0lIsJoFyJTcvvLGqXBQwGD2rw30529hsaBWB6+CzpK0UHreKFtYqvqwi9qVhTn137z7+7sHOdnj43UZVlFa3NUEVkIWXmkULXRsus43t20iDzUM3HWzqbGuHOKCqq1s60Dvv9d+92zfMCWbAxuLX0Qb+qAZLt3XgUyJ2TAe8ymJ3lkOv1dIRYxNb4c8Hm1B7+Dfx4gsqvUZsXn1WLuL7xFvM70PspibpM3R0dCL2kwc7qomB8MR7YqP2js4nbWO7kWBXVJOS1OnvIRoEaFFFibCHo8ffNdGKSqCHG2LDHnV24Mtgeh1sY6tCaRmheG1gZHFFFQorwb403Ln/0kt8wTZVbCwp1S0x8U8KLwP/+pLdarOJLcMyUl7RQh+mvYLcauFLKq2q7S2bftrff5cGvN/abFT/Xekm8Q2YL/90U5u0YmP9g1I+L+ZJK69CW7hNbN9GYhH+x1qqd+9uxBdJqKmo0v95+TI8aT/RXWuzUXf7pZvMbty9/PIm0QO3YwmECth2cF78k52Wr0KLTWwVDjUVpXyAQzExoDzhGya+koA2vXyZh7mEV5f6+aXxBr2Dv1O6SXQf2fPL73a0EVosVWRcgfLadHCaIrCNMJteBFSgwgY2619RXlFK960ldBqpT8b6xyfHppcxUpf6naHL74KHO4WoQg3oxByFEoiDZHi7iDrcI9SXsTXcKDwaYRAkP9fiEeMrLU58GaHYw9Ylik1yTtyzdtASqGRifGcGhob6g0JDA2f6xvBfWWM12qHG/Qv3VfmKaY0227T1rNPU/67x8U0tldC3ku/yk9F/CWX8Dhvr3o4PDKfY4TMV2W6Yxxbt2aYfOVFPiKsrX6/awt3sfeeuYnxDBepsJhCZpWnRHj7Pif+hh5PN9BA3gHgj3N9XYf8BB6Vsnn+1B/lNjvENhMQQVahw/0A3p/7DNE4R7xsY6u8RHl7dHh4e7uEfOtPNwcM7bIyvcLABEiNtXiBkBipw5jw3mcLp/1oK/6wx2S3N1zctzS1m8C89GuA/sIh/E/7qkJHL4b+OyRk7vrTK3qCTrw8e0pe5/gu19OASqmf4XwAAAABJRU5ErkJggg=="},lwsE:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},s1fJ:function(t,e,s){"use strict";var i=s("oCYn");e.a=new i.default},"sg+6":function(t,e,s){"use strict";var i=s("lwsE"),n=s.n(i),r=s("W8MJ"),a=s.n(r),o=function(){function t(e){n()(this,t),this.subscribers={},this.requestsPending=0,this.historyProvider=e}return a()(t,[{key:"subscribeBars",value:function(t,e,s,i){this.subscribers[i]={lastBarTime:null,listener:s,resolution:e,symbolInfo:t}}},{key:"unsubscribeBars",value:function(t){delete this.subscribers[t]}},{key:"updateData",value:function(){var t=this;if(!this.requestsPending)for(var e in this.requestsPending=0,this.subscribers)this.requestsPending++,this.updateDataForSubscriber(e).then((function(){return t.requestsPending--})).catch((function(){return t.requestsPending--}))}},{key:"updateDataForSubscriber",value:function(t){var e=this;return new Promise((function(s,i){var n=e.subscribers[t],r=parseInt((Date.now()/1e3).toString()),a=r-e.periodLengthSeconds(n.resolution,10);e.historyProvider.getBars(n.symbolInfo,n.resolution,a,r,(function(i){e.onSubscriberDataReceived(t,i),s()}),(function(){i(new Error("error"))}))}))}},{key:"onSubscriberDataReceived",value:function(t,e){if(this.subscribers.hasOwnProperty(t)&&e.length){var s=e[e.length-1],i=this.subscribers[t];if(!(null!==i.lastBarTime&&s.time<i.lastBarTime)){if(null!==i.lastBarTime&&s.time>i.lastBarTime){if(e.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");var n=e[e.length-2];i.listener(n)}i.lastBarTime=s.time,i.listener(s)}}}},{key:"periodLengthSeconds",value:function(t,e){return 24*("D"===t||"1D"===t?e:"M"===t||"1M"===t?31*e:"W"===t||"1W"===t?7*e:e*parseInt(t)/1440)*60*60}}]),t}(),c=function(){function t(e){n()(this,t),this.self=e,this.barsUpdater=new o(this)}return a()(t,[{key:"onReady",value:function(t){var e=this;return new Promise((function(t,s){var i=e.defaultConfiguration();e.self.getConfig&&(i=Object.assign(e.defaultConfiguration(),e.self.getConfig())),t(i)})).then((function(e){return t(e)}))}},{key:"resolveSymbol",value:function(t,e,s){var i=this;return new Promise((function(t,e){var s=i.defaultSymbol();i.self.getSymbol&&(s=Object.assign(i.defaultSymbol(),i.self.getSymbol())),t(s)})).then((function(t){return e(t)})).catch((function(t){return s(t)}))}},{key:"getBars",value:function(t,e,s,i,n,r,a){this.self.getBars(t,e,s,i,(function(t){t&&t.length?n(t,{noData:!1}):n([],{noData:!0})}),r,a)}},{key:"subscribeBars",value:function(t,e,s,i,n){this.barsUpdater.subscribeBars(t,e,s,i,n)}},{key:"updateData",value:function(){this.barsUpdater.updateData()}},{key:"unsubscribeBars",value:function(t){this.barsUpdater.unsubscribeBars(t)}},{key:"defaultConfiguration",value:function(){return{supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","120","240","360","720","1D","1W"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0}}},{key:"defaultSymbol",value:function(){return{name:"BTCUSDT",timezone:"Asia/Shanghai",minmov:1,minmov2:0,pointvalue:1,fractional:!1,session:"24x7",has_intraday:!0,has_weekly_and_monthly:!0,has_no_volume:!1,pricescale:1,ticker:"BTCUSDT",supported_resolutions:["1","5","15","30","60","120","240","360","720","1D","1W","1M"],overrides:{volumePaneSize:"small","paneProperties.bottomMargin":20,"Overlay.showPriceLine":!1}}}}]),t}();e.a=c},"z/s1":function(t,e,s){"use strict";var i=s("o0o1"),n=s.n(i),r=s("yXPU"),a=s.n(r),o=s("vKDJ"),c={name:"Transfer",props:{dialogVisible:{type:Boolean,default:!1},assetCode:{type:String,default:""},symbol:{type:String,default:""}},data:function(){return{form:{assetCode:"",amount:""},rules:{assetCode:[{required:!0,trigger:"blur"}],amount:[{required:!0,message:this.$t("contract.please_enter")+this.$t("contract.transfer_amount"),trigger:"blur"}]},accountSide:"exchange",assetCodes:[],availableBalance:"",transferAccountInfo:[]}},watch:{accountSide:function(){this.render()}},mounted:function(){this.form.assetCode=this.assetCode,this.render()},methods:{render:function(){var t=this;return a()(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getTransferAccountInfo({accountSide:t.accountSide,preAssetCode:t.form.assetCode});case 2:s=e.sent,t.transferAccountInfo=s,t.assetCodes=s.map((function(t){return t.assetCode})),t.form.assetCode=t.assetCodes[0],t.availableBalance=s.find((function(e){return e.assetCode===t.form.assetCode})).availableBalance;case 7:case"end":return e.stop()}}),e)})))()},handleAllAmount:function(){this.form.amount=this.availableBalance},setAccountSide:function(){this.accountSide="exchange"===this.accountSide?"contract":"exchange"},handleAssetCode:function(t){this.availableBalance=this.transferAccountInfo.find((function(e){return e.assetCode===t})).availableBalance},handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e&&!t.transferSubmiting){t.transferSubmiting=!0;try{"exchange"===t.accountSide?o.a.exchangeToContract(t.form).then((function(){t.$message.success("success"),t.form.amount="",t.$emit("close",!0)})).finally((function(){t.transferSubmiting=!1})):o.a.contractToExchange(t.form).then((function(){t.$message.success("success"),t.form.amount="",t.$emit("close",!0)})).finally((function(){t.transferSubmiting=!1}))}catch(t){}}}))},handleClose:function(){this.$emit("close",!1)},handInputAmount:function(t){this.form.amount=C.Utils.setNumberDigit(t,8)}}},l=s("KHd+"),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transfer-container"},[s("el-dialog",{staticClass:"protocol-dialog",attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"446px"},on:{close:t.handleClose}},[s("div",{staticClass:"title-dialog",attrs:{slot:"title"},slot:"title"},[s("span",[t._v(t._s(t.$t("my_assets.transfer")))])]),t._v(" "),s("div",{staticClass:"content-container"},[s("el-form",{ref:"form",attrs:{"status-icon":!1,"hide-required-asterisk":!1,model:t.form,rules:t.rules,"label-position":"top"}},[s("el-form-item",{attrs:{prop:"assetCode"}},[s("header",{staticClass:"label"},[t._v("\n            "+t._s(t.$t("my_assets.asset_code"))+"：\n          ")]),t._v(" "),s("el-select",{staticClass:"input-dialog",on:{change:t.handleAssetCode},model:{value:t.form.assetCode,callback:function(e){t.$set(t.form,"assetCode",e)},expression:"form.assetCode"}},t._l(t.assetCodes,(function(t){return s("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1),t._v(" "),s("div",{staticClass:"exchange-contract"},[s("i",{staticClass:"icon-hz_liucheng"}),t._v(" "),s("div",{staticClass:"account-transfer"},[s("div",{staticClass:"to"},[s("span",[t._v(t._s(t.$t("contract.from")))]),t._v(" "),s("span",[t._v(t._s("exchange"==t.accountSide?t.$t("invite.exchange_account"):t.$t("invite.contract_account")))])]),t._v(" "),s("div",{staticClass:"from"},[s("span",[t._v(t._s(t.$t("contract.to")))]),t._v(" "),s("span",[t._v(t._s("exchange"==t.accountSide?t.$t("invite.contract_account"):t.$t("invite.exchange_account")))])])]),t._v(" "),s("div",{staticClass:"transfer-btn"},[s("i",{staticClass:"icon-hz_anniu",on:{click:t.setAccountSide}})])]),t._v(" "),s("el-form-item",{attrs:{prop:"amount"}},[s("header",{staticClass:"label",staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[t._v(t._s(t.$t("order.number"))+"：")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px",color:"rgba(106,127,167,1)","font-weight":"400"}},[t._v(t._s(t.$t("trade.usable"))+"："+t._s(t._f("round")(t.availableBalance,8))+" "+t._s(t.form.assetCode))])]),t._v(" "),s("el-input",{staticClass:"input-dialog amount-input",attrs:{placeholder:t.$t("contract.please_enter")+t.$t("contract.transfer_amount")},on:{input:t.handInputAmount},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[s("div",{staticStyle:{height:"46px","line-height":"46px"},attrs:{slot:"suffix"},slot:"suffix"},[s("span",{staticStyle:{"margin-right":"10px",color:"#B0B7CC"}},[t._v(t._s(t.form.assetCode))]),t._v(" "),s("span",{staticStyle:{color:"#E9EAEF"}},[t._v("|")]),t._v(" "),s("span",{staticStyle:{margin:"0 10px",color:"#4A86F8",cursor:"pointer","user-select":"none"},on:{click:function(e){return e.stopPropagation(),t.handleAllAmount(e)}}},[t._v(t._s(t.$t("order.all")))])])])],1)],1),t._v(" "),s("div",{staticClass:"tip-msg"},[s("span",[t._v(t._s(t.$t("contract.transfer_tip_desc")))])]),t._v(" "),s("div",{staticClass:"p-btn",staticStyle:{"margin-top":"40px"}},[s("span",{staticClass:"p-btn-left",on:{click:t.handleClose}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),s("span",{staticClass:"p-btn-right active",on:{click:t.handleSubmit}},[t._v(t._s(t.$t("common.confirm")))])])],1)])],1)}),[],!1,null,"1dc8bb88",null);e.a=u.exports}}]);